function controlSound(){var t=$("#sound-but")[0].children[0];$(t).hasClass("icon-volume-up")?($(t).removeClass("icon-volume-up"),$(t).addClass("icon-volume-off"),global_sound=!1):($(t).addClass("icon-volume-up"),$(t).removeClass("icon-volume-off"),global_sound=!0)}$(document).ready((function(){controlSound()})),$("#sound-but").on("click",(function(t){t.preventDefault(),"icon-volume-up"==this.children[0].className?($(this.children[0]).removeClass("icon-volume-up"),$(this.children[0]).addClass("icon-volume-off"),global_sound=!1):($(this.children[0]).removeClass("icon-volume-off"),$(this.children[0]).addClass("icon-volume-up"),global_sound=!0)})),function(){var t={};!function(){"use strict";t.containers={},t.lang={};var i=t.games={};t.startGame=function(e,o){t.curGame=[e,o],t.gameSettings.lastGame=e+"-"+o,t.game.empty(),t.game.setCurrentGame(new(i[e.capitalize()])(o)),t.ui.updateWithGame(e,o),t.game.play(),$(document).trigger("game:change",t.curGame)},t.startPlaying=function(){if(t.config.isApp||"true"!=t.data.multiPages){var i=e.parseQuery().game||t.gameSettings.lastGame;if("replaceState"in history&&(history.replaceState("",document.title,location.pathname),$("#game-ui").css("display","block")),i||(i=t.data.defaultGame),i){var o=i.split("-"),n=t.ui.gamesUI[o[0]];n&&n.variation&&n.variation[o[1]]?this.startGame(o[0],o[1]):t.ui.showGameSelector()}else t.winAppSplash&&t.winAppSplash.hide(),t.ui.showGameSelector()}else{var a=/([a-z_]*)\.(html|php)/.exec(window.location);if(a){var s=t.ui.gamesUI;for(var o in a=a[1],s)for(var r in s[o].variation)if(s[o].variation[r].normalizedName==a)return void t.startGame(o,r)}(i=t.data.defaultGame)?(o=i.split("-"),this.startGame(o[0],o[1])):t.ui.showGameSelector()}}}(),t.createCounter=function(t){function e(){n.notify({total:i,count:o})}var i=t||0,o=i,n=$.Deferred();return e(),{decrement:function(){o--,e(),o<=0&&n.resolve()},increment:function(){o++,i++,e()},total:function(){return i},resolve:function(t){n.resolve(t)},reject:function(t){n.reject(t)},promise:function(){return n.promise()}}},t.progressBar=function(){var t=[].slice.call(arguments),e=$.Deferred(),i=$("#progress").css("width",0).show();return $.when.apply($,t).progress((function(){var t=100*function(t){var e=0,i=0;return $.each(t,(function(t,o){e+=o.total,i+=o.count})),(e-i)/e}(arguments);i.css("width",t+"%"),t>=100&&e.resolve()})),e.promise()},function(){"use strict";function e(t){return"pt_pt"===(t=t.toLowerCase().replace("-","_"))||"pt_br"===t?t.substring(0,5):"zh_hans"===t.substring(0,7)?t.substring(0,7):t.substring(0,2)}function i(){return(("windows"===t.config.isApp?Windows.System.UserProfile.GlobalizationPreferences.languages.filter((function(t){return a.hasOwnProperty(e(t))}))[0]:function(){var t=navigator.languages&&navigator.languages[0]||navigator.language||navigator.browserLanguage||navigator.userLanguage;for(var i in a)if(i===e(t))return t}())||"en").toLowerCase()}var o,n=t.localisation={},a=n.language={en:"English"},s={"game-bakers_game":"Baker's Game","game-canfield":"Canfield","game-easthaven":"Easthaven","game-eight_off":"Eight Off","game-forty_thieves":"Forty Thieves","game-flower_garden":"Flower Garden","game-freecell":"FreeCell","game-freecell_two_decks":"FreeCell Two Decks","game-golf":"Golf","game-golf_easy":"Golf Easy","game-klondike":"Klondike","game-klondike_by_threes":"Klondike by Threes","game-klondike_two_decks":"Klondike Two Decks","game-pyramid":"Pyramid","game-pyramid_easy":"Pyramid Easy","game-scorpion":"Scorpion","game-simple_simon":"Simple Simon","game-spider_four_suits":"Spider Four Suits","game-spider_one_suit":"Spider One Suit","game-spider_two_suits":"Spider Two Suits","game-yukon":"Yukon","game-diplomat":"Diplomat",green_felt:"Green Felt",big_ben:"Classic",caricatures:"Caricatures",large_print:"Large Print",large_print_london:"Large Print Classic",large_print_modern:"Large Print Modern",modern:"Modern",christmas:"Christmas",merry_christmas:"Merry Christmas",butterflies:"Butterflies",cat:"Cat",rhombus_blue:"Rhombus Blue",games:"Games",new:"New",undo:"Undo",hint:"Hint",autoplay:"Auto",scores:"Scores",statistics:"Statistics",settings:"Settings",appearance:"Appearance",options:"Options",rules:"Rules",about:"About",more:"More","new-game":"New Game","new-game-ask":"What would you like to do with your game in progress?","start-new":"Quit and Start a New Game","start-new-won":"Play New Game",restart:"Restart This Game",keep:"Keep Playing","game-sounds":"Game Sounds","player-name":"Player Name","show-hi-scores":"Show Enter Hi-Scores","apply-swing":"Apply swinging card effect during the drag","apply-expand":"Expand cards on mouse over when the tableau columns are compressed",languages:"Language","id-language":"English","css3-item":"Use hardware-accelerated animations","enable-effect":"Enable visual effects (shadows, cards enlarging, buttons)","left-handed":"Left-Handed","advanced-options":"Advanced Options",on:"On",off:"Off","card-set":"Card Set","card-back":"Card Back",backgrounds:"Backgrounds","autoplay-settings":"Automatically move cards to the foundations","global-autoplay":"Global","selective-autoplay":"Selective","no-autoplay":"Disabled",counters:"Show Counters","show-score":"Score","show-time":"Time","show-moves":"Moves","game-won":"Game Won!",congratulations:"CONGRATULATIONS!","cong-text":"YOU WON!",won:"won",lost:"lost",win:"win",wins:"wins",loss:"loss",losses:"losses",clear:"Clear","clear-stats":"Clear Statistics and Scores","clear-stats-text":"Are you sure you want to clear statistics?","no-more-moves":"No more moves","no-more-moves-text":"There are no more moves available.","back-and-undo":"Go back and undo some moves","select-a-solitaire":"Select a Solitaire",spider:"Spider","spider-deal-info":"There must be at least one card in each tableau column <br /> before you can deal a new row of cards.",score:"Score",time:"Time",moves:"Moves","click-here":"click here",website:"Website","privacy-policy":"Privacy Policy",support:"Support",loading:"Loading",ok:"OK",close:"Close",cancel:"Cancel",back:"Back",play:"Play","game-number":"Game Number","bad-game-number-label":"That is not a valid game number","try-again":"Try again",player:"Player",replay:"Replay","total-won":"Total Won:","total-played":"Total Played:","game-won-label":"Game Won","state-not-yet-played":"Not Yet Played","state-not-yet-won":"Played and not yet Won","state-won":"Won","won-game-of-the-day":"Congratulations! You won the Game of the Day: {{day}}","days-won":"Days Won","days-lost":"Days Lost","oldest-day-played":"Oldest Day Played","won-games":"Won Games","best-time":"Best Time","avg-time":"Average Time","hint-key":"h"};n.populate=function(t){},n.load=function(i){var n=$.Deferred();if((i=i.replace("-","_"))in s){if(t.lang[i])return e(i),n.resolve(),n.promise()}else o="en";return window.tcgsol||(window.tcgsol={lang:t.lang||{}}),$.when($.getScript("rideordie/solitaire/js/languages/"+i+".js").then((function(){window.tcgsol!==t&&(t.lang=window.tcgsol.lang,window.tcgsol=null),e(i),n.resolve()})).fail((function(){o="en",n.resolve()}))).then((function(){return n.promise()}))},n.get=function(t){return a[t]},n.getL=function(t){return s[t]?s[t]:(console&&console.log(t),"place holder")},n._=function(e){return s[e]?s[e]:t.lang.en&&t.lang.en[e]?t.lang.en[e]:this.getL(e)},n.date=function(t){},n.getLanguageTag=i,n.getCurrentLang=function(){return o},n.getSystemLang=function(){var o;if("windows"==t.config.isApp){o=i();var n=t.data.projectType;"pyramid"!=n&&"christmas"!=n&&"123freesolitaire"!=n||(o="en")}else o=i(),o="en";return e(o)}}();var e={};!function(){"use strict";$.browser={};for(var t=/ios|iphone|ipad|ipod|android|mobile/i.test(navigator.userAgent),i=[{name:"opera",check:/OPR|Opera/},{name:"msedge",check:/Edge/},{name:"chrome",check:/Chrome/},{name:"safari",check:/Safari/},{name:"mozilla",check:/Firefox/},{name:"msie",check:/MSIE|Trident/}],o=navigator.userAgent,n=0;n<6;n++){var a=i[n];if(a.check.test(o)){$.browser[a.name]=!0,$("html").addClass(a.name),$("html").addClass(t?"mobile-browser":"desktop-browser");break}}String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},window.toStaticHTML||(window.toStaticHTML=function(t){return t}),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),i=this,o=function(){},n=function(){return i.apply(this instanceof o&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return o.prototype=this.prototype,n.prototype=new o,n}),e.dist=function(t,e,i,o){return Math.sqrt((t-i)*(t-i)+(e-o)*(e-o))},e.prefix=function(){for(var t=document.createElement("div"),e=["Moz","Webkit","O","ms"],i=0;i<4;++i)if(e[i]+"Transform"in t.style)return e[i]}(),e.dasherizedPrefix={Moz:"-moz-",Webkit:"-webkit-",O:"-o-",ms:"-ms-","":""}[e.prefix],e.isUWP=function(){var t=Windows.ApplicationModel.Package.current.id.version;return!!(t.major>"2"||(t.major="2")&&t.minor>="7")},e.getBestMove=function(t){return function(e,i){return e?i.cards.length?e.cards.length?i.lastCard().type!==t[0].type?e:e.lastCard().type!==t[0].type?i:e.maxCardOut()>=i.maxCardOut()?e:i:i:e:i}},e.isInt=function(t){return!isNaN(t)&&parseInt(+t)==t&&!isNaN(parseInt(t,10))},e.choose=function(t){return t[Math.floor(Math.random()*t.length)]},e.timeFormat=function(t){if(!$.isNumeric(t))return"--:--";var e=(t=Math.floor(t))%60,i=~~(t/60),o=~~(i/60);return(o?(o>9?o:"0"+o)+":":"")+((i%=60)>9?i:"0"+i%60)+":"+(e>9?e:"0"+e)},e.template=function(t,e){},e.parseQuery=function(){for(var t=location.search.slice(1).split("&"),e={},i=0;i<t.length;i++){var o=t[i].split("=");e[decodeURI(o[0])]=decodeURI(o[1])}return e}}(),function(){function e(){var t=navigator.userAgent.toLowerCase();return t.match(/iphone/)?"iPhone":t.match(/android/)&&t.match(/mobile/)?"android":t.match(/windows/)&&t.match(/phone/)?"windows":null}var i=t.config={version:1,isFreeApp:!0,flipScale:1.2,ifFreeApp:!0,moveWithAnimate:!1,rateReminderLinkiOS:"ioslink",rateReminderLinkChrome:"chromelink",isChromePackagedApp:!!(window.chrome&&window.chrome.app&&window.chrome.app.window),isDebugging:!1,isRetina:window.devicePixelRatio>1,isMobilePhone:null,useLargeShadow:navigator.userAgent.toLowerCase().match(/safari/)||$.browser.msie,isiOS:!!navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad)/),isiOS7:!!navigator.userAgent.match(/(iPad|iPhone);.*CPU.*OS 7_\d/i),isApp:window.cordova?"phoneGap":window.WinJS?"windows":window.chrome&&window.chrome.app&&window.chrome.app.window?"chrome-packaged":null,easingFunc:"easeOutCubic",undoSpeed:3800,noEnlarging:!1,noDragShadow:!1,noDecoration:!1,animation_time:370,animationSpeed:4800,autoplaySpeed:4100,revertSpeed:4800,automoveSpeed:3800,flipTime:100,minimum_moving_time:200,offsetStockDiv:2,totalL:null!=e()&&e()?3.1:3.85,cL:3};window.navigator.msPointerEnabled?(i.event_touchstart="MSPointerDown",i.event_touchmove="MSPointerMove",i.event_touchend="MSPointerUp"):(i.event_touchstart="touchstart",i.event_touchmove="touchmove",i.event_touchend="touchend"),i.useFluctuating=!1,i.useCardEffects=!1,i.noScaling=!i.isiOS,i.isiOS&&(i.animationSpeed=3800,i.autoplaySpeed=1800,i.revertSpeed=3800,i.automoveSpeed=1800,i.flipTime=200,i.minimum_moving_time=400,i.totalL=8,i.cL=7),$.browser.chrome=/chrome/.test(navigator.userAgent.toLowerCase())}(),function(){"use strict";if(window.chrome&&window.chrome.storage){var e=chrome.storage.local,i={},o={},n=function(t,e){this.key=t,this.val=e};n.prototype.set=function(t){if(this.val=t,this.updating)this.afterUpdate=function(){this.set(t)};else{var i={};i[this.key]=t,this.updating=!0,e.set(i,function(){this.updating=!1,this.afterUpdate&&(this.afterUpdate(),this.afterUpdate=null)}.bind(this))}},n.prototype.get=function(){return this.val},n.prototype.remove=function(){this.val=null,this.updating?this.afterUpdate=this.remove:(this.updating=!0,e.remove(this.key,function(){this.updating=!1,this.afterUpdate&&(this.afterUpdate(),this.afterUpdate=null)}.bind(this)))},t.cachedChromeStorage={isCached:!0,set:function(t,e){e+="",i[t]||(i[t]=new n(t,o[t]||null)),i[t].set(e)},get:function(t){return i[t]||(i[t]=new n(t,o[t]||null)),i[t].get()},remove:function(t){i[t]||(i[t]=new n(t,o[t]||null)),i[t].remove()},loadToCache:function(t){e.get(null,(function(e){o=e,t()}))}}}else t.cachedChromeStorage=null}(),window.uniStore=function(){"use strict";var e={},i=!1;try{localStorage.test,localStorage.test="test"}catch(e){window.Windows&&Windows.Storage&&(i=!0)}if(i){var o=Windows.Storage.ApplicationData.current.localSettings.values;e.get=function(t){return null===o[t]||void 0===o[t]?null:""+o[t]},e.set=function(t,e){null===e?o.remove(t):o[t]=e+""},e.remove=function(t){o.remove(t)}}else t.config.isChromePackagedApp?e=t.cachedChromeStorage:(e.set=function(t,e){localStorage.setItem(t,e)},e.get=function(t){return localStorage.getItem(t)},e.remove=function(t){localStorage.removeItem(t)});return e.loadToCache||(e.loadToCache=function(t){t()}),e.allKeys=["solitairen.data.version","solitairen.lastgame"],e.getVersion=function(){var i=e.get("solitairen.data.version");return i?parseInt(i,10):e.get("solitairen.lastgame")?0:t.config.version},e.getInt=function(t){var e=parseInt(this.get(t),10);return isNaN(e)?0:e},e.setVersion=function(t){return e.set("solitairen.data.version",t)},e.useMemStore=function(){},e}(),function(){"use strict";t.gameSettings={allKeys:["solitairen.solitaire.language","solitairen.solitaire.soundOn","solitairen.solitaire.swingCard1","solitairen.solitaire.cardEffect","solitairen.solitaire.useCSS3","solitairen.solitaire.showMoves","solitairen.solitaire.showScore","solitairen.solitaire.showTime","solitairen.solitaire.autoplayMode","solitairen.solitaire.background","solitairen.solitaire.cardback","solitairen.solitaire.cardset","solitairen.solitaire.lastgame"],load:function(){this.updateDefaults(),this.soundOn=this.soundOn,this.showHiScores=this.showHiScores,this.showTime=this.showTime,this.showScore=this.showScore,this._1$=this._1$,this.autoplayEnabled=1==localStorage.getItem("auto-pl"),this.autoplayMode=uniStore.get(this.prefix+".autoplayMode"),this._0$?this._0$=this._0$:this._0$=t.config.useFluctuating,null===this.cardEffect?this.cardEffect=t.config.useCardEffects:this.cardEffect=this.cardEffect,this.useCSS3=this.useCSS3,this.background=this.background,this.cardback=this.cardback,this.cardset=this.cardset},ini:function(){this.autoplayMode="s",this.autoplayEnabled=1==localStorage.getItem("auto-pl"),this.showTime=!0,this.showScore=!0,this._1$=!0,this._0$=t.config.useFluctuating,this.cardEffect=t.config.useCardEffects,this.soundOn=0,this.showHiScores=!1,this.background=t.data.defaultBackground,this.cardback=t.data.defaultCardback,this.cardset=t.data.defaultCardset,this.useCSS3=!$.browser.msie&&"windows"!==t.config.isApp||navigator.cpuClass&&"ARM"===navigator.cpuClass.toUpperCase(),this.updateDefaults()},updateDefaults:function(){this.newDefaults.forEach(function(t){uniStore.get(this.prefix+"."+t.updated)||(this[t.key]=t.value,uniStore.set(this.prefix+"."+t.updated,!0))}.bind(this))},newDefaults:[{updated:"useCSS3Update",key:"useCSS3",value:!$.browser.msie&&"windows"!==t.config.isApp||navigator.cpuClass&&"ARM"===navigator.cpuClass.toUpperCase()}],prefix:"solitairen.solitaire",_autoplayMode:"s"},Object.defineProperties(t.gameSettings,{language:{get:function(){if(t.config.isApp)return uniStore.get(this.prefix+".language")||t.localisation.getSystemLang()||"en";var e=[uniStore.get(this.prefix+".language")||"en",location.hostname.split(".").pop(),location.pathname.split("/")[1],t.localisation.getSystemLang(),"en"];return $.grep(e,(function(e){return e=e.replace("-","_"),t.localisation.language.hasOwnProperty(e)}))[0]},set:function(t){uniStore.set(this.prefix+".language",t)}},soundOn:{get:function(){return"true"===uniStore.get(this.prefix+".soundOn")},set:function(e){t.audio.toggle(e),uniStore.set(this.prefix+".soundOn",e),e?$("#sound-option").val("on"):$("#sound-option").val("off"),$("#sound-option").slider("refresh"),$("#sound-but").removeClass("volume-off").addClass(e?"":"volume-off")}},showHiScores:{get:function(){return"false"!==uniStore.get(this.prefix+".showHiScores")},set:function(t){uniStore.set(this.prefix+".showHiScores",t),$("#show-hi-scores").val(t?"on":"off").slider("refresh")}},_0$:{get:function(){return uniStore.get(this.prefix+".swingCard1")},set:function(e){uniStore.set(this.prefix+".swingCard1",e),!0===e||"true"==e?(t.game.setMovingSwinging(!0),$("#swing-option").val("on").slider("refresh")):(t.game.setMovingSwinging(!1),$("#swing-option").val("off").slider("refresh"))}},cardEffect:{get:function(){return uniStore.get(this.prefix+".cardEffect")},set:function(e){uniStore.set(this.prefix+".cardEffect",e),!0===e||"true"==e?(t.game.setCardEffect(!0),$("#effect-option").val("on").slider("refresh")):(t.game.setCardEffect(!1),$("#effect-option").val("off").slider("refresh"))}},useCSS3:{get:function(){return null===uniStore.get(this.prefix+".useCSS3")?(uniStore.set(this.prefix+".useCSS3",!0),!0):"true"==uniStore.get(this.prefix+".useCSS3")},set:function(t){uniStore.set(this.prefix+".useCSS3",t),!0===t||"true"==t?$("#css3-option").val("on").slider("refresh"):$("#css3-option").val("off").slider("refresh")}},_1$:{get:function(){return"true"===uniStore.get(this.prefix+".showMoves")},set:function(t){t?($("#moves-toggle").attr("checked",!0),$("#display-moves").show(),uniStore.set(this.prefix+".showMoves",!0)):($("#moves-toggle").attr("checked",!1),uniStore.set(this.prefix+".showMoves",!1),$("#display-moves").hide()),$("#moves-toggle").checkboxradio("refresh")}},showScore:{get:function(){return"true"===uniStore.get(this.prefix+".showScore")},set:function(t){t?($("#score-toggle").attr("checked",!0),$("#display-score").show(),uniStore.set(this.prefix+".showScore",!0)):($("#score-toggle").attr("checked",!1),uniStore.set(this.prefix+".showScore",!1),$("#display-score").hide()),$("#score-toggle").checkboxradio("refresh")}},showTime:{get:function(){return"true"===uniStore.get(this.prefix+".showTime")},set:function(t){t?($("#time-toggle").attr("checked",!0),$("#display-time").show(),uniStore.set(this.prefix+".showTime",!0)):($("#time-toggle").attr("checked",!1),uniStore.set(this.prefix+".showTime",!1),$("#display-time").hide()),$("#time-toggle").checkboxradio("refresh")}},autoplayEnabled:{get:function(){var t=this.prefix+".autoplayEnabled",e=(uniStore.get(t),1==localStorage.getItem("auto-pl")?"true":"false");return"true"===e||null===e},set:function(e){e="true"===e||!0===e,$("#autoplay-but").removeClass("autoplay-off").addClass(e?"":"autoplay-off");var i=this.prefix+".autoplayEnabled";localStorage.setItem("auto-pl",1==e?1:0),uniStore.set(i,e+""),e&&t.curGame&&t.game.autoFill()}},autoplayMode:{get:function(){return"n"===this._autoplayMode?"s":this._autoplayMode},set:function(t){"n"===t&&(t="s"),$("#autoplay-but").removeClass("disabled").addClass("disabled"===t?"disabled":""),"disabled"===t?(this._autoplayMode=t,$("#autoplay-option").find("input[value='n']").attr("checked",!0),$("#autoplay-option").find("input[type='radio']").checkboxradio("disable").checkboxradio("refresh")):"enabled"===t?this.autoplayMode=uniStore.get(this.prefix+".autoplayMode"):(this._autoplayMode=t,uniStore.set(this.prefix+".autoplayMode",t),$("#autoplay-option").find("input[value='"+t+"']").attr("checked",!0),$("#autoplay-option").find("input[type='radio']").checkboxradio("enable").checkboxradio("refresh"))}},background:{get:function(){var e=uniStore.get(this.prefix+".background");return e in t.data.gameBackgrounds||(uniStore.set(this.prefix+".background",t.data.defaultBackground),e=t.data.defaultBackground),e},set:function(t){uniStore.set(this.prefix+".background",t),$("#backgrounds-list>div>.ui-radio-on").removeClass("ui-btn-active").removeClass("ui-radio-on"),$('#backgrounds-list>div>div[data-backgroundname="'+t+'"]').addClass("ui-btn-active").addClass("ui-radio-on")}},cardback:{get:function(){var e=uniStore.get(this.prefix+".cardback");return e in t.data.cardBacks||(uniStore.set(this.prefix+".cardback",t.data.defaultCardback),e=t.data.defaultCardback),e},set:function(t){uniStore.set(this.prefix+".cardback",t),$("#cardbacks-list>div>.ui-radio-on").removeClass("ui-btn-active").removeClass("ui-radio-on"),$('#cardbacks-list>div>div[data-cardbackname="'+t+'"]').addClass("ui-btn-active").addClass("ui-radio-on")}},cardset:{get:function(){var e=uniStore.get(this.prefix+".cardset");return e in t.data.cardSets||(uniStore.set(this.prefix+".cardset",t.data.defaultCardset),e=t.data.defaultCardset),e},set:function(t){uniStore.set(this.prefix+".cardset",t),$("#cardsets-list>div>.ui-radio-on").removeClass("ui-btn-active").removeClass("ui-radio-on"),$('#cardsets-list>div>div[data-cardsetname="'+t+'"]').addClass("ui-btn-active").addClass("ui-radio-on")}},lastGame:{get:function(){return uniStore.get(this.prefix+".lastgame")},set:function(t){uniStore.set(this.prefix+".lastgame",t)}}})}(),function(){"use strict";var i=t.localisation.getL,o=e.timeFormat,n=t.cardData={_time:0,_score:0,_movesCount:0,prefix:"",setName:function(t){this.prefix="solitairen.solitaire."+t,null===uniStore.get(this.prefix+".firstTime")&&this.ini()},keys:[".firstTime",".gamePlayCount",".gameWinCount",".currentStreak",".currentStreakIsWinning",".highScores",".longestLosingStreak",".longestWinningStreak",".lastGame",".lastGame.time",".lastGame",".movesCount"],getAllKeys:function(){var t=this.prefix;return this.keys.map((function(e){return t+e}))}};Object.defineProperties(n,{time:{get:function(){return this._time},set:function(t){this._time=t,$("#display-time>span.display-content").html(o(t))}},movesCount:{get:function(){return this._movesCount},set:function(t){this._movesCount=t,$("#display-moves>span.display-content").html(t)}},gameScore:{get:function(){return this._score},set:function(t){var e,i,o=uniStore.getInt(this.prefix+".gameWinCount")||0;this._score=t,$("#display-score>span.display-content").html(o),i="rideordie/solitaire/images/awards/",(e=o)>=1&&e<=5?($("#awards").attr("src",i+e+".png"),$("#awards").show()):e>=6&&e<=9?($("#awards").attr("src",i+6+".png"),$("#awards").show()):e>=10&&e<=199?($("#awards").attr("src",i+10*Math.floor(e/10)+".png"),$("#awards").show()):e>=200&&e<=9999?($("#awards").attr("src",i+100*Math.floor(e/100)+".png"),$("#awards").show()):e>=1e4&&e<=79999?($("#awards").attr("src",i+1e3*Math.floor(e/1e3)+".png"),$("#awards").show()):e>=8e4&&e<=99999?($("#awards").attr("src",i+1e4*Math.floor(e/1e4)+".png"),$("#awards").show()):e>=1e5&&($("#awards").attr("src",i+1e5+".png"),$("#awards").show())}},gamePlayCount:{get:function(){return uniStore.getInt(this.prefix+".gamePlayCount")||0},set:function(t){uniStore.set(this.prefix+".gamePlayCount",t)}},gameWinCount:{get:function(){return uniStore.getInt(this.prefix+".gameWinCount")||0},set:function(e){uniStore.set(this.prefix+".gameWinCount",e),t.achievements&&t.achievements.updateAchievements()}},currentStreak:{get:function(){return uniStore.getInt(this.prefix+".currentStreak")||0},set:function(t){var e;isNaN(t)&&(t=0),uniStore.set(this.prefix+".currentStreak",t),this.currentStreakIsWinning?t>this.longestWinningStreak&&(this.longestWinningStreak=t):t>this.longestLosingStreak&&(this.longestLosingStreak=t),e=this.currentStreakIsWinning?t>1?" "+i("wins"):" "+i("win"):t>1?" "+i("losses"):" "+i("loss"),$("#display-currentStreak").html(t+e)}},currentStreakIsWinning:{get:function(){return"true"==uniStore.get(this.prefix+".currentStreakIsWinning")},set:function(t){var e;uniStore.set(this.prefix+".currentStreakIsWinning",!!t),e=t?this.currentStreak>1?" "+i("wins"):" "+i("win"):this.currentStreak>1?" "+i("losses"):" "+i("loss"),$("#display-currentStreak").html(this.currentStreak+e)}},longestLosingStreak:{get:function(){return uniStore.getInt(this.prefix+".longestLosingStreak")},set:function(t){isNaN(t)&&(t=0),uniStore.set(this.prefix+".longestLosingStreak",t),$("#display-longestLosingStreak").html(t)}},longestWinningStreak:{get:function(){return uniStore.getInt(this.prefix+".longestWinningStreak")},set:function(t){isNaN(t)&&(t=0),uniStore.set(this.prefix+".longestWinningStreak",t),$("#display-longestWinningStreak").html(t)}},highScores:{get:function(){var t=uniStore.get(this.prefix+".highScores");return t?JSON.parse(t):[]},set:function(e){if(e){for(var i="",n=0;n<10;n++){var a=e[n]||{},s="hiscore-"+(n+1);a.isNew&&(s+=" latest-hiscore");var r=a.date;r&&(r=t.localisation.date(new Date(r))),i+='<tr class="'+s+'"><td>'+[n+1,a.name||"-",a.score||"-",o(a.time),r||"-"].join("</td><td>")+"</td></tr>",delete a.isNew}$("#hiscore-table-body").html(i),uniStore.set(this.prefix+".highScores",JSON.stringify(e))}else uniStore.set(this.prefix+".highScores",JSON.stringify([]))}},playerName:{get:function(){return uniStore.get("solitairen.solitaire.highscore.player.name")||i("player")},set:function(t){(t=t?$.trim(t):t)?($("#player-name").val(t),uniStore.set("solitairen.solitaire.highscore.player.name",t)):$("#player-name").val(i("player"))}},isFirstHighscore:{get:function(){return null===uniStore.get("solitairen.solitaire.highscore.player.name")}}}),n.load=function(){if(!uniStore.get(this.prefix+".lastGame"))return this.playerName="",this.gamePlayCount=this.gamePlayCount,this.gameWinCount=this.gameWinCount,this.currentStreak=this.currentStreak,this.currentStreakIsWinning=this.currentStreakIsWinning,this.longestLosingStreak=this.longestLosingStreak,this.longestWinningStreak=this.longestWinningStreak,this.highScores=this.highScores,!1;try{return this.time=uniStore.getInt(this.prefix+".lastGame.time"),this.lastGame=JSON.parse(uniStore.get(this.prefix+".lastGame")),this.gamePlayCount=this.gamePlayCount,this.gameWinCount=this.gameWinCount,this.playerName="",this.gameScore=0,this.movesCount=uniStore.getInt(this.prefix+".movesCount"),this.currentStreak=this.currentStreak,this.currentStreakIsWinning=this.currentStreakIsWinning,this.longestLosingStreak=this.longestLosingStreak,this.longestWinningStreak=this.longestWinningStreak,this.highScores=this.highScores,!0}catch(t){return console&&console.log(t),this.clearInfo(),!1}},n.reset=function(){uniStore.set(this.prefix+".lastGame",""),this.time=0,this.movesCount=0,this.gameScore=0},n.clearInfo=function(){this.gamePlayCount=t.game.playing()?1:0,this.gameWinCount=0,this.currentStreak=0,this.currentStreakIsWinning=!1,this.longestLosingStreak=0,this.longestWinningStreak=0,this.highScores=[],t.freecellOfTheWeek&&t.freecellOfTheWeek.clearStats()},n.ini=function(){this.clearInfo(),this.gamePlayCount=0,uniStore.set(this.prefix+".firstTime","false")},n.winUpdate=function(){uniStore.set(this.prefix+".lastGame",""),this.gameWinCount++,this.currentStreakIsWinning?this.currentStreak++:(this.currentStreakIsWinning=!0,this.currentStreak=1)},n.addHighScore=function(){},n.save=function(){uniStore.set(this.prefix+".lastGame",JSON.stringify(this.lastGame)),uniStore.set(this.prefix+".lastGame.time",this.time),uniStore.set(this.prefix+".movesCount",this.movesCount)},$(window).on("language:change",(function(){n.prefix&&(n.highScores=n.highScores),n.currentStreak=n.currentStreak}))}(),t.data={defaultCardset:null==localStorage.getItem("faceCard")?navigator.userAgent.toLowerCase().match(/iphone/)||navigator.userAgent.toLowerCase().match(/android/)&&navigator.userAgent.toLowerCase().match(/mobile/)||navigator.userAgent.toLowerCase().match(/windows/)&&navigator.userAgent.toLowerCase().match(/phone/)?"Kittens":"modern":localStorage.getItem("faceCard"),projectType:"xxx",defaultBackground:"green_felt",cardSets:{modern:"Modern"},gamesList:{klondike:{1:"Klondike",fortythieves:"Forty Thieves",3:"Klondike by Threes",easthaven:"Easthaven",diplomat:"Diplomat",yukon:"Yukon"},golf:{golfeasy:"Golf Easy"},freecell:{freecell:"FreeCell",eightoff:"Eight Off",bakersgame:"Baker's Game",twodecks:"FreeCell Two Decks"},spider:{scorpion:"Scorpion",simplesimon:"Simple Simon",1:"Spider One Suit",2:"Spider Two Suits",4:"Spider Four Suits"},pyramid:{0:"Pyramid Easy"},flowergarden:{flowergarden:"Flower Garden"}},defaultGame:global_game_name,removeAdsButtonDisplay:"false",backgroundColor:"#50A67A",cardBacks:{rhombus_blue:"Rhombus Blue"},defaultCardback:null==localStorage.getItem("backCardNew")?"rhombus_blue":localStorage.getItem("backCardNew"),responsiveAds:"true",gameBackgrounds:{green_felt:"Green Felt"}},t.data.backgroundColor,t.ExtendedSplash=null,function(){"use strict";var e=window.webkitAudioContext||window.mozAudioContext||window.MSAudioContext;if(e){var i=t.webAudio={},o=new e;i.unmuteIOS=function(){i.loadBuffer(i.getPath("card_drop"),(function(t){t.gain=0;var e=o.createBufferSource();e.buffer=t,e.connect(o.destination),e.noteOn(0)}))},i.loadBuffer=function(t,e){var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=function(){o.decodeAudioData(i.response,(function(t){e(t)}))},i.send()};var n=i.Sound=function(t){this.on=!1,this.loaded=!1,this.filename=t,this.source=null,i.loadBuffer(i.getPath(t),function(t){this.loaded=!0,this.buffer=t,i.soundReadyHandler&&i.soundReadyHandler()}.bind(this))};n.prototype.stop=function(){this.on&&this.loaded&&(this.source.noteOff?this.source.noteOff(0):this.source.stop&&this.source.stop(0))},n.prototype.play=function(){if(this.on&&this.loaded){var t=o.createBufferSource();t.buffer=this.buffer,t.connect(o.destination),this.source=t,this.source.noteOn?this.source.noteOn(0):this.source.start&&this.source.start(0)}}}else t.webAudio=null}(),function(){"use strict";var e=t.config,i=$.browser.msie?1:7,o=null,n=!1,a=t.createCounter();if(a.promise().progress((function(){n=!0})),t.webAudio)o=function(e){return a.increment(),new t.webAudio.Sound(e)},t.webAudio.soundReadyHandler=a.decrement,$.browser.opera,t.webAudio.getPath=function(t){return"rideordie/solitaire/sounds/mp3/"+t+".mp3"};else if(e.isApp&&e.isiOS)(o=function(t){this.on=!1,this.filename=t;var e=this;document.addEventListener("deviceready",(function(){LowLatencyAudio.preloadFX(e.filename,"rideordie/solitaire/sounds/aac/"+e.filename+".m4a",(function(){e.on=!0}))}),!1)}).prototype.stop=function(){this.on&&LowLatencyAudio.stop(this.filename)},o.prototype.play=function(){this.on&&LowLatencyAudio.play(this.filename)};else if(!e.isiOS){var s=!0;try{new Audio}catch(e){s=!1}s&&((o=function(t,e){e=e||i,this.on=!0,this.filename=t,this.doms=[];for(var o=0;o<e;o++){var n=new Audio;n.preload="auto",this.doms.push(n),a.increment(),$(n).on("canplay",(function(){a.decrement(),this.pause(),this.volume=1}));var s=document.createElement("source");s.src="rideordie/solitaire/sounds/mp3/"+t+".mp3",s.type="audio/mpeg",n.appendChild(s),(s=document.createElement("source")).src="rideordie/solitaire/sounds/mp3/"+t+".mp3",s.type="audio/mp3",s.fetchpriority="low",n.appendChild(s),n.volume=0,n.load()}this.hasPlayed=this.doms.map((function(){return!1}))}).prototype.stop=function(){this.doms.forEach((function(t){t.pause(),t.currentTime=0}))},o.prototype.play=function(){if(this.on){var t=this.doms.reduce((function(t,e){return t.currentTime?e.currentTime&&t.currentTime>e.currentTime?t:e:t})),e=this.doms.indexOf(t);this.hasPlayed[e]?(t.pause(),t.currentTime&&(t.currentTime=0),t.play()):(t.play(),this.hasPlayed[e]=!0)}})}o||((o=function(){}).prototype.stop=function(){},o.prototype.play=function(){});var r=t.audio={on:!1};r.loadSounds=function(t){for(var e in this.dict=t,t)t[e]instanceof Array?this[e]=new o(t[e][0],t[e][1]):this[e]=new o(t[e])},r.loadSounds({drop:["card_drop",1],redeal:["redeal",1],autoplay:["autoplay",1],undo:["undo",1],redo:["redo",1],gamewon:["game_won",1]}),r.toggle=function(t){for(var e in this.on=t,this.dict)this[e].on=t},r.getPromise=function(){return a.promise()},setTimeout((function(){n||a.resolve()}),5e3)}(),function(){"use strict";function e(e){return function(){n.isApp&&t.ui.gameAlert("Error","Resource file not found: "+e+"<br />Please reinstall the App."),console&&console.log(e+" fail to download")}}function i(){var i,o,n=[],a=5e3;if(l&&!r["theme-"+u]){for(a=35e3,i=1;i<14;i++)for(o=0;o<4;o++)n.push("rideordie/solitaire/images/cards/"+u+"/146x198/"+i+"_"+p[o]+".webp");["foundation","redeal","reserve","stop","tableau"].forEach((function(t){n.push("rideordie/solitaire/images/spots/146x198/"+t+"_spot.webp")}))}d&&!r["back-"+c]&&n.push("rideordie/solitaire/images/backs/146x198/"+c+".webp"),f&&!r["background-"+h]&&n.push("rideordie/solitaire/images/backgrounds/1920x1200/"+h+".webp");var s,m=t.createCounter(n.length),v=$("#game-ui");return n.length?t.config.isApp:m.resolve(),g||(s=setTimeout((function(){}),a)),g=!1,m.promise().then((function(){clearTimeout(s),r["theme-"+u]=!0,r["back-"+c]=!0,r["background-"+h]=!0})),n.forEach((function(t){var i=document.createElement("img");i.onerror=e(t),i.src=t,i.onload=function(){m.decrement()},i.style.display="none",v.append(i)})),m}var o=t.resources={},n=t.config,a=[],s=[],r={},c="",u="",h="",d=!1,l=!1,f=!1,p=["s","h","c","d"],g=!0,m=function(t,e){return"rideordie/solitaire/images/cards/"+u+"/146x198/"+e+"_"+p[t]+".webp"};o.clear=function(){a=[],s=[]},o.changeCardImagesToSuits=function(t){var e=13*t;a.forEach((function(t,i){t.raw[0]=Math.floor(i%e/13),t.img.src=m(t.raw[0],t.raw[1])}))},o.getCardImage=function(t,e){var i=document.createElement("img");return i.src=m(t,e),a.push({raw:[t,e],img:i}),i},o.getCardBackImage=function(){var t=document.createElement("img");return t.alt="solitaire-back",t.src="rideordie/solitaire/images/backs/146x198/"+c+".webp",s.push(t),t},o.getTableauImage=function(){var t=document.createElement("img");return t.alt="solitaire-tableau-spot",t.src="rideordie/solitaire/images/spots/146x198/tableau_spot.webp",t},o.getFoundationImage=function(t){var e=document.createElement("img");return e.alt="solitaire-foundation-spot",e.src="rideordie/solitaire/images/spots/146x198/foundation_spot_solitaire"+t+".webp",e},o.getReserveImage=function(){var t=document.createElement("img");return t.alt="solitaire-reserve-spot",t.src="rideordie/solitaire/images/spots/146x198/reserve_spot.webp",t},o.getStopSpotImage=function(){var t=document.createElement("img");return t.alt="solitaire-stop-spot",t.src="rideordie/solitaire/images/spots/146x198/stop_spot.webp",t},o.getRedealImage=function(){var t=document.createElement("img");return t.alt="solitaire-redeal-spot",t.src="rideordie/solitaire/images/spots/146x198/redeal_spot.webp",t},o.setCardset=function(t){t!=u&&(u=t,l=!0)},o.setCardback=function(t){t!=c&&(c=t,d=!0)},o.setBackground=function(t){t!=h&&(h=t,f=!0)},o.updateImages=function(e){if(l&&(a.forEach((function(t){t.img.src="rideordie/solitaire/images/cards/"+u+"/146x198/"+t.raw[1]+"_"+p[t.raw[0]]+".webp"})),l=!1),d&&(s.forEach((function(t){t.src="rideordie/solitaire/images/backs/146x198/"+c+".webp"})),d=!1),f){var i="100% 100%";t.data.backgroundSize&&t.data.backgroundSize[h]&&(i=t.data.backgroundSize[h]),$("#game-ui").css({"background-image":"url(rideordie/solitaire/images/backgrounds/1920x1200/"+h+".webp)","background-size":i}),f=!1}},o.download=function(t){var e=i();return t instanceof Function&&e.promise().done(t),e.promise()};var v=t.createCounter();o.getExtraImage=function(t){var e=document.createElement("img");return v.increment(),e.onload=e.onerror=function(){v.decrement()},e.src=t,e},o.doneExtraImages=function(){return 0===v.total()&&v.resolve(),v.promise()}}(),function(){"use strict";function i(){if(navigator.serviceWorker&&!a.isApp){var e=[],i=t.ui.gamesUI;for(var o in t.localisation.getCurrentLang(),i)for(var n in i[o].variation){var s=i[o].variation[n];e.push(s.normalizedName)}e.forEach((function(t){}))}}function o(t,e){if(this.name=t,this.variation={},e){for(var i in e)this.variation[i]={},this.variation[i].displayName=e[i],this.variation[i].ssPath=this.pathPrefix+this.variation[i].displayName.toLowerCase().replace(/ /gi,"_").replace(/'/gi,"")+this.pathSuffix,this.variation[i].normalizedName=this.variation[i].displayName.toLowerCase().replace(/ /gi,"_").replace(/'/gi,"");e[""]&&(this.variation[""]={displayName:e[""],normalizedName:e[""].toLowerCase().replace(/ /gi,"_").replace(/'/gi,"")},this.variation[""].ssPath=this.pathPrefix+this.variation[""].displayName.toLowerCase().replace(/ /gi,"_").replace(/'/gi,"")+this.pathSuffix)}else this.variation[""]={displayName:this.name.capitalize(),ssPath:this.pathPrefix+this.name.toLowerCase()+this.pathSuffix,normalizedName:this.name.toLowerCase().replace(/ /gi,"_").replace(/'/gi,"")}}var n=t.ui={},a=t.config,s=t.data,r=(t.resources,n.gamesUI={});t.localisation.getL,n.modal={show:function(){},hide:function(){},clickOnce:function(t){},click:function(){}},n.loading={show:function(){},hide:function(){}},n.updateWithGame=function(e,i){t.game.normalizedName,$("#gameName,.gameName").html(t.game.name).attr("data-lang-ref","game-"+t.game.normalizedName);var o=$("#autoplay-but");1==localStorage.getItem("auto-pl")?o.removeClass("autoplay-off"):o.addClass("autoplay-off")},n.raphPie=function(t,e){},o.prototype.pathPrefix="rideordie/solitaire/images/solitaire_preview/",o.prototype.pathSuffix=".jpg",o.prototype.pathPrefix+="large/",a.isApp&&a.isRetina&&(o.prototype.pathSuffix="@2x.jpg"),o.prototype.bindEvent=function(){this.doms.forEach(function(e){$(e[1]).on("click",function(e,i){return t.config.isApp||"true"!=t.data.multiPages?function(){n.backToGame(),t.startGame(e,i)}:function(){n.backToGame(),window.location=t.ui.gamesUI[e].variation[i].normalizedName+".html"}}(this.name,e[2]))}.bind(this))},o.prototype.createElements=function(){var e=this.doms=[];for(var i in this.variation){var o=document.createElement("span");o.className="game",a.isMobilePhone&&(o.className+=" onphone");var n="game-"+this.variation[i].normalizedName,s=t.localisation.getL(n),r=document.createElement("span");r.innerHTML=s,r.setAttribute("data-lang-ref",n),$(o).append(r),e.push([this.variation[i].displayName,o,i])}return this.bindEvent(),e},n.loadGames=function(t){var e=[];for(var n in s.gamesList){var a=new o(n,s.gamesList[n]);r[n]=a;for(var c=a.createElements(),u=0;u<c.length;u++)e.push(c[u])}e.sort((function(t,e){return t[0].localeCompare(e[0])}));var h=document.createDocumentFragment();e.forEach((function(t){h.appendChild(t[1])})),t.append(h),e.length,i(),$(window).on("language:change",i)},n.loadAppearanceOptions=function(t){},n.showGameSelector=function(){},n.showNewGameDialog=function(){n.showPopup("new-game-dialog")},n._showHighScoreInput=function(){},n._showHighScoresList=function(){},n._showUnlockedAchievementPopup=function(){},n._showWinPopup=function(){},n.gameAlert=function(t,e,i){},n.backToGame=function(){},a.isMobilePhone&&(n.showPopup=function(t){$("html").addClass("with-phone-popup"),$.mobile.changePage("#"+t)},$(document).on("pagechange",(function(e,i){"game-ui"===i.toPage[0].id&&($("html").removeClass("with-phone-popup"),t.game.updateDisplay())}))),n.jqmLoader=null,n.showRules=function(){},n.createBookmarkButton=function(){},$(document).on("popupbeforeposition",(function(t){})),a.isDebugging&&a.isApp&&(window.onerror=function(t,e,i){return alert("Error Found !!!\n--------------\nError in file: "+e+"\nline number:"+i+"\nMessage:"+t),!0},setTimeout((function(){alert("This is the debugging version!")}),5e3));var c=e.prefix.toLowerCase()+"Hidden";document.addEventListener(e.prefix.toLowerCase()+"visibilitychange",(function(){document[c]?t.game.timer.pause():t.game.timer.start()}),!1)}(),function(){"use strict";var e=navigator.userAgent,i=t.display={};i.cardSep=0,i.cwidth=0,i.cheight=0,i.cardStaticShadow="",i.highlightShadow="",i.hoverShadow="",i.cardStaticShadow="",i.borderRadius=0,i.playAreaHeight=0,i.playAreaWidth=0,i.originalCardWidth=146,i.originalCardHeight=198,i.scaling=1.2,i.dragShadow="10px 10px 10px rgba(0,0,0,0.6)",i.useScale=[/Chrome\/6[23456789]/i].filter((function(t){return t.test(e)})).length>0,i.useScale,i.adjust=function(t){i.cwidth=t.cwidth,i.cheight=t.cheight,i.scale=t.cwidth/146,i.cardSep=t.cheight/4|0,i.playAreaHeight=t.height,i.playAreaWidth=t.width,i.cardStaticShadow="1px "+Math.floor(3/198*i.cheight)+"px 6px "+Math.floor(2/198*i.cheight)+"px rgba(60, 60, 60, 0.5)",i.highlightShadow="0 0 "+Math.floor(7/198*i.cheight)+"px "+Math.floor(9/198*i.cheight)+"px #83e3f7",i.hoverShadow="0 0 "+Math.floor(7/198*i.cheight)+"px "+Math.floor(7/198*i.cheight)+"px #f8f465",i.cardStaticShadow="0 0 "+Math.floor(9/198*i.cheight)+"px rgba(80, 80, 80, 0.5)",i.borderRadius=Math.floor(10*i.cheight/198)}}(),function(){"use strict";function e(t,e){return t+~~(Math.random()*(e-t+1))}var i=t.winAnimations={},o=t.display,n={},a=null,s=null,r=function(){},c=0;n.throwOut=function(){var i=t.display.cwidth/2,n=t.display.cheight/2,s=$("#playArea"),u=s.width(),h=parseInt(s.css("left"),10),d=(parseInt(s.css("top"),10),-h),l=u+h;"windows"===t.config.isApp&&(d=0,l=u);var f=[{x:-i,y:n},{x:-i,y:-n},{x:i,y:-n},{x:i,y:n}];!function t(n){if(!a)return r();if(n===a.length)setTimeout((function(){t(n+1)}),500);else if(n===a.length+1)r();else{for(;a[n].cards.length>0;){for(var s=Math.random()*(4*Math.PI),u={rotate:s+"rad",x:e(d,l),y:e(0,o.playAreaHeight-o.cheight)},h=u.x+i,p=0,g=0;g<4;g++){var m=f[g],v=h+(m.x*Math.cos(s)-m.y*Math.sin(s)),y=0;v<d?y=d-v:v>l&&(y=l-v),Math.abs(y)>Math.abs(p)&&(p=y)}u.x+=p,$(a[n].lastCard().dom).stop().css("zIndex",10+n).transition(u,1e3,"easeOutCirc"),a[n].popCard()}c=setTimeout((function(){t(n+1)}),700)}}(0)},n.randomShow=function(){var e=$("#game-ui").width(),i=parseInt($("#playArea").css("left"),10),n=2e3/s.length;$(".card").css("opacity",0),"windows"===t.config.isApp&&(e-=i,i=0);for(var a=[],u=[],h=0;h<s.length;h++)u.push(h);for(h=0;h<s.length;h++){var d=Math.floor(Math.random()*u.length);a.push(u[d]),u[d]=u[u.length-1],u.pop()}!function t(u){u===a.length?r():(s[a[u]].jdom.css({x:Math.random()*(e-o.cwidth)-i>>0,y:Math.random()*(o.playAreaHeight-o.cheight)>>0,zIndex:100+u}).transition({opacity:1}),c=setTimeout((function(){t(u+1)}),n))}(0)},i.start=function(e,i,o){r=o,a=e,s=i,"pyramid"==t.data.projectType?n.randomShow():n.throwOut()},i.stop=function(){clearTimeout(c),s.forEach((function(t){t.jdom.stop()})),s=null,a=null}}(),function(){"use strict";t.containers.ReservePile=t.containers.ReservePile||function(){};var i,o=t.game={},n=t.config,a=t.display,s=t.ui,r=t.audio,c=t.cardData,u=$(window),h=null,d=null,l=null,f=null,p=null,g=0,m=0,v=function(){var t=0;return{INIT:t++,WAITING:t++,DRAGSTART:t++,MOVING:t++,POSTMOVE:t++,AUTOFILLING:t++,END:t++}}(),y=o.timer={_timer:0,start:function(t){clearInterval(this._timer),void 0!==t&&(c.time=t),this._timer=setInterval((function(){y._increTimer()}),1e3)},pause:function(){clearInterval(this._timer)},_increTimer:function(){c.time++}};o.state=v.INIT,o.loadPromise=$.Deferred(),o.nextGameNumber=0,o.moveWithAnimate=n.moveWithAnimate,o.setGameDom=function(t){(p=t).click((function(){o.hideHint()}))},o.onMoveOccurred=null;var w=0,S=0;o.scheduleUpdateDisplay=function(t){clearTimeout(S),S=setTimeout(o.updateDisplay,t)},o.marginsForDevices=0,o.updateDisplay=function(){if(h){function u(){var t=navigator.userAgent.toLowerCase();return t.match(/iphone/)?"iPhone":t.match(/android/)&&t.match(/mobile/)?"android":t.match(/windows/)&&t.match(/phone/)?"windows":null}var i=localStorage.getItem("screen-size");null!=i&&null!=i||localStorage.setItem("screen-size",100),i=parseInt(localStorage.getItem("screen-size"));var s=p.width(),r=p.height();if(g="windows"===n.isApp?15:0,o.marginsForDevices=0,window.innerHeight<window.innerWidth&&((t.config.isMobilePhone||t.config.isTablet)&&(h.rows>5?(o.marginsForDevices=0,t.config.totalL=4,t.config.cL=3):h.columns>=10?(o.marginsForDevices=parseInt(.05*s),t.config.totalL=8,t.config.cL=7):h.columns>=8?(o.marginsForDevices=parseInt(.09*s),t.config.totalL=4,t.config.cL=3):(o.marginsForDevices=parseInt(.1*s),t.config.totalL=4,t.config.cL=3),t.config.isTablet&&(o.marginsForDevices=parseInt(o.marginsForDevices/2))),"windows"==t.config.isApp&&e.isUWP()&&!t.config.isMobilePhone)){var c=Windows.Graphics.Display.DisplayInformation.getForCurrentView();c.rawPixelsPerViewPixel>1&&(g=Math.floor(g*c.rawPixelsPerViewPixel),h.columns,o.marginsForDevices=0,t.config.totalL=4,t.config.cL=3)}s-=2*o.marginsForDevices,r-=g,t.display.adjust(h.adjustLayout(s,r)),a.useScale?d.css({scaleX:a.scale,scaleY:a.scale,marginLeft:(a.originalCardWidth-a.cwidth)/-2,marginTop:(a.originalCardHeight-a.cheight)/-2}):d.css({height:a.cheight*(u()?1:1.2),width:a.cwidth*(u()?1:1.2),"border-radius":a.borderRadius}),h.containers.forEach((function(t){t.adjustPos()})),J&&J.h.transition({position:"absolute",height:J.end.pos.y-J.start.pos.y+a.cheight,width:a.cwidth,top:0,left:0,x:J.start.pos.x,y:J.start.pos.y,zIndex:J.start.pos.z-1,borderRadius:a.borderRadius},J.start.time)}},o.empty=function(){h&&(o.save(),o.hints.length=0,o.hideHint(),h.clear())},o.setCurrentGame=function(t){this._cur=h=t,d=$(t.frag.childNodes),t.cards.forEach((function(t){t.animating=!0})),i=t.containers.map((function(){return!1})),a.useScale||(d=d.add(d.find(".cardFront, .cardBack"))),p.append(t.frag),o.updateDisplay()},o.play=function(){c.load()?c.lastGame.isReset?o.start(!0):o.load():(o.state=v.END,o.start())},o.start=function(t){if(h){u.trigger("game:start");var e=o.state!==v.END;o.hints.length=0,o.init(),o.hideHint(),o.state=v.INIT,y.start(0),y.pause(),c.reset(),t||(e&&(c.currentStreakIsWinning?(c.currentStreakIsWinning=!1,c.currentStreak=1):c.currentStreak++),c.gamePlayCount++),o.moveWithAnimate=!1,h.init((function(){o.state=v.POSTMOVE,o.computeHints(),at(700),et.length=0,it.length=0,y.start(),o.moveWithAnimate=n.moveWithAnimate}))}},o.init=function(){$(".card").stop().css({opacity:"",rotate:"0deg"}),clearTimeout(m),st(),this.type,this.variation},o.save=function(){h&&o.state!==v.END&&o.state!==v.INIT&&(c.lastGame={undoStack:et,redoStack:it,game:h.gameState()},c.save())},o.load=function(){u.trigger("game:resume"),o.hints.length=0,o.hideHint(),o.init(),o.state=v.INIT,y.start(),y.pause();var t=c.lastGame;et.length=0,t.undoStack&&t.undoStack.forEach((function(t){et.push(t)})),it.length=0,t.redoStack&&t.redoStack.forEach((function(t){it.push(t)})),h.loadGameState(t.game,(function(){o.state=v.POSTMOVE,at(700),y.start()}))};var b,C=0,k=[],x=[],T=0,A=0,I=0,M=0,E=!1,P=!1;o.initialiseDrag=function(t,e,i){if(!P&&t.ownedBy&&(P=!0,clearTimeout(b),b=setTimeout((function(){P=!1}),200),o.state===v.WAITING&&!t.moving&&!t.flipping)){st(),o.hideHint(!0),E=!!i,o.state=v.DRAGSTART,C=0,k=[],x=[];for(var n=t.ind;n<t.ownedBy.cards.length&&!(k.length>=t.ownedBy.maxCardsToMove());n++){var a=t.ownedBy.cards[n];k.push(a),x.push(a.dom)}T=e.x,A=e.y,I=0|t.domPos.x,M=0|t.domPos.y,(x=$(x)).removeTransition()}};var O=function(t){var e,i;if(t.preventDefault(),t.originalEvent.changedTouches){var n=t.originalEvent.changedTouches[0];e=n.clientX,i=n.clientY}else e=t.originalEvent.clientX,i=t.originalEvent.clientY;o.state===v.MOVING?l(e,i):o.state===v.DRAGSTART&&h.movable(k[0])&&(k.forEach((function(t){t.moving=!0})),U())},L=null,_=0,G=0,N=function(t,e){x.css({x:I+t-T,y:function(t){return M+e-A+t*a.cardSep}})},H=function(){var e=k[0].hasShadow?a.cardStaticShadow:"";k[0].ownedBy instanceof t.containers.ReservePile&&k[0].ownedBy.cards.forEach((function(t,e){e<=k[0].ind||(t.dom.style.zIndex=400+e)})),x.find(".cardFront").stop().transition({scaleX:1,scaleY:1,"box-shadow":e},k[0].time)},W=e.prefix+"Transition",D=e.prefix+"Transform",j="-"+e.prefix.charAt(0).toLowerCase()+e.prefix.substr(1)+"-transform ",B=0,F=function(){C=0,L.transition({x:0,y:0,rotate:0},500,"easeInCubic")},z=function(t,e){var i=I+t-T,o=M+e-A;if(i!==_||o!==G){clearTimeout(B);var n,s,r=i-_;r<0?(r>C&&(r=C),C=r,n=450/(10-r)-45,s=-2):(r<C&&(r=C),C=r,n=-450/(10+r)+45,s=2),_=i,G=o,L.each((function(t){this.style[W]=j+100+"ms ease",this.style.transform=this.style[D]="translate3d(0, -"+a.cardSep*t+"px, 0)rotate("+(n+s*t)+"deg) translate3d(0, "+a.cardSep*t+"px, 0) scale(1.2)"})),x.css({x:i,y:function(t){return a.cardSep*t+o}}),B=setTimeout(F,200)}},R=function(t,e){if(o.state===v.MOVING){clearTimeout(B);var i=k[0].hasShadow?a.cardStaticShadow:"";L.each((function(t){this.style[W]=j+k[0].time+"ms ease",this.style[D]="",this.style.transform="",this.style.boxShadow=i}))}};l=z,f=R,o.setMovingSwinging=function(t){t?(l=z,f=R):(l=N,f=H)},o.setCardEffect=function(t){t?(delete $.cssHooks.boxShadow,delete $.cssHooks.ieBoxShadow,a.scaling=1.2,h&&h.cards.forEach((function(t){t.setShadow(t.hasShadow),t.setHoverEffect(!0)})),$(".bottomButton").css("box-shadow","")):($(".bottomButton").css("box-shadow","none"),$(".cardBack, .cardFront").css("boxShadow","none"),h&&h.cards.forEach((function(t){t.setHoverEffect(!1)})),$.cssHooks.boxShadow={get:function(){return null},set:function(){}},$.cssHooks.ieBoxShadow={get:function(t){return t.style.boxShadow},set:function(t,e){t.style.boxShadow=e}},a.scaling=1)};var U=function(){x.stop().each((function(t){this.style.zIndex=200+t,this.style.boxShadow="none",this.style.webkitTransition="",this.style.MSTransition=""})).find(".cardFront").transition({scaleX:a.scaling,scaleY:a.scaling,"box-shadow":t.display.dragShadow},100,"linear"),L=x.find(".cardFront"),_=parseInt(x.css("x"),10),o.state=v.MOVING},q=function(t,e){var i,o,n;return t.left<e.left?(i=t,o=e):(i=e,o=t),i.right<o.left?0:(n=i.right>o.right?o.right-o.left:i.right-o.left,t.top<e.top?(i=t,o=e):(i=e,o=t),i.bottom<o.top?0:(i.bottom>o.bottom?n*=o.bottom-o.top:n*=i.bottom-o.top,n))},Y=function(e,i){var s,c;if((o.state===v.DRAGSTART||o.state===v.MOVING)&&function(t,e){return Math.max(Math.abs(t-T),Math.abs(e-A))<=a.cheight/5}(e,i)){if(s=h.cardClicked(k[0]))return f(),o.state=v.WAITING,m=setTimeout((function(){r.drop.play()}),s),void at(s);if(o.requestAutomove(k[0],!0))return f(),void(o.state=v.WAITING)}if(o.state===v.DRAGSTART)o.state=v.WAITING;else if(o.state===v.MOVING){if(B&&clearTimeout(B),f(),o.state=v.WAITING,!(E&&Math.max(Math.abs(e-T),Math.abs(A-i))<=a.cheight/5&&o.requestAutomove(k[0]))){var u=0,d=-1,l={left:parseInt($(k[0].dom).css("x"),10),top:parseInt($(k[0].dom).css("y"),10)};for(l.right=l.left+a.cwidth*a.scaling,l.bottom=l.top+a.cheight*a.scaling,c=0;c<h.containers.length;c++){var p=q(h.containers[c].toRect(),l);p>u&&h.testAccept(k,h.containers[c])&&(u=p,d=c)}if(clearTimeout(B),-1===d){for(t.containers.Card.speed=n.revertSpeed,k[0].adjustPos(),c=1;c<k.length;c++)k[c].adjustPos(k[0].time+70*c);k[0].ownedBy.adjustZ(k[0].time+70*k.length-70),m=setTimeout((function(){r.drop.play()}),k[0].time),t.containers.Card.speed=n.animationSpeed}else{var g=h.getMoveWhenDrop(k,h.containers[d]),y={};for(c=0;c<g.length;c++)c>0&&(y.chain=!0),o.performMove(g[c].cards,g[c].des,void 0,y,!0);s=K(),o.state=v.WAITING,m=setTimeout((function(){r.drop.play()}),s),at(s)}}k=[],L=null}};$(document).on("mousemove",O).on(n.event_touchmove,O).on("mouseup",(function(t){Y(t.clientX,t.clientY)})).on(n.event_touchend,(function(t){var e=t.originalEvent;e.changedTouches?Y(e.changedTouches[0].clientX,e.changedTouches[0].clientY):Y(e.clientX,e.clientY)})).on(n.event_touchmove,".phone-popup, .ui-popup-container",(function(t){t.stopPropagation()}));var X=function(e,i,n,a){var s=e[0].ownedBy,r={from:h.containers.indexOf(s),to:h.containers.indexOf(i),cards:e.map((function(t){return t.objid})),chain:a.chain,isTakeOver:a.isTakeOver,oldInd:e[0].ind};a.flipLast&&i.lastCard().flip(!0),a.flipLastFrom&&s.lastCard().flip(!0),a.flipCards&&(e.forEach((function(t){t.flip(!t.flipped)})),r.flipCards=!0),a.reversed&&(e=e.reverse(),r.reversed=!0,r.cards=e.map((function(t){return t.objid})));for(var u=e.length,d=0;d<u;d++)s.removeCard?s.removeCard(e[d]):s.popCard();s.cards.forEach((function(t,e){t.ind=e})),e.forEach((function(t){t.jdom.trigger("mouseout")})),s.popNeedUpdate&&V(s),i.takeIn(e),V(i,a.adjustPosOption);var l=s.lastCard();l&&s.shouldFlipLast()&&l.flipped&&(l.flip(!1),s.flipUpdate(),r.flipLast=!0),(l=i.lastCard())&&i.shouldFlipLast()&&l.flipped&&(l.flip(!1),i.flipUpdate(),r.flipLastFrom=!0),1===n?(it.push(r),c.movesCount+=1):2===n?et.push(r):(et.push(r),it.length=0,c.movesCount+=1),s instanceof t.containers.Tableau&&s.adjustPos();var f=h.moveOccurred(s,i,e.length);clearTimeout(w),o.onMoveOccurred&&(w=setTimeout((function(){o.onMoveOccurred()}),700)),n||f.forEach((function(t){o.performMove(t.cards,t.des,void 0,{chain:!0})}))},V=function(t,e){e||(e={}),i[h.containers.indexOf(t)]=e},K=function(){for(var t=0,e=0;e<i.length;e++)i[e]&&(i[e].delay?(setTimeout(function(t,e){return function(){h.containers[t].adjustPos(e)}}(e,i[e].time),i[e].delay),t=Math.max(i[e].delay+i[e].time,t)):t=Math.max(h.containers[e].adjustPos(i[e].time),t),i[e]=null);return t};o.performMove=function(e,i,a,s,r){o.hideHint(),s||(s={});var c=s.moveTime||200;return i instanceof Array?(o.moveWithAnimate=!1,i.forEach((function(i,o){o>0&&(s.chain=!0),t.gameSettings.useCSS3?s.adjustPosOption={time:c}:s.adjustPosOption={delay:50*o,time:c},X(e[o],i,a,s)})),o.moveWithAnimate=n.moveWithAnimate):X(e,i,a,s),Q=!0,o.computeHints(),r?0:K()},o.requestTakeOver=function(t,e,i){if(o.state!==v.WAITING)return!1;e.cards[0];var n=o.performMove(e.cards.slice(0),t,void 0,{flipCards:i,reversed:!0,isTakeOver:!0});return r.redeal.play(),at(n),!0};var J=null;o.requestLongHint=function(t,e){var i=$(document.createElement("div")).addClass("long-highlight").css({position:"absolute",height:e.pos.y-t.pos.y+a.cheight,width:a.cwidth,top:0,left:0,x:t.pos.x,y:t.pos.y,zIndex:t.pos.z-1,borderRadius:a.borderRadius}).transition({boxShadow:a.highlightShadow,ieBoxShadow:a.highlightShadow},200);i[0].ondragstart=function(){return!1},p.append(i);for(var o=t.ind;o<=e.ind;o++)t.ownedBy.cards[o].inHint=i[0],t.ownedBy.cards[o].jdom.trigger("mouseout");J={start:t,end:e,h:i}},o.removeLongHint=function(t,e){for(var i=J.start.ind;i<=J.end.ind;i++)J.start.ownedBy.cards[i].inHint=null;J.h.remove(),J=null},o.hints=[],o.curHint=null,o.hintInd=0;var Q=!0,Z=!1,tt=null;o.hideHint=function(t){tt=t?o.curHint:null,o.curHint&&(o.curHint.from&&o.curHint.from.setHighlight(!1),o.curHint.to&&o.curHint.to.setHighlight(!1),o.curHint=null)},o.showHint=function(){if((o.state===v.WAITING||o.state===v.POSTMOVE)&&!Q){if(0===o.hints.length){var t=h.getSpecialHint();t&&(o.hideHint(),o.curHint=t,o.hintInd=-1)}else{var e=o.hints.indexOf(o.curHint)+1||o.hintInd+1;o.curHint||(e=0),e%=o.hints.length,o.hintInd=e,o.hideHint(),o.curHint=o.hints[e]}o.curHint&&(o.curHint.from&&o.curHint.from.setHighlight(!0,o.curHint.length),o.curHint.to&&o.curHint.to.setHighlight(!0))}},o.computeHints=function(){Z||(this.hints.length=0,h.computeHints(this.hints),Q=!1)};var et=[],it=[],ot=function(t,e){t.isTakeOver&&(h.undoTakeOver(h.containers[t.from],h.containers[t.to]),t.cards||(t.cards=h.stocks[0].cards.map((function(t){return t.objid})))),o.performMove(t.cards.map((function(e){var i=h.cards[e];return i.oldInd=t.oldInd,i})),h.containers[t.from],e,{flipLast:t.flipLast,flipLastFrom:t.flipLastFrom,flipCards:t.flipCards,reversed:t.reversed,chain:t.chain,isTakeOver:t.isTakeOver})};o.applyUndo=function(){if(o.state===v.WAITING&&et.length){r.undo.play();var t,e=!1,i=0;do{e=(t=et.pop()).chain,i?i>0&&(t.chain=!0):t.chain=!1,i++,ot(t,1)}while(e);o.computeHints(),c.movesCount-=2}},o.applyRedo=function(){if(o.state===v.WAITING&&it.length){r.redo.play();var t,e=!1,i=0;do{e=(t=it.pop()).chain,i?i>0&&(t.chain=!0):t.chain=!1,i++,ot(t,2)}while(e);at(700)}},o.restart=function(){if(o.state==v.WAITING&&!h.cards.some((function(t){return!t.ownedBy}))){for(o.state=v.INIT,o.hints.length=0,o.hideHint(),Z=!0;et.length;)ot(et.pop(),1);Z=!1,o.computeHints(),it.length=0,y.start(0),y.pause(),m=setTimeout((function(){y.start(),o.state=v.POSTMOVE}),700),at(700),c.movesCount=0}},o.running=function(){return!!h},o.playing=function(){return o.state!==v.END},Object.defineProperty(o,"normalizedName",{get:function(){return t.ui.gamesUI[t.game.type].variation[t.game.variation].normalizedName}}),Object.defineProperty(o,"name",{get:function(){return t.localisation.getL("game-"+this.normalizedName)}}),Object.defineProperty(o,"type",{get:function(){return t.curGame&&t.curGame[0]}}),Object.defineProperty(o,"variation",{get:function(){return t.curGame&&t.curGame[1]}}),o.autoFill=function(){var e=h.getAutoFillMove();if(e){t.containers.Card.speed=n.autoplaySpeed;var i=o.performMove(e.cards,e.destination,void 0,{chain:e.chain});t.containers.Card.speed=n.animationSpeed,r.autoplay.play(),at(Math.round(.8*i))}else o.computeHints(),o.testEnd()};var nt=0,at=function(t){st(),nt=setTimeout(o.autoFill,t)},st=function(){clearTimeout(nt)};o.testEnd=function(){if(function(){var t=navigator.userAgent.toLowerCase();return t.match(/iphone/)?"iPhone":t.match(/android/)&&t.match(/mobile/)?"android":t.match(/windows/)&&t.match(/phone/)?"windows":null}()||function(){try{gtag("event","conversion",{send_to:"AW-11216962876/rfLcCOqp7tcYELyK1eQp"})}catch(t){}}(),"klondike"!==t.curGame[0]||1!=t.curGame[1]&&3!=t.curGame[1]){if("freecell"===t.curGame[0]||"klondike"===t.curGame[0]&&"yukon"==t.curGame[1]){var e=h.testAuto(),i=0;e.automovePrefs[1].forEach((function(t){0==t.cards.length&&i++,4==i&&$("#autoplay-but").attr("class").toString().includes("off")&&($("#autoplay-but").click(),setTimeout($("#autoplay-but").click(),8e3))}))}}else 0==(e=h.startAutoPlay())&&$("#autoplay-but").attr("class").toString().includes("off")&&($("#autoplay-but").click(),setTimeout($("#autoplay-but").click(),8e3));o.state!==v.END&&(o.loadPromise.resolve(),h.isWon()?(u.trigger("game:won",h),s.modal.show(),s.modal.clickOnce((function(){o.onGamewon()})),t.winAnimations.start(h.foundations,h.cards,(function(){var e=Number($("#user-wins").text());e+=1,$("#user-wins").empty().text(e),s.modal.click(),$.post("Leaderboard",{game:t.curGame[0]+"-"+t.curGame[1],hasWon:!0,moves:t.cardData._movesCount,seconds:t.cardData._time}),""!==$("#match-id").text()?setTimeout((()=>{let e=Number($("#opponent-player-moves").text());$.post("/GameOver",{MatchId:$("#match-id").text(),CurrentPlayerMoves:t.cardData._movesCount,OpponentPlayerUserId:$("#opponent-player-id").text(),OpponentPlayerMoves:$("#opponent-player-moves").text()}),e>t.cardData._movesCount?($("#matchmaking-title-won-lost").empty().text("You Won"),$("#match-id").text(""),$("#matchmaking-lost-dialog-solitairen").removeAttr("hidden"),$("#opponentPlayerName").empty().text($("#opponent-player-name").text()),$("#opponent-lost-moves").empty().text(e),$("#your-lost-moves").empty().text(t.cardData._movesCount),$("#oponnent-moves").attr("hidden",!0)):($("#matchmaking-title-won-lost").empty().text("You Lost"),$("#match-id").text(""),$("#matchmaking-lost-dialog-solitairen").removeAttr("hidden"),$("#opponentPlayerName").empty().text($("#opponent-player-name").text()),$("#opponent-lost-moves").empty().text(e),$("#your-lost-moves").empty().text(t.cardData._movesCount),$("#oponnent-moves").attr("hidden",!0))}),200):$("#win-dialog-solitairen").removeAttr("hidden")})),o.state=v.END,y.pause(),r.gamewon.play(),c.winUpdate()):h.isLost(this.hints)?(u.trigger("game:lose",h),o.state=v.WAITING,$("#nomoremove-dialog-solitairen").removeAttr("hidden")):o.state=v.WAITING)},o.getMaxmove=function(t){return h.getMaxmove(t)},o.getFlipScale=n.noScaling?function(){return 1}:function(){return h.flipScale},o.requestAutomove=function(e,i){if(o.state===v.WAITING&&o.movable(e)||i&&h.movable(e)){var a=h.requestAutomove(e,o.curHint||tt);if(a){t.containers.Card.speed=n.automoveSpeed;var s=e.ownedBy.getCards(e.ownedBy.cards.length-e.ind);s=s.slice(0,e.ownedBy.maxCardsToMove());var c=o.performMove(s,a);return h.clickAdjust(s),t.containers.Card.speed=n.animationSpeed,m=setTimeout((function(){r.drop.play()}),c),at(c),!0}}return!1},o.hoverable=function(t){return o.state===v.WAITING&&h.hoverable(t)},o.movable=function(t){return!t.moving&&!t.flipping&&h.movable(t)},o.instaWin=function(){h.tableaus.forEach((function(t){for(;t.cards.length;)t.popCard()}));for(var t=0;t<h.foundations.length;t++)for(var e=0;e<13;e++)h.foundations[t].takeIn(h.cards[13*t+e]);o.testEnd()}}(),setTimeout((function(t){}),1e3),$(window).resize((function(){setTimeout((function(t){}),1e3)})),function(){"use strict";var i=t.config,o=t.resources,n=t.game,a=t.display,s=t.containers.Card=function(t){this.objid=t,this.flipping=!1,this.moving=!1,this.movingTimer=0,this.highlighted=!1,this.hasShadow=!1,this.hovereffect=!1,this.ind=-1,this.ownedBy=null,this.inHint=null,this.pos={},this.type=Math.floor(t%52/13),this.num=t%52-13*this.type+1,this.dom=document.createElement("div"),this.dom.className="card",this.dom.unselectable=!0,this.dom.onselectstart=function(){return!1},this.dom.style.position="absolute",this.dom.style.top=0,this.dom.style.left=0,this.jdom=$(this.dom),this.front=o.getCardImage(this.type,this.num),this.front.className="cardFront",this.front.style.position="absolute",this.front.style.display="block",this.front.draggable=!1,this.front.alt=this.type+"-"+this.num+"card",this.front.ondragstart=function(){return!1},this.dom.appendChild(this.front),this.back=o.getCardBackImage(),this.back.className="cardBack",this.back.style.position="absolute",this.back.style.display="block",this.back.draggable=!1,this.front.alt="card-back-image",this.back.ondragstart=function(){return!1},this.dom.appendChild(this.back),$(this.front).add(this.back).css({scaleX:1,scaleY:1}),this.flipped=!0;var e=this;this.jdom.on(i.event_touchstart,(function(t){if(!(t=t.originalEvent).changedTouches&&!t.isPrimary)return!1;if(t.button)return!1;var i=t.changedTouches?t.changedTouches[0]:t;return n.initialiseDrag(e,{x:i.clientX,y:i.clientY},!0),!1})).on("ondblclick",(function(t){t.preventDefault(),n.requestAutomove(e)})).on("mousedown",(function(t){3!==t.which&&(t.preventDefault(),n.initialiseDrag(e,{x:t.clientX,y:t.clientY}))})).on("contextmenu",(function(t){t.preventDefault(),n.requestAutomove(e)})),this.setHoverEffect(!0),this.flipTimer=0,this.hoverred=!1};s.speed=i.animationSpeed,s.prototype.setHoverred=function(t){this.hovered=t,t?this.moving||this.flipping||!n.hoverable(this)||(this.jdom.css({"box-shadow":a.hoverShadow}),this.inHint&&(this.inHint.style.display="none")):(this.highlighted?this.jdom.css({"box-shadow":a.highlightShadow,ieBoxShadow:a.highlightShadow}):this.jdom.css({"box-shadow":""}),this.inHint&&(this.inHint.style.display=""))},s.prototype.setHoverEffect=function(t){if(this.hovereffect!==t)if(this.hovereffect=t,t&&!i.isiOS){var e=this;this.jdom.hover((function(){e.setHoverred(!0)}),(function(){e.setHoverred(!1)}))}else this.jdom.off("hover")},s.prototype.setShadow=function(t){this.hasShadow=t,this.animating||this.updateShadow()},s.prototype.updateShadow=function(){var t=$(this.back).add(this.front);this.hasShadow?t.css({boxShadow:a.cardStaticShadow}):t.css({boxShadow:""})},s.prototype.setHighlight=function(t){var e={};t?(e={"box-shadow":a.highlightShadow,ieBoxShadow:a.highlightShadow},this.highlighted=!0):(this.highlighted=!1,e={"box-shadow":"",ieBoxShadow:""}),$.fn.transition==$.fn.animate?this.jdom.css(e):this.jdom.transition(e)},s.prototype.flip=function(t,e,o){if(this.flipped!==t||o){this.flipped=t,this.ownedBy&&this.ownedBy.postFlip(this),this.flipping=!0;var a,s,r=$(".wrap-shadow")[0];e=e?Math.floor(e/2):this.animating?i.animation_time/4:i.flipTime/2,t?(a=$(this.back),s=$(this.front)):(a=$(this.front),s=$(this.back)),this.jdom.css("box-shadow",""),s.transition({scaleX:0,scaleY:n.getFlipScale()},e),a.css({scaleX:0,scaleY:n.getFlipScale()}),clearTimeout(this.flipTimer),this.flipTimer=setTimeout(function(){a.transition({scaleX:1,scaleY:1},e,function(){this.flipping=!1,this.setHoverred(this.hoverred),$.browser.mozilla&&(r.style.visibility="hidden",setTimeout((function(){r.style.visibility=""}),50))}.bind(this))}.bind(this),e+10)}},s.prototype.directFlip=function(t){var e,i;this.flipped!==t&&(this.flipped=t,this.ownedBy&&this.ownedBy.postFlip(this),clearTimeout(this.flipTimer),t?(e=$(this.back),i=$(this.front)):(e=$(this.front),i=$(this.back)),e.css({webkitTransition:""}),e.css({webkitTransition:""}),setTimeout((function(){i.css({display:"block",scaleX:0,scaleY:n.getFlipScale()}),e.css({display:"block",scaleX:1,scaleY:1})}),0))},s.prototype.parabol=function(){this.front.style[e.prefix+"Transform"]="",setTimeout(function(){var t=this.time/4,i=this.time-t,o=Math.floor(1.3*this.dy),n=this.dx<0?-1:1;this.front.style[e.prefix+"Transition"]=t+"ms cubic-bezier(0.000, 0.300, 0.700, 1.000)",this.front.style[e.prefix+"Transform"]="translateY(-"+o+"px) rotate("+180*n+"deg)",setTimeout(function(){this.front.style[e.prefix+"Transition"]=i+"ms cubic-bezier(0.100, 0.000, 0.70, 1.200)",this.front.style[e.prefix+"Transform"]="translateY(0px) rotate("+360*n+"deg)",setTimeout(function(){this.front.style[e.prefix+"Transition"]="",this.front.style[e.prefix+"Transform"]=""}.bind(this),i+10)}.bind(this),t)}.bind(this),10)},s.prototype.adjustPos=function(t,e){if(this.ownedBy){var o=this.pos=this.ownedBy.getPosForChild(this.ind),n=this.domPos.x,a=this.domPos.y;if(n!==o.x>>0||a!==o.y>>0||this.moving||this.animating){void 0!==t||this.animating?this.animating?this.time=i.animation_time:this.time=t:this.time=~~Math.max(i.minimum_moving_time,1e3*Math.sqrt(Math.pow(o.y-a,2)+Math.pow(o.x-n,2))/s.speed),this.dy=o.y-a,this.dx=o.x-n,void 0===e&&(e=this.animating?0:100),clearTimeout(this.movingTimer),this.moving=!0;var r=this;this.movingTimer=setTimeout((function(){r.moving=!1,r.setHoverred(r.hoverred)}),this.time),this.animating,this.move(o.x>>0,o.y>>0,o.z+e,this.time,$.cssEase[i.easingFunc],e)}else this.jdom.css("zIndex",o.z)}},s.prototype.move=function(t,o,a,s,r,c){this.domPos={x:t,y:o,z:a},n.moveWithAnimate?(this.dom.style.zIndex=a,this.dom.style[e.prefix+"Transition"]="",this.jdom.stop(),s?this.jdom.animate({x:t,y:o},{duration:s,queue:!1}):this.jdom.css({y:o,x:t})):(this.jdom.stop(!0).css("zIndex",a+c),s?this.jdom.transition({y:o>>0,x:t>>0,delay:10},this.time,i.easingFunc):this.jdom.css({y:o>>0,x:t>>0}))}}(),function(){"use strict";var e=t.display,i=t.containers.Container=function(t,e){this.cards=[],this.objid=t,this.offsetTop=0,this.offsetLeft=0,e?(this.dom=e,this.dom.style.position="absolute",this.dom.ondragstart=function(){return!1}):this.dom=null,this.highlighted=!1};i.prototype.ini=function(){this.cards.length=0},i.prototype.isEmpty=function(){return 0===this.cards.length},i.prototype.lastCardIsOfSameType=function(t){return!this.isEmpty()&&!t.isEmpty()&&this.lastCard().type===t.lastCard().type},i.prototype.maxCardOut=function(){return this.cards.length?1:0},i.prototype.shouldFlipLast=function(){return!1},i.prototype.flipUpdate=function(){},i.prototype.maxCardIn=function(){return 1},i.prototype.postFlip=function(){},i.prototype.toRect=function(){return{left:this.offsetLeft,right:this.offsetLeft+e.cwidth,top:this.offsetTop,bottom:this.offsetTop+e.cheight}},i.prototype.ini=function(){this.cards.length=0},i.prototype.accept=function(){return!1},i.prototype.lastCard=function(){return this.cards.length>0?this.cards[this.cards.length-1]:null},i.prototype.getCards=function(t){return this.cards.slice(this.cards.length-t,this.cards.length)},i.prototype.popCard=function(){this.cards.pop().ownedBy=null},i.prototype.maxCardsToMove=function(t){return 1/0},i.prototype.getPosForChild=function(t){return{x:this.offsetLeft,y:this.offsetTop,z:t+this.zAdd}},i.prototype.setPos=function(t,e){this.offsetLeft=t,this.offsetTop=e},i.prototype.adjustPos=function(t){this.dom&&$(this.dom).css({y:this.offsetTop,x:this.offsetLeft});var e=0;return this.pauseAnimateCard||(this.cards.forEach((function(i){i.adjustPos(t),e=Math.max(e,i.time)})),this.adjustZ(e+1)),e},i.prototype.adjustZ=function(t){setTimeout(function(){this.cards.forEach((function(t){t.moving||t.jdom.stop(!0).css("zIndex",t.pos.z)}))}.bind(this),t)},i.prototype.setHighlight=function(t){t?this.cards.length?this.lastCard().setHighlight(!0):(this.dom&&$(this.dom).transition({"box-shadow":e.highlightShadow,ieBoxShadow:e.highlightShadow},200),this.highlighted=!0):this.cards.length?this.lastCard().setHighlight(!1):(this.dom&&$(this.dom).transition({"box-shadow":"",ieBoxShadow:""},200),this.highlighted=!1)}}(),function(){"use strict";var e,i,o,n,a=t.display,s=t.game,r=t.containers.Container.prototype,c=t.containers.Tableau=function(e){var i=t.resources.getTableauImage();i.className="tableau-holder",t.containers.Container.call(this,e,i),this.cardSep=t.display.cardSep,this.fcardcount=0,this.offsetTop=0,this.zAdd=7,this.highlightLen=0};c.setMovableCards=function(t){i=t,e={single:function(){return!1},any:function(){return!0},sequence_any:function(t,e){return!t.flipped&&!e.flipped&&t.num-e.num==1},sequence_same_suit:function(t,e){return!t.flipped&&!e.flipped&&t.num-e.num==1&&t.type===e.type},sequence_diff_color:function(t,e){return!t.flipped&&!e.flipped&&t.num-e.num==1&&(t.type-e.type+4)%2==1}}[t]},c.getMovableCards=function(){return i},c.setSpaceAccept=function(t){o=t},c.getSpaceAccept=function(){return o},c.setWithCardAccept=function(t){n=t},c.prototype=Object.create(r),c.prototype.maxCardOut=function(){return this.computeMaxCardOut()},c.prototype.maxCardIn=function(){return 1/0},c.prototype.ini=function(){this.cards.length=0,this.cardSep=a.cardSep,this.fcardcount=0,r.ini.call(this)},c.prototype.toRect=function(){return{left:this.offsetLeft,top:this.offsetTop,right:this.offsetLeft+a.cwidth,bottom:1/0}},c.prototype.takeIn=function(t){t instanceof Array||(t=[t]),t.forEach(function(t){t.ownedBy=this,t.ind=this.cards.length,this.cards.push(t),t.setShadow(!0)}.bind(this))},c.prototype.computeMaxCardOut=function(){if(0===this.cards.length)return 0;if("yukon"===t.curGame[1])return this.cards.filter((function(t){return!t.flipped})).length;for(var i=this.cards.length-1;i>0&&e(this.cards[i-1],this.cards[i]);)i--;return this.cards.length-i},c.prototype.adjustSep=function(){var e=0;for(this.fcardcount=0;e<this.cards.length&&this.cards[e].flipped;)this.fcardcount++,e++;var i=this.cardSep;return this.cardSep=Math.floor((a.playAreaHeight-this.offsetTop-("yukon"==t.curGame[1]?-1.2*a.cheight:"scorpion"==t.curGame[1]?-.6*a.cheight:1.2*a.cheight))/(this.cards.length-1-this.fcardcount+this.fcardcount/2)),this.cardSep>a.cardSep&&(this.cardSep=a.cardSep),i!==this.cardSep},c.prototype.popCard=function(){this.lastCard().flipped&&this.fcardcount--,this.cards.pop().ownedBy=null},c.prototype.shouldFlipLast=function(){return!0},c.prototype.flipUpdate=function(){this.adjustSep()&&this.cards.forEach((function(t){t.adjustPos(!1,0)}))},c.prototype.accept=function(t){if(t instanceof Array||(t=[t]),0===t.length)return!1;if(this===t[0].ownedBy)return!1;if(this.cards.length){if("groupable"===n)return e(this.cards[this.cards.length-1],t[0]);if("sequence"===n)return this.cards[this.cards.length-1].num-t[0].num==1;if("any"===n)return!0;if("suit"===n)return this.cards[this.cards.length-1].num-t[0].num==1&&this.lastCard().type===t[0].type;if("alternate_circular_sequence"===n){var i=this.cards[this.cards.length-1].num-t[0].num;return(1===i||-12===i)&&(this.cards[this.cards.length-1].type-t[0].type+4)%2==1}return!1}return!(s.getMaxmove(this)<t.length)&&("king"===o?13===t[0].num:"any"===o)},c.prototype.adjustPos=function(t){return this.cardSep=a.cardSep,this.adjustSep(),r.adjustPos.call(this,t)},c.prototype.getPosForChild=function(t){var e;return e=t<this.fcardcount?t*this.cardSep/2:this.fcardcount*this.cardSep/2+(t-this.fcardcount)*this.cardSep,{x:this.offsetLeft,y:e+this.offsetTop,z:t+this.zAdd}},c.prototype.setHighlight=function(t,e){if(t&&(1===e||!e)||1===this.highlightLen&&!t)this.highlightLen=1,r.setHighlight.call(this,t);else{var i=this.cards.length-e,o=this.cards[i],n=this.cards.slice(i,i+this.maxCardsToMove()).pop();t?(this.highlightLen=e,s.requestLongHint(o,n)):(this.highlightLen=0,s.removeLongHint(o,n))}}}(),function(){"use strict";t.display,t.game;let e=1;var i=t.containers.Foundation=function(i){var o=t.resources.getFoundationImage(e++);o.className="foundation",t.containers.Container.call(this,i,o),this.zAdd=7},o="normal";i.setMode=function(t){o=t},i.prototype=Object.create(t.containers.Container.prototype),i.prototype.accept=function(t){if("noManual"===o)return!1;if(t instanceof Array){if(t.length>1)return!1;t=t[0]}return"onlyKing"===o?13===t.num:this.cards.length?t.type===this.lastCard().type&&t.num-this.lastCard().num==1:1===t.num},i.prototype.takeIn=function(t){t instanceof Array||(t=[t]),this.lastCard()&&this.lastCard().setShadow(!1),t.forEach(function(t){t.ownedBy=this,t.setShadow(!1),t.ind=this.cards.length,this.cards.push(t)}.bind(this)),this.lastCard().setShadow(!0)},i.prototype.maxCardOut=function(){return"normal"===o?1:0},i.prototype.popCard=function(){t.containers.Container.prototype.popCard.call(this),this.lastCard()&&this.lastCard().setShadow(!0)}}(),function(){"use strict";t.display,t.game;var e=t.containers.Tableau.prototype,i=t.containers.ReservePile=function(e){t.containers.Tableau.call(this,e)};i.prototype=Object.create(e),i.prototype.maxCardOut=function(){return Math.min(1,this._maxcard)},i.prototype.computeMaxCardOut=function(){0===this.cards.length?this._maxcard=0:this._maxcard=1},i.prototype.maxCardsToMove=function(){return 1},i.prototype.removeCard=function(t){var e=this.cards.indexOf(t);-1!==e&&(this.cards.splice(e,1),t.ownedBy=null)},i.prototype.takeIn=function(t){t instanceof Array||(t=[t]),t.forEach(function(t){t.ownedBy=this,$.isNumeric(t.oldInd)?this.cards.splice(t.oldInd,0,t):this.cards.push(t),t.setShadow(!0)}.bind(this)),this.cards.forEach((function(t,e){t.ind=e})),this.computeMaxCardOut()},i.prototype.maxCardIn=function(){return 0},i.prototype.accept=function(t){return!1}}(),function(){"use strict";t.display,t.game;var e=t.containers.CardHolder=function(e){t.containers.Container.call(this,e),this.offsetTop=0,this.offsetLeft=0,this.zAdd=0,this.blockingContainers=[]};e.prototype=Object.create(t.containers.Container.prototype),e.prototype.addBlockingContainer=function(t){this.blockingContainers.push(t)},e.prototype.takeIn=function(t){t instanceof Array&&(t=t[0]),t.ownedBy=this,t.ind=0,this.cards.push(t),t.setShadow(!0)},e.prototype.isBlocked=function(){return this.blockingContainers.some((function(t){return 0!==t.cards.length}))},e.prototype.maxCardOut=function(){return this.isBlocked()?0:this.cards.length},e.prototype.accept=function(t){return!1}}(),function(){"use strict";t.display,t.game;var e=t.containers.Reserve=function(e){var i=t.resources.getReserveImage();i.className="cell",t.containers.Container.call(this,e,i),this.offsetTop=0,this.offsetLeft=0,this.zAdd=99};e.prototype=Object.create(t.containers.Container.prototype),e.prototype.accept=function(t){return!(this.cards.length||t instanceof Array&&1!==t.length)},e.prototype.takeIn=function(t){t instanceof Array&&(t=t[0]),t.ownedBy=this,t.ind=0,this.cards.push(t),t.setShadow(!0)}}(),function(){"use strict";var e=t.display,i=(t.game,t.containers.Container.prototype),o=t.containers.Waste=function(e){t.containers.Container.call(this,e),this.offsetLeft=0,this.offsetTop=0,this.zAdd=1,this.highlightLen=0,this._layout="normal",this.popNeedUpdate=!1};o.prototype=Object.create(i),o.prototype.setLayout=function(t){this._layout=t,this.popNeedUpdate="3"===t},o.prototype.maxCardOut=function(){return this.cards.length>0?1:0},o.prototype.maxCardIn=function(){return 0},o.prototype.takeIn=function(t){t instanceof Array||(t=[t]),t.forEach(function(t){t.ownedBy=this,t.setShadow(!1),t.ind=this.cards.length,this.cards.push(t)}.bind(this)),"3"==this._layout&&(this.getCards(Math.min(this.cards.length,6)).forEach((function(t){t.setShadow(!1)})),this.getCards(Math.min(this.cards.length,3)).forEach((function(t){t.setShadow(!0)})))},o.prototype.getPosForChild=function(i){return{normal:function(e){return{x:this.offsetLeft-Math.floor(e/t.config.offsetStockDiv),y:this.offsetTop-Math.floor(e/t.config.offsetStockDiv),z:e+this.zAdd}},3:function(t){if(this.cards.length<3)return{x:this.offsetLeft+t*e.cardSep,y:this.offsetTop,z:t+this.zAdd};var i=t-this.cards.length+3;return{x:this.offsetLeft+Math.max(i,0)*e.cardSep,y:this.offsetTop,z:(i<0?0:i+2)+this.zAdd}}}[this._layout].bind(this)(i)}}(),function(){"use strict";var e=t.display,i=t.game,o=t.resources,n=t.containers.Container.prototype,a=t.containers.Stock=function(i){var n,a=document.createElement("div");if(a.className="waste-holder",this.stopImage=$(o.getStopSpotImage()),this.redealImage=$(o.getRedealImage()),this.stopImage.add(this.redealImage).css({position:"absolute","z-index":1,top:0,left:0,width:"100%",height:"100%"}),n=t.config.isiOS?"touchend":"click",$(a).append(this.stopImage).on(n,function(){this.redeal()}.bind(this)),t.containers.Container.call(this,i,a),this.offsetLeft=0,this.offsetTop=0,this.zAdd=7,this.disabled=!0,this._redealCount=1/0,!t.config.isiOS){var s=$(a);s.hover(function(){this.cards.length||this.disabled||s.css({"box-shadow":e.hoverShadow})}.bind(this),function(){this.highlighted?s.css({"box-shadow":e.highlightShadow,ieBoxShadow:e.highlightShadow}):s.css({"box-shadow":""})}.bind(this))}this.target=null,this.ejectCards=1,this.type="normal",this.layoutOptions={},this.lastCardUp=!1},s=null;a.setEmptyCheck=function(t){s=t},a.prototype=Object.create(n),a.prototype.setLayout=function(t,e){this.type=t,this.layoutOptions=e},a.prototype.shouldFlipLast=function(){return this.lastCardUp},a.prototype.getPosForChild=function(e){return"normal"==this.type?{x:this.offsetLeft-Math.floor(e/t.config.offsetStockDiv),y:this.offsetTop-Math.floor(e/t.config.offsetStockDiv),z:e+this.zAdd}:"piles"==this.type?{x:this.offsetLeft+this.layoutOptions.margin*Math.floor(e/this.layoutOptions.numPerPile),y:this.offsetTop,z:e+this.zAdd}:void 0},a.prototype.disable=function(){this.disabled||(this.redealImage.remove(),$(this.dom).append(this.stopImage),this.disabled=!0)},a.prototype.redealable=function(){return 0===this.cards.length&&!this.disabled&&0!==this.target.cards.length},a.prototype.enable=function(){this.disabled&&(this.stopImage.remove(),$(this.dom).append(this.redealImage),this.disabled=!1)},a.prototype.redeal=function(){return!(this.disabled||this.cards.length>0||this.target instanceof Array||0===this.target.cards.length||!i.requestTakeOver(this,this.target,!0)||(this.setRedealCount(this._redealCount-1),$(this.dom).trigger("mouseout"),0))},a.prototype.takeIn=function(t){t instanceof Array||(t=[t]),t.forEach(function(t){t.ownedBy=this,t.ind=this.cards.length,"normal"==this.type?t.setShadow(!1):"piles"==this.type&&t.setShadow(t.ind%this.layoutOptions.numPerPile==0),this.cards.push(t)}.bind(this))},a.prototype.setRedealCount=function(t){this._redealCount=t,t>0?this.enable():this.disable()},a.prototype.targetChanged=function(){this.target instanceof Array||(0===this.target.cards.length?this.disable():this._redealCount>0&&this.enable())},a.prototype.increRedealCount=function(){this.setRedealCount(this._redealCount+1)},a.prototype.decreRedealCount=function(){this.setRedealCount(this._redealCount-1)},a.prototype.eject=function(){if(this.target instanceof Array){if(s&&this.target.some((function(t){return 0===t.cards.length})))return s(),0;for(var t=[],e=0;e<this.target.length&&e<this.cards.length;e++)t.push(this.target[e]);return i.performMove(this.getCards(t.length).reverse().map((function(t){return[t]})),t,void 0,{flipCards:!this.lastCardUp,moveTime:300})}return i.performMove(this.getCards(Math.min(this.cards.length,this.ejectCards)),this.target,void 0,{flipCards:!this.lastCardUp,reversed:!0})}}(),function(){"use strict";var e=[],i=[],o=[],n=[],a=[],s=[],r=[],c=[],u=function(t,e,i,o,n){var a;if(t){if(n.length<t.length)for(a=n.length;a<t.length;a++)n.push(new e(a));for(a=0;a<t.length;a++)n[a].dom&&o.appendChild(n[a].dom),i.push(n[a]);return n.slice(0,t.length)}return null},h=t.cardData,d=4,l=t.GameBase=function(){this.containers=[],this.frag=document.createDocumentFragment(),this.reserves=u(this.config.reserves,t.containers.Reserve,this.containers,this.frag,i),this.foundations=u(this.config.foundations,t.containers.Foundation,this.containers,this.frag,o),this.stocks=u(this.config.stocks,t.containers.Stock,this.containers,this.frag,n),this.wastes=u(this.config.wastes,t.containers.Waste,this.containers,this.frag,a),this.tableaus=u(this.config.tableaus,t.containers.Tableau,this.containers,this.frag,e),this.cardHolders=u(this.config.cardHolders,t.containers.CardHolder,this.containers,this.frag,r),this.reservePiles=u(this.config.reservePiles,t.containers.ReservePile,this.containers,this.frag,c),this.cards=function(e,i,o){var n;if(o.length<e)for(n=o.length;n<e;n++)o.push(new t.containers.Card(n));for(n=0;n<e;n++)i.appendChild(o[n].dom),o[n].move(-2e3,-2e3,0,0,"");return o.slice(0,e)}(this.config.cards,this.frag,s),this.initx=0,this.inity=0,this.maxMove=1/0,this.config.suits?this.setSuits(this.config.suits):this.setSuits(4),t.gameSettings.autoplayMode="enabled",this.autoMoveFollowHint=!0};l.prototype.flipScale=t.config.flipScale,l.prototype.setSuits=function(e){if(d!==e){d=e,t.resources.changeCardImagesToSuits(e);var i=13*e;this.cards.forEach((function(t){t.type=Math.floor(t.objid%i/13)}))}},l.prototype.setUpCardData=function(t){h.setName(t)},l.prototype.moveOccurred=function(e,i,o){return e instanceof t.containers.Foundation&&(h.gameScore-=5*o),i instanceof t.containers.Foundation&&(h.gameScore+=5*o),this.updateState(),this.getAutomoveAfterMove()},l.prototype.getAutomoveAfterMove=function(){return[]},l.prototype.updateState=function(){},l.prototype.undoTakeOver=function(e,i){i instanceof t.containers.Stock&&e===i.target?i.increRedealCount():e instanceof t.containers.Stock&&i===e.target&&e.decreRedealCount()},l.prototype.hoverable=function(t){return this.movable(t)},l.prototype.getMaxmove=function(t){return 1/0},l.prototype.movable=function(t){return!t.flipped&&t.ownedBy&&t.ownedBy.cards.length-t.ind<=t.ownedBy.maxCardOut()&&t.ownedBy.cards.length-t.ind<=this.maxMove},l.prototype.cardClicked=function(e){return t.containers.Stock&&e.ownedBy instanceof t.containers.Stock&&e==e.ownedBy.lastCard()?e.ownedBy.eject():0},l.prototype.requestAutomove=function(t,e){if(this.autoMoveFollowHint&&e&&e.from&&e.to&&e.from===t.ownedBy&&t.ind===e.from.cards.length-e.length)return e.to;var i=t.ownedBy.getCards(t.ownedBy.cards.length-t.ind);return i=i.slice(0,t.ownedBy.maxCardsToMove()),this.getAutomoveDes(i)},l.prototype.getAutomoveDesFor=function(t,e){for(var i=0;i<e.length;i++)if(this.testAccept(t,e[i]))return e[i]},l.prototype.getAutomoveDes=function(t){for(var e=0;e<this.automovePrefs.length;e++){var i=this.getAutomoveDesFor(t,this.automovePrefs[e]);if(i)return i}return null},l.prototype.adjustLayout=function(e,i){var o=t.config.totalL,n=t.config.cL,a=(t.config.isMobilePhone,1),s=e/(o*this.columns+1)*o,r=Math.min(146,Math.floor(s/o*n)),c=Math.min(198,Math.floor(i/this.rows/a));c<r/146*198?r=Math.floor(c/198*146):c=Math.floor(r/146*198),s=Math.round(r/n*o);var u=Math.round(c/8*10),h=Math.min(r/o,Math.floor((s-r)/2)),d=Math.floor((e-s*this.columns)/2);return window.innerHeight<window.innerWidth&&(d+=t.game.marginsForDevices),{cwidth:r,cheight:c,top:u,margin:h,left:d,height:i,width:e}},l.prototype.performDeal=function(t){if(this.config.flip instanceof Object)if("last"===this.config.flip.type){var e=this.config.flip.num;this.config.flip.containers.forEach(function(t){this[t].forEach((function(t){t.getCards(e).forEach((function(t){t.directFlip(!1)}))}))}.bind(this))}else if("all"===this.config.flip.type)this.config.flip.containers.forEach(function(t){this[t].forEach((function(t){t.cards.forEach((function(t){t.directFlip(!1)}))}))}.bind(this));else{var i=this.config.flip.nums;this.tableaus.forEach((function(t,e){t.getCards(i[e]).forEach((function(t){t.directFlip(!1)}))}))}this.containers.forEach((function(t){t.adjustPos()})),setTimeout(function(){this.cards.forEach((function(t){t.animating=!1,t.updateShadow()})),t&&t()}.bind(this),500)},l.prototype.animateDeal=function(e){if(!this.tableaus||!this.tableaus.length)return this.performDeal(e);var i={};if(this.config.flip instanceof Object)if("last"===this.config.flip.type){var o=this.config.flip.num;this.config.flip.containers.forEach(function(t){this[t].forEach((function(t){t.getCards(o).forEach((function(t){i[t.objid]=!0}))}))}.bind(this))}else if("all"===this.config.flip.type)this.config.flip.containers.forEach(function(t){this[t].forEach((function(t){t.cards.forEach((function(t){i[t.objid]=!0}))}))}.bind(this));else{var n=this.config.flip.nums;this.tableaus.forEach((function(t,e){t.getCards(n[e]).forEach((function(t){i[t.objid]=!0}))}))}else if("all"===this.config.flip)for(var a=0;a<this.cards.length;a++)i[a]=!0;this.containers.forEach((function(e){e instanceof t.containers.Tableau&&(e.pauseAnimateCard=!0,e.cards.forEach((function(t){t.flipped=!i[t.objid]})),e.adjustPos(),e.cards.forEach((function(t){t.flipped=!0})))}));var s=0,r=0,c=0,u=!1;do{u=!1;var h=this.tableaus;this.reservePiles&&(h=[].concat(this.tableaus,this.reservePiles)),h.forEach((function(t){t.cards.length>c&&(setTimeout(function(e){return function(){var o=t.cards[e];o&&(i[o.objid]&&o.directFlip(!1),t.cards[e].adjustPos(void 0,100+10*r),r++,setTimeout(function(t){return function(){t.dom.style.zIndex=t.pos.z}}(t.cards[e]),t.cards[e].time))}}(c),s),s+=50,u=!0)})),c++}while(u);setTimeout(function(){this.containers.forEach((function(e){e instanceof t.containers.Tableau||(e.cards.forEach((function(t){i[t.objid]&&t.directFlip(!1)})),e.adjustPos())}));var o=this.tableaus;this.reservePiles&&(o=[].concat(this.tableaus,this.reservePiles)),o.forEach((function(t){t.pauseAnimateCard=!1,t.adjustZ(0)})),this.cards.forEach((function(t){t.animating=!1,t.updateShadow()})),e&&e()}.bind(this),s+t.config.animation_time)},l.prototype.init=function(e){if(t.gameSettings.useCSS3?$(".card").transition({x:this.initx,y:this.inity,boxShadow:"none"}).find(".cardFront").css("boxShadow","none"):$(".card").css({x:this.initx,y:this.inity,boxShadow:"none"}).find(".cardFront").css("boxShadow","none"),this.containers.forEach((function(t){t.ini()})),void 0!==this.config.stockRedealCount&&this.stocks){var i=this.config.stockRedealCount;this.stocks.forEach((function(t){t.setRedealCount(i)}))}var o="all"!==this.config.flip;if(this.cards.forEach((function(t){t.animating=!0,t.directFlip(o),t.setShadow(!1),t.updateShadow()})),n=t.gameSettings.useCSS3?700:0,"pyramid"==t.data.projectType)var n=250;0==t.game.nextGameNumber?(this.gameNumber=Math.ceil(9999999*Math.random()),this.gameDate=null):(t.game.gameDate?this.gameDate=t.game.gameDate:this.gameDate=null,this.gameNumber=t.game.nextGameNumber,t.game.nextGameNumber=0,t.game.gameDate=null),this.updateGameName(),setTimeout(function(){for(var i=[],o=0;o<this.config.cards;o++)i.push(o);var n=new Math.seedrandom(this.gameNumber);if(["tableaus","foundations","reserves","stocks","wastes","cardHolders","reservePiles"].forEach(function(t){!function(t,e,i,o,n){e&&e.forEach((function(e,a){for(var s=0;s<e;s++){var r=Math.floor(n()*t.length);i[a].takeIn(o[t[r]]),r+1<t.length?t[r]=t.pop():t.pop()}}))}(i,this.config[t],this[t],this.cards,n)}.bind(this)),i.length>0)throw"there are "+i.length+" unused cards!";t.gameSettings.useCSS3?this.performDeal(e):this.animateDeal(e),h.gameScore=this.config.initialScore||0}.bind(this),n)},l.prototype.updateGameName=function(){$("#gameName").html(t.game.name)},l.prototype.getSelectiveAutoplayMove=function(){var e,i,o,n,a,s="canfield"===t.curGame[0],r=[1,2];if(s){var c=this.foundations[0].cards[0].num+1;r=[this.foundations[0].cards[0].num,14===c?1:c]}for(e=0;e<this.containers.length;e++)if(!(this.containers[e]instanceof t.containers.Foundation||!(o=this.containers[e].lastCard())||o.flipped||this.containers[e].maxCardOut()<=0)){if(n=[],"sequence_diff_color"===t.containers.Tableau.getMovableCards()&&-1===r.indexOf(o.num)){var u=12,h=38;s&&1===o.num&&(u+=13,h+=13),n.push((o.objid+u)%52),n.push((o.objid+h)%52),104==this.config.cards&&(n.push((o.objid+u)%52+52),n.push((o.objid+h)%52+52))}for(this.foundations.forEach((function(t){t.cards.forEach((function(t){(a=n.indexOf(t.objid))>=0&&n.splice(a,1)}))})),i=0;i<this.foundations.length;i++)if(this.testAccept(o,this.foundations[i])&&0==n.length)return{cards:[o],destination:this.foundations[i]}}},l.prototype.getAutoFillMove=function(){if("n"===t.gameSettings.autoplayMode||"disabled"===t.gameSettings.autoplayMode||!t.gameSettings.autoplayEnabled)return null;if("s"===t.gameSettings.autoplayMode)return this.getSelectiveAutoplayMove();for(var e=0;e<this.containers.length;e++)if(!(this.containers[e]instanceof t.containers.Foundation))for(var i=0;i<this.foundations.length;i++){var o=this.containers[e].lastCard();if(o&&!o.flipped&&this.containers[e].maxCardOut()>0&&o.num<1/0&&this.foundations[i].accept(o))return{cards:[o],destination:this.foundations[i]}}return null},l.prototype.testAccept=function(t,e){return e.accept(t)},l.prototype.clear=function(){this.containers.forEach((function(t){t.dom&&t.dom.parentNode.removeChild(t.dom),t.ini()})),this.cards.forEach((function(t){t.dom.parentNode.removeChild(t.dom)}))},l.prototype.considerHints=function(t,e,i){return!0},l.prototype.computeHints=function(t){this.containers.forEach(function(e){this.containers.forEach(function(i){if(e!==i&&!e.isEmpty()&&this.considerHints(e,i))for(var o=Math.min(Math.min(e.maxCardOut(),i.maxCardIn()),this.getMaxmove(i)),n=0;n<o;n++){var a=e.cards[e.cards.length-1-n];this.movable(a)&&this.testAccept([a],i)&&this.considerHints(e,i,n+1)&&t.push({from:e,to:i,length:n+1})}}.bind(this))}.bind(this)),t.sort(this.sortHints.bind(this))},l.prototype.sortHints=function(t,e){if(t.to===e.to&&!t.to.isEmpty())return this.sortMove(t.from,e.from,t.to.getCards(1));if(t.from===e.from&&t.length===e.length)return this.sortMove(t.to,e.to,t.from.getCards(1));var i=this.moveCanAlterGameState(t),o=this.moveCanAlterGameState(e);if(!i&&!o)return 0;if(!i)return 1;if(!o)return-1;var n=t.from.lastCardIsOfSameType(t.to),a=e.from.lastCardIsOfSameType(e.to);return n&&a?e.length+e.to.maxCardOut()-(t.length+t.to.maxCardOut()):a?1:n?-1:e.length-t.length},l.prototype.moveCanAlterGameState=function(t){var e=t.from.cards.slice(-t.length),i=t.from.cards[t.from.cards.length-t.length-1];if(!i||i.flipped)return!0;t.to.cards.push.apply(t.to.cards,e);var o=t.to.maxCardOut(),n=t.from.maxCardOut();return t.to.cards.splice(-t.length),o!==n},l.prototype.sortMove=function(t,e,i){return e.length-t.length},l.prototype.isWon=function(){return this.foundations.every((function(t){return 13===t.cards.length}))},l.prototype.startAutoPlay=function(){return this.stocks[0].cards.length+this.wastes[0].cards.length},l.prototype.testAuto=function(){return this},l.prototype.isLost=function(t){return 0===t.length},l.prototype.gameState=function(){var t={containers:this.containers.map((function(t){return t.cards.map((function(t){return t.objid}))})),flipInfo:this.cards.map((function(t){return t.flipped?1:0})),gameNumber:this.gameNumber};return this.gameDate&&(t.gameDate=this.gameDate),this.stocks&&(t.stockRedeals=this.stocks.map((function(t){return""+t._redealCount}))),t},l.prototype.loadGameState=function(e,i){var o=e.containers,n=this.cards;this.gameNumber=e.gameNumber,this.cards.forEach((function(t,i){t.directFlip(!!e.flipInfo[i])}));var a=t.gameSettings.useCSS3?100:0;setTimeout(function(){this.containers.forEach((function(e,i){e.ini(),o[i].forEach((function(t){e.takeIn(n[t])})),e instanceof t.containers.Foundation&&(h.gameScore+=5*o[i].length),e.pauseAnimateCard=!t.gameSettings.useCSS3,e.adjustPos(),e.pauseAnimateCard=null})),e.stockRedeals&&this.stocks.forEach((function(t,i){t.setRedealCount(parseFloat(e.stockRedeals[i]))})),this.cards.forEach((function(e){e.updateShadow(),e.animating=!1,t.gameSettings.useCSS3||e.adjustPos(0,0)})),i()}.bind(this),a)},l.prototype.getSpecialHint=function(){return null},l.prototype.clickAdjust=function(t){},l.prototype.getMoveWhenDrop=function(t,e){return[{cards:t,des:e}]}}(),function(){"use strict";var i=t.GameBase.prototype,o=t.games.Klondike=function(e){this.setUpCardData("Klondike."+e);var i=t.containers.Tableau;this.config={cards:52,flip:{type:"last",num:1,containers:["tableaus"]},tableaus:[1,2,3,4,5,6,7],foundations:[0,0,0,0],wastes:[0],stocks:[24],stockRedealCount:1/0},i.setWithCardAccept("groupable"),i.setMovableCards("sequence_diff_color"),i.setSpaceAccept("king"),t.containers.Foundation.setMode("normal"),t.containers.Stock.setEmptyCheck(null);var o=1,n="normal";"3"===e?(o=3,n="3"):"twodecks"===e?(this.config.cards=104,this.config.tableaus=[1,2,3,4,5,6,7,8,9],this.config.foundations=[0,0,0,0,0,0,0,0],this.config.stocks[0]=59):"easthaven"===e?(i.setSpaceAccept("any"),this.config.tableaus=[3,3,3,3,3,3,3],this.config.stocks[0]=31,this.config.wastes.length=0,this.config.stockRedealCount=0):"fortythieves"===e?(this.config.cards=104,this.config.tableaus=[4,4,4,4,4,4,4,4,4,4],this.config.foundations=[0,0,0,0,0,0,0,0],this.config.stocks[0]=64,i.setMovableCards("single"),i.setSpaceAccept("any"),i.setWithCardAccept("suit"),this.config.flip.num=4,this.config.stockRedealCount=0):"yukon"===e?(this.config.tableaus=[1,6,7,8,9,10,11],this.config.flip.num=5,this.config.wastes.length=0,this.config.stocks.length=0):"diplomat"===e&&(this.config.cards=104,this.config.tableaus=[4,4,4,4,4,4,4,4],this.config.foundations=[0,0,0,0,0,0,0,0],this.config.stocks[0]=72,this.config.flip.num=4,this.wastePosition="bottom",this.config.stockRedealCount=0,i.setWithCardAccept("sequence"),i.setMovableCards("single"),i.setSpaceAccept("any")),this.config.cards>52?t.config.offsetStockDiv=4:t.config.offsetStockDiv=2,this.columns=this.config.tableaus.length,this.rows=3,t.GameBase.call(this),this.automovePrefs=[this.foundations,this.tableaus],this.stocks.length&&(this.stocks[0].setLayout("normal"),this.stocks[0].lastCardUp=!1),"fortythieves"===e?(this.stocks[0].target=this.wastes[0],this.stocks[0].ejectCards=o,this.wastes[0].setLayout(n)):"easthaven"===e?(this.stocks[0].target=this.tableaus,this.stocks[0].ejectCards=o):this.stocks.length&&(this.stocks[0].target=this.wastes[0],this.stocks[0].ejectCards=o,this.wastes[0].setLayout(n))};o.prototype=Object.create(i),o.prototype.getAutomoveDes=function(o){return"diplomat"===t.curGame[1]?[].concat.apply([],this.automovePrefs).filter(function(t){return this.testAccept(o,t)}.bind(this)).reduce(e.getBestMove(o),null):i.getAutomoveDes.apply(this,arguments)},o.prototype.hoverable=function(e){return i.hoverable.call(this,e)||e.ownedBy instanceof t.containers.Stock&&e===e.ownedBy.lastCard()},o.prototype.considerHints=function(e,i,o){return!(e instanceof t.containers.Foundation||o&&e instanceof t.containers.Tableau&&i instanceof t.containers.Tableau&&0===i.cards.length&&e.cards.length===o)},o.prototype.updateState=function(){this.stocks.length&&this.stocks[0].targetChanged()},o.prototype.getSpecialHint=function(){return this.stocks[0].cards.length>0||this.stocks[0].redealable()?{to:this.stocks[0]}:null},o.prototype.adjustLayout=function(t,e){function o(){var t=navigator.userAgent.toLowerCase();return t.match(/iphone/)?"iPhone":t.match(/android/)&&t.match(/mobile/)?"android":t.match(/windows/)&&t.match(/phone/)?"windows":null}var n=i.adjustLayout.call(this,t,e);this.initx=n.margin+(o()?n.left:10),this.inity=Math.floor(n.cheight/8);var a=2*n.margin+n.cwidth,s=this.tableaus.length,r=this.foundations.length,c=a*s,u=this.stocks.length+this.wastes.length,h=c-a*u,d=Math.min(Math.floor((h/r-n.cwidth)/2),n.margin),l=n.cwidth+2*d,f=2*d-n.margin+(o()?n.left:10)+c-l*r,p=0;return"bottom"===this.wastePosition&&(a=Math.floor(c/(s+1)),p=a,l=a,d=n.margin=Math.floor((a-n.cwidth)/2),f=this.initx+a),this.tableaus.forEach(function(t,e){t.setPos(p+this.initx+a*e,n.top+25)}.bind(this)),this.foundations.forEach(function(t,e){t.setPos(f+l*e,this.inity)}.bind(this)),this.stocks.length&&this.stocks[0].setPos(this.initx,this.inity),this.wastes.length&&("bottom"===this.wastePosition?this.wastes[0].setPos(this.initx,n.top):this.wastes[0].setPos(20+n.cwidth+3*n.margin-(s>8?n.cwidth/10:0),this.inity)),n},o.prototype.isLost=function(t){return 0===t.length&&this.stocks.length&&0===this.stocks[0].cards.length&&!this.stocks[0].redealable()}}(),function(){"use strict";var i=t.localisation.getL;$.fn.stop=$.fn.transitionStop,$.cssEase.easeOutCubic="cubic-bezier(0.215, 0.610, 0.355, 1.000)",$.cssEase.easeOutCirc="cubic-bezier(0.075, 0.820, 0.165, 1.000)",$.cssEase.easeOutBack="cubic-bezier(0,1,0.5,1.3)",$.cssEase.easeInCubic=$.cssEase.in,$.cssEase.linear="linear";var o=t.game,n=t.ui,a=t.config,s=t.resources,r=t.gameSettings,c=t.cardData,u=function(){if($("#game-ui").css("minHeight",""),a.isApp)$(".barLeft").css("left","10px");else{var e=parseInt($("#game-ui").css("left")),i=$("._slot:visible").length;"true"==t.data.responsiveAds?window.innerWidth-i*e!=parseInt($("#game-ui").css("width"))&&$("#game-ui").css("width",window.innerWidth-i*e+"px"):($("#game-ui").css("width",window.innerWidth-i*e+"px"),$("#playArea").css("left","40px").css("right","40px"),window.innerWidth<=1280&&$("#topBar").css("left","50px"),window.innerWidth<=1024&&$("#playArea").css("right","20px"))}};t.ready=function(){t.ui.jqmLoader=$("#jqm-loader").loader(),$("#game-ui").css("minHeight",""),a.isApp&&($("#game-ui").css("left","0px"),$("#game-ui").css("width","100%")),"windows"==a.isApp&&$("#game-ui").css("background-color",t.data.backgroundColor),t.data.projectType||alert("tcgsol.data.projectType == null"),a.isMobilePhone&&$("body").addClass("mobilePhone"),function(){var e=$.Deferred();return uniStore==t.cachedChromeStorage?(e.resolve(),e):(uniStore.getVersion(),"1"!==t.config.version?(r.ini(),e.resolve()):e.resolve(),e)}().done((function(){uniStore.loadToCache((function(){uniStore.setVersion(t.config.version),r.lastGame?r.load():r.ini(),a.isApp||"solitaire-web-app"!=t.data.projectType?$("#select-lang-container").remove():(t.localisation.populate($("#select-lang")),$("#select-lang").val(t.gameSettings.language).selectmenu("refresh").on("change",(function(){t.gameSettings.language=this.value,t.localisation.load(this.value).then((function(){t.achievements.updateAchievements()}))}))),s.setCardset(r.cardset),s.setCardback(r.cardback),s.setBackground(r.background),a.isApp?t.delayedReady():setTimeout(t.delayedReady,1),o.onGamewon=function(){n.modal.hide(),t.winAnimations.stop(),c.gameScore=0;var e=t.data.defaultGame.split("-");t.data.gamesList[e[0]][e[1]],n.showWin();try{showXpAds()}catch(t){}}}))}))},t.delayedReady=function(){function h(){d(),v.popup("close")}function d(){clearTimeout(g),y.off("click",h)}!a.isApp&&a.isiOS7&&window.innerHeight<window.innerWidth&&$("html").addClass("ios7"),a.isApp&&a.isiOS7&&$("html").addClass("ios7-app"),window.scrollTo(0,0),o.setGameDom($("#playArea")),$(window).resize((function(){o.scheduleUpdateDisplay(100)})),a.isChromePackagedApp||$(window).on("unload",(function(){o.save()})),"windows"!=a.isApp&&n.loadGames($("#group-games")),t.progressBar(s.download(),t.audio.getPromise(),s.doneExtraImages()).done((function(){"windows"===a.isApp&&$(document).one("game:change",(function(){setTimeout(t.winAppSplash.hide,800)}));var e=t.gameSettings.soundOn;t.audio.toggle(!1),o.loadPromise.then((function(){$(".progress-bar").replaceWith(""),$("#darkenArea").appendTo("#game-ui"),$("body").removeClass("loading"),t.audio.toggle(e)})),n.loading.hide(),window.cordova&&navigator.splashscreen.hide(),t.startPlaying();var i=t.data.defaultGame.split("-");t.data.gamesList[i[0]][i[1]]})),s.updateImages(),$.mobile.defaultDialogTransition="none",$.mobile.defaultPageTransition="none",$.mobile.buttonMarkup.hoverDelay=0,$.browser.chrome&&$(".only-chrome").css("display","block"),$(window).on("resize",(function(){!a.isApp&&a.isiOS7&&window.innerHeight<window.innerWidth?$("html").addClass("ios7"):$("html").removeClass("ios7"),window.scrollTo(0,0),u(),parseInt($("#main-ui-popup").css("left"),10)>-1e3&&n.adjustGameSelector()})),u();for(var l=["x","y","scaleX","scaleY"],f=0;f<4;f++)!function(t){$.fx.step[t]=function(e){$.cssHooks[t].set(e.elem,e.now+e.unit)}}(l[f]);var p;r.useCSS3?$.fn.stop=$.fn.transitionStop:($.fn.transition=$.fn.animate,$(".bottomButton").css("box-shadow","none"),t.containers.Card.prototype.flip=t.containers.Card.prototype.directFlip,$.fx.step.boxShadow=function(){},$.cssHooks.boxShadow={get:function(){return null},set:function(){}},$.fx.step.ieBoxShadow=function(t){t.elem.style.boxShadow=t.end},$.cssHooks.ieBoxShadow={get:function(t){return t.style.boxShadow},set:function(t,e){t.style.boxShadow=e}}),($.browser.msie&&"ARM"===(navigator.cpuClass||"").toUpperCase()||!r.useCSS3)&&($("#effect-toggle").remove(),$("#swing-item").remove(),r.cardEffect=!1,r._0$=!1),$.mobile.zoom.disable(),$(window).off("orientationchange.iosorientationfix").off("devicemotion.iosorientationfix"),a.isiOS?$("#expand-item").remove():$("#game-ui").css("overflow","hidden"),$(document).bind("contextmenu",(function(t){t.preventDefault()})),document.onselectstart=function(){return!1},p=a.isiOS?"touchend":"click",$("#main-nav").find("li").on(p,(function(){var t=$(this);$("#main-groups").children().removeClass("current"),$("#group-"+t.html().toLowerCase()).addClass("current"),t.parent().children().removeClass("current"),t.addClass("current")})),$("#new-game-but").on(p,(function(){o._cur?n.showNewGameDialog():n.showPopup("main-ui")})),$("#undo-but").on(p,(function(){o.applyUndo()})),$("#screen-plus").on(p,(function(){})),$("#dummy-update").on(p,(function(){t.game.updateDisplay()})),$("#screen-minus").on(p,(function(){})),$("#redo-but").on(p,(function(){o.applyRedo()})),$("#hint-but").on(p,(function(){o.showHint()}));var g,m=$("#autoplay-but"),v=$("#autoplay-status"),y=$(document);m.on(p,(function(t){t.stopPropagation(),d(),r.autoplayEnabled=!r.autoplayEnabled;var e=i(r.autoplayEnabled?"on":"off"),o=i("autoplay-settings")+": <b>"+e+"</b>";v.html("<p>"+o+"</p>").popup("open"),y.on("click",h),g=setTimeout(h,3e3)})),$("#sound-but").on(p,(function(t){t.stopPropagation(),d(),controlSound(),r.soundOn=!r.soundOn}));var w,S,b=$("#settings-dialog").add("#appearance-dialog").add("#options-dialog").add("#advanced-options-dialog").add("#hiscores-dialog").add("#main-ui").add("#clear-stats-dialog").add("#about-dialog").add("#win-dialog").add("#new-game-dialog").add("#stats-dialog").add("#achievements-dialog").add("#score-buttons-dialog").add("#info-dialog").add("#rateapp-dialog").add("#more-games-dialog").add("#game-calendar-dialog").add("#freecell-of-day-stats-dialog").add("#game-number-dialog").add("#more-buttons-dialog");a.isMobilePhone?(window.location.hash="",b.addClass("onphone").addClass("phone-popup").appendTo("body").page(),w="pagebeforeshow",S="pagehide",$("#playArea").on("vclick",(function(t){"playArea"===t.target.id&&$(".bottomBar").toggleClass("hidden")}))):(b.popup({history:!1}),w="popupafteropen",S="popupafterclose"),$(".about-but").on(p,(function(){t.cardData.gamePlayCount<10&&$("#rateReviewAboutWin").css("display","none"),n.showPopup("about-dialog")})),$(document).on(p,"[data-open]",(function(t){n.showPopup(this.getAttribute("data-open"))})),$(document).on("click","[data-back-to]",(function(){var e=this.getAttribute("data-back-to");setTimeout((function(){t.ui.showPopup(e)}))})),$(".back-to-game").click((function(){setTimeout((function(){$(".back-to-game").removeClass("ui-btn-active ui-focus")}),700),n.backToGame()}));var C=$("#advanced-options-dialog");C.on(w,(function(){C.find("select").slider("refresh")})),$("#appearance-dialog").on(w,(function(){$("#cardsets-tab").attr("checked",!0),$(this).find(".single-list").hide(),$("#cardsets-list").show(),$(this).find("input[type=radio]").checkboxradio("refresh")})),$(".single-tab").click((function(){$(this).parentsUntil("fieldset").parent().parent().find(".single-list").hide(),$("#"+this.id.split("-")[0]+"-list").show()})),$(".start-new").click((function(){o.start(),$.mobile.changePage("#game-ui",{reverse:!0,changeHash:!1})})),$(".select-game").on(p,(function(){n.showGameSelector()})),$(".game-calendar").click((function(){t.freecellOfTheWeek.open()})),$(".play-game-number").click((function(){var i=parseInt($(".game-number-input").val(),10);e.isInt($(".game-number-input").val())&&i>=1&&i<=9999999?(t.game.nextGameNumber=i,o.start(),$.mobile.changePage("#game-ui",{reverse:!0,changeHash:!1})):n.showPopup("bad-game-number-dialog")})),$(".restart").click((function(){o.restart(),$.mobile.changePage("#game-ui",{reverse:!0,changeHash:!1})})),$("#stats-reset-button").click((function(){c.clearInfo(),n.showPopup("stats-dialog")})),$("#options-dialog").on(S,(function(){o.autoFill()})),$("#expand-option").on("change",(function(){r.expandCard="on"===$(this).val()})),$("#swing-option").on("change",(function(){r._0$="on"===$(this).val()})),$("#effect-option").on("change",(function(){r.cardEffect="on"===$(this).val()})),$("#css3-option").on("change",(function(){r.useCSS3="on"==$(this).val(),a.isApp?n.gameAlert(i("reload-title"),i("reload-content-app")):n.gameAlert(i("reload-title"),i("reload-content"),(function(){location.reload()}))})),$("#sound-option").on("change",(function(){})),$("#show-hi-scores").on("change",(function(){r.showHiScores="on"===$(this).val()})),$("#player-name").on("change",(function(){c.playerName=$.trim(this.value)})),$("#autoplay-option input[type='radio']").on("change",(function(){r.autoplayMode=$(this).val()})),$("#moves-toggle").on("change",(function(){r._1$=this.checked})),$("#score-toggle").on("change",(function(){r.showScore=this.checked})),$("#time-toggle").on("change",(function(){r.showTime=this.checked}));var k=document.createElement("div");$(k).css({margin:"0 auto",width:430,height:220}),$('#stats-dialog>div[data-role="content"]').prepend(k),$("#stats-dialog").on(w,(function(){o.playing()||t[1].data++,n.raphPie(k,t)}));var x=i("hint-key").length>1?"":i("hint-key");$(document).bind("","ctrl+z",(function(){o.applyUndo()})).bind("","ctrl+y",(function(){o.applyRedo()})).bind("",x,(function(){o.showHint()})),uniStore.isCached&&(o.onMoveOccurred=o.save)},t.localisation.load("en").then((function(){t.config.isApp||t.ready()}))}()}();