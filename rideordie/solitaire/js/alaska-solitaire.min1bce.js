function controlSound(){var t=$("#sound-but")[0].children[0];$(t).hasClass("icon-volume-up")?($(t).removeClass("icon-volume-up"),$(t).addClass("icon-volume-off"),global_sound=!1):($(t).addClass("icon-volume-up"),$(t).removeClass("icon-volume-off"),global_sound=!0)}$(document).ready((function(){controlSound()})),$("#sound-but").bind("click",(function(t){t.preventDefault(),"icon-volume-up"==this.children[0].className?($(this.children[0]).removeClass("icon-volume-up"),$(this.children[0]).addClass("icon-volume-off"),global_sound=!1):($(this.children[0]).removeClass("icon-volume-off"),$(this.children[0]).addClass("icon-volume-up"),global_sound=!0)})),function(){var t={};!function(){"use strict";t.containers={},t.lang={};var i=t.games={};t.startGame=function(e,n){t.curGame=[e,n],t.gameSettings.lastGame=e+"-"+n,t.game.empty(),t.game.setCurrentGame(new(i[e.capitalize()])(n)),t.ui.updateWithGame(e,n),t.game.play(),$(document).trigger("game:change",t.curGame)},t.startPlaying=function(){if(t.config.isApp||"true"!=t.data.multiPages){var i=e.parseQuery().game||t.gameSettings.lastGame;if("replaceState"in history&&(history.replaceState("",document.title,location.pathname),$("#game-ui").css("display","block")),i||(i=t.data.defaultGame),i){var n=i.split("-"),o=t.ui.gamesUI[n[0]];o&&o.variation&&o.variation[n[1]]?this.startGame(n[0],n[1]):t.ui.showGameSelector()}else t.winAppSplash&&t.winAppSplash.hide(),t.ui.showGameSelector()}else{var a=/([a-z_]*)\.(html|php)/.exec(window.location);if(a){var s=t.ui.gamesUI;for(var n in a=a[1],s)for(var r in s[n].variation)if(s[n].variation[r].normalizedName==a)return void t.startGame(n,r)}(i=t.data.defaultGame)?(n=i.split("-"),this.startGame(n[0],n[1])):t.ui.showGameSelector()}}}(),t.createCounter=function(t){function e(){o.notify({total:i,count:n})}var i=t||0,n=i,o=$.Deferred();return e(),{decrement:function(){n--,e(),n<=0&&o.resolve()},increment:function(){n++,i++,e()},total:function(){return i},resolve:function(t){o.resolve(t)},reject:function(t){o.reject(t)},promise:function(){return o.promise()}}},t.progressBar=function(){var t=[].slice.call(arguments),e=$.Deferred(),i=$("#progress").css("width",0).show();return $.when.apply($,t).progress((function(){var t=100*function(t){var e=0,i=0;return $.each(t,(function(t,n){e+=n.total,i+=n.count})),(e-i)/e}(arguments);i.css("width",t+"%"),t>=100&&e.resolve()})),e.promise()},function(){"use strict";function i(e){for(var i in a=e,c=t.lang[e])$('*[data-lang-ref="'+i+'"]').text(c[i]);$("*[data-role='collapsible']").collapsible("destroy").collapsible();var n=$("*[data-role='slider']").slider("destroy");$(".ui-slider").remove(),n.slider(),$(window).trigger("language:change")}function n(t){return"pt_pt"===(t=t.toLowerCase().replace("-","_"))||"pt_br"===t?t.substring(0,5):"zh_hans"===t.substring(0,7)?t.substring(0,7):t.substring(0,2)}function o(){return(("windows"===t.config.isApp?Windows.System.UserProfile.GlobalizationPreferences.languages.filter((function(t){return r.hasOwnProperty(n(t))}))[0]:function(){var t=navigator.languages&&navigator.languages[0]||navigator.language||navigator.browserLanguage||navigator.userLanguage;for(var e in r)if(e===n(t))return t}())||"en").toLowerCase()}var a,s=t.localisation={},r=s.language={it:"Italiano",en:"English",es:"Español",fr:"Français",de:"Deutsch",ja:"日本の",nl:"Nederlands",ru:"Русски",sv:"Svenska",pt_br:"Português (Brasil)",pt_pt:"Português (Portugal)",zh_hans:"简体中文",da:"Dansk",fi:"Suomi",nb:"Norsk",cs:"Čeština",el:"Ελληνικά",pl:"Polski",he:"עברית",hi:"हिंदी",hu:"Nyelv"},c=t.lang.en;s.populate=function(t){var e=Object.keys(r);e.sort(),e.forEach((function(e){var i=document.createElement("option");i.value=e,i.innerHTML=r[e],t.append(i)}))},s.load=function(e){var n=$.Deferred();if((e=e.replace("-","_"))in r){if(t.lang[e])return i(e),n.resolve(),n.promise()}else a="en";return window.tcgsol||(window.tcgsol={lang:t.lang||{}}),$.getScript("rideordie/solitaire/js/languages/"+e+".js").then((function(){window.tcgsol!==t&&(t.lang=window.tcgsol.lang,window.tcgsol=null),i(e),n.resolve()})).fail((function(){a="en",n.resolve()})),n.promise()},s.get=function(t){return r[t]},s.getL=function(t){return c[t]?c[t]:(console&&console.log(t),"place holder")},s._=function(e){return c[e]?c[e]:t.lang.en&&t.lang.en[e]?t.lang.en[e]:this.getL(e)},s.date=function(t){if(t&&!t.getTime&&!$.isNumeric(t))return"--/--/----";var i=new Date(t),n=this._("months").split(",").map($.trim),s=this._("date_format");"en-us"===o()&&"en"===a&&(s="{{mmm}} {{dd}}, {{yyyy}}");var r=i.getMonth()+1,c=n[i.getMonth()],h=i.getDate(),u=""+i.getFullYear();return e.template(s,{yy:u.slice(2),yyyy:u,m:r,mm:r<10?"0"+r:r,mmm:c,d:h,dd:h<10?"0"+h:h})},s.getLanguageTag=o,s.getCurrentLang=function(){return a},s.getSystemLang=function(){var e;if("windows"==t.config.isApp){e=o();var i=t.data.projectType;"pyramid"!=i&&"christmas"!=i&&"123freesolitaire"!=i||(e="en")}else e=o(),e="en";return n(e)}}();var e={};!function(){"use strict";$.browser={};for(var i=/ios|iphone|ipad|ipod|android|mobile/i.test(navigator.userAgent),n=[{name:"opera",check:/OPR|Opera/},{name:"msedge",check:/Edge/},{name:"chrome",check:/Chrome/},{name:"safari",check:/Safari/},{name:"mozilla",check:/Firefox/},{name:"msie",check:/MSIE|Trident/}],o=navigator.userAgent,a=0;a<6;a++){var s=n[a];if(s.check.test(o)){$.browser[s.name]=!0,$("html").addClass(s.name),$("html").addClass(i?"mobile-browser":"desktop-browser");break}}String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},window.toStaticHTML||(window.toStaticHTML=function(t){return t}),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),i=this,n=function(){},o=function(){return i.apply(this instanceof n&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,o.prototype=new n,o}),e.dist=function(t,e,i,n){return Math.sqrt((t-i)*(t-i)+(e-n)*(e-n))},e.prefix=function(){for(var t=document.createElement("div"),e=["Moz","Webkit","O","ms"],i=0;i<4;++i)if(e[i]+"Transform"in t.style)return e[i]}(),e.dasherizedPrefix={Moz:"-moz-",Webkit:"-webkit-",O:"-o-",ms:"-ms-","":""}[e.prefix],e.isUWP=function(){var t=Windows.ApplicationModel.Package.current.id.version;return!!(t.major>"2"||(t.major="2")&&t.minor>="7")},e.getBestMove=function(t){return function(e,i){return e?i.cards.length?e.cards.length?i.lastCard().type!==t[0].type?e:e.lastCard().type!==t[0].type?i:e.maxCardOut()>=i.maxCardOut()?e:i:i:e:i}},e.isInt=function(t){return!isNaN(t)&&parseInt(+t)==t&&!isNaN(parseInt(t,10))},e.choose=function(t){return t[Math.floor(Math.random()*t.length)]},e.timeFormat=function(t){if(!$.isNumeric(t))return"--:--";var e=(t=Math.floor(t))%60,i=~~(t/60),n=~~(i/60);return(n?(n>9?n:"0"+n)+":":"")+((i%=60)>9?i:"0"+i%60)+":"+(e>9?e:"0"+e)};var r={each:function(t,i,n){return i.map((function(i){return e.template(t,i)})).join("")},if:function(t,i,n){return i?e.template(t,n):""},unless:function(t,i,n){return i?"":e.template(t,n)},trans:function(i,n,o){return t.localisation._(e.template(i,o))}};e.template=function(t,e){return(t=t.replace(/{{#([^}]+)}}([\s\S]*?){{\/\1}}/g,(function(t,i,n){var o=(i=i.split(" "))[0],a=i[1];return a="this"===a?e:e[a],r[o]?r[o](n,a,e):""}))).replace(/{{([^}]+)}}/g,(function(t,i){return"this"===i?e:void 0===e[i]?"":e[i]}))},e.parseQuery=function(){for(var t=location.search.slice(1).split("&"),e={},i=0;i<t.length;i++){var n=t[i].split("=");e[decodeURI(n[0])]=decodeURI(n[1])}return e}}(),function(){function e(){var t=navigator.userAgent.toLowerCase();return t.match(/iphone/)?"iPhone":t.match(/android/)&&t.match(/mobile/)?"android":t.match(/windows/)&&t.match(/phone/)?"windows":null}var i=t.config={version:1,isFreeApp:!0,flipScale:1.2,ifFreeApp:!0,moveWithAnimate:!1,rateReminderLinkiOS:"ioslink",rateReminderLinkChrome:"chromelink",isChromePackagedApp:!!(window.chrome&&window.chrome.app&&window.chrome.app.window),isDebugging:!1,isRetina:window.devicePixelRatio>1,isMobilePhone:null,useLargeShadow:navigator.userAgent.toLowerCase().match(/safari/)||$.browser.msie,isiOS:!!navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad)/),isiOS7:!!navigator.userAgent.match(/(iPad|iPhone);.*CPU.*OS 7_\d/i),isApp:window.cordova?"phoneGap":window.WinJS?"windows":window.chrome&&window.chrome.app&&window.chrome.app.window?"chrome-packaged":null,easingFunc:"easeOutCubic",undoSpeed:3800,noEnlarging:!1,noDragShadow:!1,noDecoration:!1,animation_time:370,animationSpeed:4800,autoplaySpeed:4100,revertSpeed:4800,automoveSpeed:3800,flipTime:100,minimum_moving_time:200,offsetStockDiv:2,totalL:null!=e()&&e()?3.1:3.2,cL:3};window.navigator.msPointerEnabled?(i.event_touchstart="MSPointerDown",i.event_touchmove="MSPointerMove",i.event_touchend="MSPointerUp"):(i.event_touchstart="touchstart",i.event_touchmove="touchmove",i.event_touchend="touchend"),i.useFluctuating=!1,i.useCardEffects=!1,i.noScaling=!i.isiOS,i.isiOS&&(i.animationSpeed=3800,i.autoplaySpeed=1800,i.revertSpeed=3800,i.automoveSpeed=1800,i.flipTime=200,i.minimum_moving_time=400,i.totalL=8,i.cL=7),$.browser.chrome=/chrome/.test(navigator.userAgent.toLowerCase())}(),function(){"use strict";if(window.chrome&&window.chrome.storage){var e=chrome.storage.local,i={},n={},o=function(t,e){this.key=t,this.val=e};o.prototype.set=function(t){if(this.val=t,this.updating)this.afterUpdate=function(){this.set(t)};else{var i={};i[this.key]=t,this.updating=!0,e.set(i,function(){this.updating=!1,this.afterUpdate&&(this.afterUpdate(),this.afterUpdate=null)}.bind(this))}},o.prototype.get=function(){return this.val},o.prototype.remove=function(){this.val=null,this.updating?this.afterUpdate=this.remove:(this.updating=!0,e.remove(this.key,function(){this.updating=!1,this.afterUpdate&&(this.afterUpdate(),this.afterUpdate=null)}.bind(this)))},t.cachedChromeStorage={isCached:!0,set:function(t,e){e+="",i[t]||(i[t]=new o(t,n[t]||null)),i[t].set(e)},get:function(t){return i[t]||(i[t]=new o(t,n[t]||null)),i[t].get()},remove:function(t){i[t]||(i[t]=new o(t,n[t]||null)),i[t].remove()},loadToCache:function(t){e.get(null,(function(e){n=e,t()}))}}}else t.cachedChromeStorage=null}(),window.uniStore=function(){"use strict";var e={},i=!1;try{localStorage.test,localStorage.test="test"}catch(e){window.Windows&&Windows.Storage&&(i=!0)}if(i){var n=Windows.Storage.ApplicationData.current.localSettings.values;e.get=function(t){return null===n[t]||void 0===n[t]?null:""+n[t]},e.set=function(t,e){null===e?n.remove(t):n[t]=e+""},e.remove=function(t){n.remove(t)}}else t.config.isChromePackagedApp?e=t.cachedChromeStorage:(e.set=function(t,e){localStorage.setItem(t,e)},e.get=function(t){return localStorage.getItem(t)},e.remove=function(t){localStorage.removeItem(t)});return e.loadToCache||(e.loadToCache=function(t){t()}),e.allKeys=["solitairen.data.version","solitairen.lastgame"],e.getVersion=function(){var i=e.get("solitairen.data.version");return i?parseInt(i,10):e.get("solitairen.lastgame")?0:t.config.version},e.getInt=function(t){var e=parseInt(this.get(t),10);return isNaN(e)?0:e},e.setVersion=function(t){return e.set("solitairen.data.version",t)},e.useMemStore=function(){var t={};e.set=function(e,i){t[e]=i+""},e.get=function(e){return t[e]},e.remove=function(e){delete t[e]}},e}(),function(){"use strict";t.gameSettings={allKeys:["solitairen.solitaire.language","solitairen.solitaire.soundOn","solitairen.solitaire.swingCard1","solitairen.solitaire.cardEffect","solitairen.solitaire.useCSS3","solitairen.solitaire.showMoves","solitairen.solitaire.showScore","solitairen.solitaire.showTime","solitairen.solitaire.autoplayMode","solitairen.solitaire.background","solitairen.solitaire.cardback","solitairen.solitaire.cardset","solitairen.solitaire.lastgame"],load:function(){this.updateDefaults(),this.soundOn=this.soundOn,this.showHiScores=this.showHiScores,this.showTime=this.showTime,this.showScore=this.showScore,this._1$=this._1$,this.autoplayEnabled=1==localStorage.getItem("auto-pl"),this.autoplayMode=uniStore.get(this.prefix+".autoplayMode"),this._0$?this._0$=this._0$:this._0$=t.config.useFluctuating,null===this.cardEffect?this.cardEffect=t.config.useCardEffects:this.cardEffect=this.cardEffect,this.useCSS3=this.useCSS3,this.background=this.background,this.cardback=this.cardback,this.cardset=this.cardset},ini:function(){this.autoplayMode="s",this.autoplayEnabled=1==localStorage.getItem("auto-pl"),this.showTime=!0,this.showScore=!0,this._1$=!0,this._0$=t.config.useFluctuating,this.cardEffect=t.config.useCardEffects,this.soundOn=0,this.showHiScores=!1,this.background=t.data.defaultBackground,this.cardback=t.data.defaultCardback,this.cardset=t.data.defaultCardset,this.useCSS3=!$.browser.msie&&"windows"!==t.config.isApp||navigator.cpuClass&&"ARM"===navigator.cpuClass.toUpperCase(),this.updateDefaults()},updateDefaults:function(){this.newDefaults.forEach(function(t){uniStore.get(this.prefix+"."+t.updated)||(this[t.key]=t.value,uniStore.set(this.prefix+"."+t.updated,!0))}.bind(this))},newDefaults:[{updated:"useCSS3Update",key:"useCSS3",value:!$.browser.msie&&"windows"!==t.config.isApp||navigator.cpuClass&&"ARM"===navigator.cpuClass.toUpperCase()}],prefix:"solitairen.solitaire",_autoplayMode:"s"},Object.defineProperties(t.gameSettings,{language:{get:function(){if(t.config.isApp)return uniStore.get(this.prefix+".language")||t.localisation.getSystemLang()||"en";var e=[uniStore.get(this.prefix+".language")||"en",location.hostname.split(".").pop(),location.pathname.split("/")[1],t.localisation.getSystemLang(),"en"];return $.grep(e,(function(e){return e=e.replace("-","_"),t.localisation.language.hasOwnProperty(e)}))[0]},set:function(t){uniStore.set(this.prefix+".language",t)}},soundOn:{get:function(){return"true"===uniStore.get(this.prefix+".soundOn")},set:function(e){t.audio.toggle(e),uniStore.set(this.prefix+".soundOn",e),e?$("#sound-option").val("on"):$("#sound-option").val("off"),$("#sound-option").slider("refresh"),$("#sound-but").removeClass("volume-off").addClass(e?"":"volume-off")}},showHiScores:{get:function(){return"false"!==uniStore.get(this.prefix+".showHiScores")},set:function(t){uniStore.set(this.prefix+".showHiScores",t),$("#show-hi-scores").val(t?"on":"off").slider("refresh")}},_0$:{get:function(){return uniStore.get(this.prefix+".swingCard1")},set:function(e){uniStore.set(this.prefix+".swingCard1",e),!0===e||"true"==e?(t.game.setMovingSwinging(!0),$("#swing-option").val("on").slider("refresh")):(t.game.setMovingSwinging(!1),$("#swing-option").val("off").slider("refresh"))}},cardEffect:{get:function(){return uniStore.get(this.prefix+".cardEffect")},set:function(e){uniStore.set(this.prefix+".cardEffect",e),!0===e||"true"==e?(t.game.setCardEffect(!0),$("#effect-option").val("on").slider("refresh")):(t.game.setCardEffect(!1),$("#effect-option").val("off").slider("refresh"))}},useCSS3:{get:function(){return null===uniStore.get(this.prefix+".useCSS3")?(uniStore.set(this.prefix+".useCSS3",!0),!0):"true"==uniStore.get(this.prefix+".useCSS3")},set:function(t){uniStore.set(this.prefix+".useCSS3",t),!0===t||"true"==t?$("#css3-option").val("on").slider("refresh"):$("#css3-option").val("off").slider("refresh")}},_1$:{get:function(){return"true"===uniStore.get(this.prefix+".showMoves")},set:function(t){t?($("#moves-toggle").attr("checked",!0),$("#display-moves").show(),uniStore.set(this.prefix+".showMoves",!0)):($("#moves-toggle").attr("checked",!1),uniStore.set(this.prefix+".showMoves",!1),$("#display-moves").hide()),$("#moves-toggle").checkboxradio("refresh")}},showScore:{get:function(){return"true"===uniStore.get(this.prefix+".showScore")},set:function(t){t?($("#score-toggle").attr("checked",!0),$("#display-score").show(),uniStore.set(this.prefix+".showScore",!0)):($("#score-toggle").attr("checked",!1),uniStore.set(this.prefix+".showScore",!1),$("#display-score").hide()),$("#score-toggle").checkboxradio("refresh")}},showTime:{get:function(){return"true"===uniStore.get(this.prefix+".showTime")},set:function(t){t?($("#time-toggle").attr("checked",!0),$("#display-time").show(),uniStore.set(this.prefix+".showTime",!0)):($("#time-toggle").attr("checked",!1),uniStore.set(this.prefix+".showTime",!1),$("#display-time").hide()),$("#time-toggle").checkboxradio("refresh")}},autoplayEnabled:{get:function(){var t=this.prefix+".autoplayEnabled",e=(uniStore.get(t),1==localStorage.getItem("auto-pl")?"true":"false");return"true"===e||null===e},set:function(e){e="true"===e||!0===e,$("#autoplay-but").removeClass("autoplay-off").addClass(e?"":"autoplay-off");var i=this.prefix+".autoplayEnabled";localStorage.setItem("auto-pl",1==e?1:0),uniStore.set(i,e+""),e&&t.curGame&&t.game.autoFill()}},autoplayMode:{get:function(){return"n"===this._autoplayMode?"s":this._autoplayMode},set:function(t){"n"===t&&(t="s"),$("#autoplay-but").removeClass("disabled").addClass("disabled"===t?"disabled":""),"disabled"===t?(this._autoplayMode=t,$("#autoplay-option").find("input[value='n']").attr("checked",!0),$("#autoplay-option").find("input[type='radio']").checkboxradio("disable").checkboxradio("refresh")):"enabled"===t?this.autoplayMode=uniStore.get(this.prefix+".autoplayMode"):(this._autoplayMode=t,uniStore.set(this.prefix+".autoplayMode",t),$("#autoplay-option").find("input[value='"+t+"']").attr("checked",!0),$("#autoplay-option").find("input[type='radio']").checkboxradio("enable").checkboxradio("refresh"))}},background:{get:function(){var e=uniStore.get(this.prefix+".background");return e in t.data.gameBackgrounds||(uniStore.set(this.prefix+".background",t.data.defaultBackground),e=t.data.defaultBackground),e},set:function(t){uniStore.set(this.prefix+".background",t),$("#backgrounds-list>div>.ui-radio-on").removeClass("ui-btn-active").removeClass("ui-radio-on"),$('#backgrounds-list>div>div[data-backgroundname="'+t+'"]').addClass("ui-btn-active").addClass("ui-radio-on")}},cardback:{get:function(){var e=uniStore.get(this.prefix+".cardback");return e in t.data.cardBacks||(uniStore.set(this.prefix+".cardback",t.data.defaultCardback),e=t.data.defaultCardback),e},set:function(t){uniStore.set(this.prefix+".cardback",t),$("#cardbacks-list>div>.ui-radio-on").removeClass("ui-btn-active").removeClass("ui-radio-on"),$('#cardbacks-list>div>div[data-cardbackname="'+t+'"]').addClass("ui-btn-active").addClass("ui-radio-on")}},cardset:{get:function(){var e=uniStore.get(this.prefix+".cardset");return e in t.data.cardSets||(uniStore.set(this.prefix+".cardset",t.data.defaultCardset),e=t.data.defaultCardset),e},set:function(t){uniStore.set(this.prefix+".cardset",t),$("#cardsets-list>div>.ui-radio-on").removeClass("ui-btn-active").removeClass("ui-radio-on"),$('#cardsets-list>div>div[data-cardsetname="'+t+'"]').addClass("ui-btn-active").addClass("ui-radio-on")}},lastGame:{get:function(){return uniStore.get(this.prefix+".lastgame")},set:function(t){uniStore.set(this.prefix+".lastgame",t)}}})}(),function(){"use strict";function i(t,e){var i=e.score-t.score;return 0!==i?i:t.time-e.time}var n=t.localisation.getL,o=e.timeFormat,a=t.cardData={_time:0,_score:0,_movesCount:0,prefix:"",setName:function(t){this.prefix="solitairen.solitaire."+t,null===uniStore.get(this.prefix+".firstTime")&&this.ini()},keys:[".firstTime",".gamePlayCount",".gameWinCount",".currentStreak",".currentStreakIsWinning",".highScores",".longestLosingStreak",".longestWinningStreak",".lastGame",".lastGame.time",".lastGame",".movesCount"],getAllKeys:function(){var t=this.prefix;return this.keys.map((function(e){return t+e}))}};Object.defineProperties(a,{time:{get:function(){return this._time},set:function(t){this._time=t,$("#display-time>span.display-content").html(o(t))}},movesCount:{get:function(){return this._movesCount},set:function(t){this._movesCount=t,$("#display-moves>span.display-content").html(t)}},gameScore:{get:function(){return this._score},set:function(t){var e,i,n=uniStore.getInt(this.prefix+".gameWinCount")||0;this._score=t,$("#display-score>span.display-content").html(n),i="rideordie/solitaire/images/awards/",(e=n)>=1&&e<=5?($("#awards").attr("src",i+e+".png"),$("#awards").show()):e>=6&&e<=9?($("#awards").attr("src",i+6+".png"),$("#awards").show()):e>=10&&e<=199?($("#awards").attr("src",i+10*Math.floor(e/10)+".png"),$("#awards").show()):e>=200&&e<=9999?($("#awards").attr("src",i+100*Math.floor(e/100)+".png"),$("#awards").show()):e>=1e4&&e<=79999?($("#awards").attr("src",i+1e3*Math.floor(e/1e3)+".png"),$("#awards").show()):e>=8e4&&e<=99999?($("#awards").attr("src",i+1e4*Math.floor(e/1e4)+".png"),$("#awards").show()):e>=1e5&&($("#awards").attr("src",i+1e5+".png"),$("#awards").show())}},gamePlayCount:{get:function(){return uniStore.getInt(this.prefix+".gamePlayCount")||0},set:function(t){uniStore.set(this.prefix+".gamePlayCount",t)}},gameWinCount:{get:function(){return uniStore.getInt(this.prefix+".gameWinCount")||0},set:function(e){uniStore.set(this.prefix+".gameWinCount",e),t.achievements&&t.achievements.updateAchievements()}},currentStreak:{get:function(){return uniStore.getInt(this.prefix+".currentStreak")||0},set:function(t){var e;isNaN(t)&&(t=0),uniStore.set(this.prefix+".currentStreak",t),this.currentStreakIsWinning?t>this.longestWinningStreak&&(this.longestWinningStreak=t):t>this.longestLosingStreak&&(this.longestLosingStreak=t),e=this.currentStreakIsWinning?t>1?" "+n("wins"):" "+n("win"):t>1?" "+n("losses"):" "+n("loss"),$("#display-currentStreak").html(t+e)}},currentStreakIsWinning:{get:function(){return"true"==uniStore.get(this.prefix+".currentStreakIsWinning")},set:function(t){var e;uniStore.set(this.prefix+".currentStreakIsWinning",!!t),e=t?this.currentStreak>1?" "+n("wins"):" "+n("win"):this.currentStreak>1?" "+n("losses"):" "+n("loss"),$("#display-currentStreak").html(this.currentStreak+e)}},longestLosingStreak:{get:function(){return uniStore.getInt(this.prefix+".longestLosingStreak")},set:function(t){isNaN(t)&&(t=0),uniStore.set(this.prefix+".longestLosingStreak",t),$("#display-longestLosingStreak").html(t)}},longestWinningStreak:{get:function(){return uniStore.getInt(this.prefix+".longestWinningStreak")},set:function(t){isNaN(t)&&(t=0),uniStore.set(this.prefix+".longestWinningStreak",t),$("#display-longestWinningStreak").html(t)}},highScores:{get:function(){var t=uniStore.get(this.prefix+".highScores");return t?JSON.parse(t):[]},set:function(e){if(e){for(var i="",n=0;n<10;n++){var a=e[n]||{},s="hiscore-"+(n+1);a.isNew&&(s+=" latest-hiscore");var r=a.date;r&&(r=t.localisation.date(new Date(r))),i+='<tr class="'+s+'"><td>'+[n+1,a.name||"-",a.score||"-",o(a.time),r||"-"].join("</td><td>")+"</td></tr>",delete a.isNew}$("#hiscore-table-body").html(i),uniStore.set(this.prefix+".highScores",JSON.stringify(e))}else uniStore.set(this.prefix+".highScores",JSON.stringify([]))}},playerName:{get:function(){return uniStore.get("solitairen.solitaire.highscore.player.name")||n("player")},set:function(t){(t=t?$.trim(t):t)?($("#player-name").val(t),uniStore.set("solitairen.solitaire.highscore.player.name",t)):$("#player-name").val(n("player"))}},isFirstHighscore:{get:function(){return null===uniStore.get("solitairen.solitaire.highscore.player.name")}}}),a.load=function(){if(!uniStore.get(this.prefix+".lastGame"))return this.playerName="",this.gamePlayCount=this.gamePlayCount,this.gameWinCount=this.gameWinCount,this.currentStreak=this.currentStreak,this.currentStreakIsWinning=this.currentStreakIsWinning,this.longestLosingStreak=this.longestLosingStreak,this.longestWinningStreak=this.longestWinningStreak,this.highScores=this.highScores,!1;try{return this.time=uniStore.getInt(this.prefix+".lastGame.time"),this.lastGame=JSON.parse(uniStore.get(this.prefix+".lastGame")),this.gamePlayCount=this.gamePlayCount,this.gameWinCount=this.gameWinCount,this.playerName="",this.gameScore=0,this.movesCount=uniStore.getInt(this.prefix+".movesCount"),this.currentStreak=this.currentStreak,this.currentStreakIsWinning=this.currentStreakIsWinning,this.longestLosingStreak=this.longestLosingStreak,this.longestWinningStreak=this.longestWinningStreak,this.highScores=this.highScores,!0}catch(t){return console&&console.log(t),this.clearInfo(),!1}},a.reset=function(){uniStore.set(this.prefix+".lastGame",""),this.time=0,this.movesCount=0,this.gameScore=0},a.clearInfo=function(){this.gamePlayCount=t.game.playing()?1:0,this.gameWinCount=0,this.currentStreak=0,this.currentStreakIsWinning=!1,this.longestLosingStreak=0,this.longestWinningStreak=0,this.highScores=[],t.freecellOfTheWeek&&t.freecellOfTheWeek.clearStats()},a.ini=function(){this.clearInfo(),this.gamePlayCount=0,uniStore.set(this.prefix+".firstTime","false")},a.winUpdate=function(){uniStore.set(this.prefix+".lastGame",""),this.gameWinCount++,this.currentStreakIsWinning?this.currentStreak++:(this.currentStreakIsWinning=!0,this.currentStreak=1)},a.addHighScore=function(){var t=this.highScores;t.length>=10&&t.splice(9,1),t.push({name:a.playerName,score:a.gameScore,time:a.time,moves:a.movesCount,date:(new Date).getTime(),isNew:!0}),t.sort(i),this.highScores=t},a.save=function(){uniStore.set(this.prefix+".lastGame",JSON.stringify(this.lastGame)),uniStore.set(this.prefix+".lastGame.time",this.time),uniStore.set(this.prefix+".movesCount",this.movesCount)},$(window).on("language:change",(function(){a.prefix&&(a.highScores=a.highScores),a.currentStreak=a.currentStreak}))}(),t.data={defaultCardset:null==localStorage.getItem("faceCard")?navigator.userAgent.toLowerCase().match(/iphone/)||navigator.userAgent.toLowerCase().match(/android/)&&navigator.userAgent.toLowerCase().match(/mobile/)||navigator.userAgent.toLowerCase().match(/windows/)&&navigator.userAgent.toLowerCase().match(/phone/)?"Kittens":"modern":localStorage.getItem("faceCard"),projectType:"xxx",defaultBackground:"green_felt",cardSets:{modern:"Modern"},gamesList:{klondike:{1:"Klondike",fortythieves:"Forty Thieves",3:"Klondike by Threes",easthaven:"Easthaven",diplomat:"Diplomat",yukon:"Yukon"},golf:{golfeasy:"Golf Easy"},freecell:{freecell:"FreeCell",eightoff:"Eight Off",bakersgame:"Baker's Game",twodecks:"FreeCell Two Decks"},spider:{scorpion:"Scorpion",simplesimon:"Simple Simon",1:"Spider One Suit",2:"Spider Two Suits",4:"Spider Four Suits"},pyramid:{0:"Pyramid Easy"},flowergarden:{flowergarden:"Flower Garden"}},defaultGame:global_game_name,removeAdsButtonDisplay:"false",backgroundColor:"#50A67A",cardBacks:{rhombus_blue:"Rhombus Blue"},defaultCardback:null==localStorage.getItem("backCardNew")?"rhombus_blue":localStorage.getItem("backCardNew"),responsiveAds:"true",gameBackgrounds:{green_felt:"Green Felt"}},t.data.backgroundColor,t.ExtendedSplash=null,function(){"use strict";var e=window.webkitAudioContext||window.mozAudioContext||window.MSAudioContext;if(e){var i=t.webAudio={},n=new e;i.unmuteIOS=function(){i.loadBuffer(i.getPath("card_drop"),(function(t){t.gain=0;var e=n.createBufferSource();e.buffer=t,e.connect(n.destination),e.noteOn(0)}))},i.loadBuffer=function(t,e){var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=function(){n.decodeAudioData(i.response,(function(t){e(t)}))},i.send()};var o=i.Sound=function(t){this.on=!1,this.loaded=!1,this.filename=t,this.source=null,i.loadBuffer(i.getPath(t),function(t){this.loaded=!0,this.buffer=t,i.soundReadyHandler&&i.soundReadyHandler()}.bind(this))};o.prototype.stop=function(){this.on&&this.loaded&&(this.source.noteOff?this.source.noteOff(0):this.source.stop&&this.source.stop(0))},o.prototype.play=function(){if(this.on&&this.loaded){var t=n.createBufferSource();t.buffer=this.buffer,t.connect(n.destination),this.source=t,this.source.noteOn?this.source.noteOn(0):this.source.start&&this.source.start(0)}}}else t.webAudio=null}(),function(){"use strict";var e=t.config,i=$.browser.msie?1:7,n=null,o=!1,a=t.createCounter();if(a.promise().progress((function(){o=!0})),t.webAudio)n=function(e){return a.increment(),new t.webAudio.Sound(e)},t.webAudio.soundReadyHandler=a.decrement,$.browser.opera,t.webAudio.getPath=function(t){return"rideordie/solitaire/sounds/mp3/"+t+".mp3"};else if(e.isApp&&e.isiOS)(n=function(t){this.on=!1,this.filename=t;var e=this;document.addEventListener("deviceready",(function(){LowLatencyAudio.preloadFX(e.filename,"rideordie/solitaire/sounds/aac/"+e.filename+".m4a",(function(){e.on=!0}))}),!1)}).prototype.stop=function(){this.on&&LowLatencyAudio.stop(this.filename)},n.prototype.play=function(){this.on&&LowLatencyAudio.play(this.filename)};else if(!e.isiOS){var s=!0;try{new Audio}catch(e){s=!1}s&&((n=function(t,e){e=e||i,this.on=!0,this.filename=t,this.doms=[];for(var n=0;n<e;n++){var o=new Audio;o.preload="auto",this.doms.push(o),a.increment(),$(o).on("canplay",(function(){a.decrement(),this.pause(),this.volume=1}));var s=document.createElement("source");s.src="rideordie/solitaire/sounds/mp3/"+t+".mp3",s.type="audio/mpeg",o.appendChild(s),(s=document.createElement("source")).src="rideordie/solitaire/sounds/mp3/"+t+".mp3",s.type="audio/mp3",o.appendChild(s),o.volume=0,o.load()}this.hasPlayed=this.doms.map((function(){return!1}))}).prototype.stop=function(){this.doms.forEach((function(t){t.pause(),t.currentTime=0}))},n.prototype.play=function(){if(this.on){var t=this.doms.reduce((function(t,e){return t.currentTime?e.currentTime&&t.currentTime>e.currentTime?t:e:t})),e=this.doms.indexOf(t);this.hasPlayed[e]?(t.pause(),t.currentTime&&(t.currentTime=0),t.play()):(t.play(),this.hasPlayed[e]=!0)}})}n||((n=function(){}).prototype.stop=function(){},n.prototype.play=function(){});var r=t.audio={on:!1};r.loadSounds=function(t){for(var e in this.dict=t,t)t[e]instanceof Array?this[e]=new n(t[e][0],t[e][1]):this[e]=new n(t[e])},r.loadSounds({drop:"card_drop",redeal:["redeal",1],autoplay:"autoplay",undo:"undo",redo:"redo",gamewon:["game_won",1]}),r.toggle=function(t){for(var e in this.on=t,this.dict)this[e].on=t},r.getPromise=function(){return a.promise()},setTimeout((function(){o||a.resolve()}),5e3)}(),function(){"use strict";function e(e){return function(){o.isApp&&t.ui.gameAlert("Error","Resource file not found: "+e+"<br />Please reinstall the App."),console&&console.log(e+" fail to download")}}function i(){var i,n,o=[],a=5e3;if(l&&!r["theme-"+h]){for(a=35e3,i=1;i<14;i++)for(n=0;n<4;n++)o.push("rideordie/solitaire/images/cards/"+h+"/146x198/"+i+"_"+p[n]+".webp");["foundation","redeal","reserve","stop","tableau"].forEach((function(t){o.push("rideordie/solitaire/images/spots/146x198/"+t+"_spot.webp")}))}d&&!r["back-"+c]&&o.push("rideordie/solitaire/images/backs/146x198/"+c+".webp"),f&&!r["background-"+u]&&o.push("rideordie/solitaire/images/backgrounds/1920x1200/"+u+".webp");var s,m=t.createCounter(o.length),v=$("#game-ui");return o.length?t.config.isApp:m.resolve(),g||(s=setTimeout((function(){}),a)),g=!1,m.promise().then((function(){clearTimeout(s),r["theme-"+h]=!0,r["back-"+c]=!0,r["background-"+u]=!0})),o.forEach((function(t){var i=document.createElement("img");i.onerror=e(t),i.src=t,i.onload=function(){m.decrement()},i.style.display="none",v.append(i)})),m}var n=t.resources={},o=t.config,a=[],s=[],r={},c="",h="",u="",d=!1,l=!1,f=!1,p=["s","h","c","d"],g=!0,m=function(t,e){return"rideordie/solitaire/images/cards/"+h+"/146x198/"+e+"_"+p[t]+".webp"};n.clear=function(){a=[],s=[]},n.changeCardImagesToSuits=function(t){var e=13*t;a.forEach((function(t,i){t.raw[0]=Math.floor(i%e/13),t.img.src=m(t.raw[0],t.raw[1])}))},n.getCardImage=function(t,e){var i=document.createElement("img");return i.src=m(t,e),a.push({raw:[t,e],img:i}),i},n.getCardBackImage=function(){var t=document.createElement("img");return t.alt="solitaire-back",t.src="rideordie/solitaire/images/backs/146x198/"+c+".webp",s.push(t),t},n.getTableauImage=function(){var t=document.createElement("img");return t.alt="solitaire-tableau-spot",t.src="rideordie/solitaire/images/spots/146x198/tableau_spot.webp",t},n.getFoundationImage=function(){var t=document.createElement("img");return t.alt="solitaire-foundation-spot",t.src="rideordie/solitaire/images/spots/146x198/foundation_spot.webp",t},n.getReserveImage=function(){var t=document.createElement("img");return t.alt="solitaire-reserve-spot",t.src="rideordie/solitaire/images/spots/146x198/reserve_spot.webp",t},n.getStopSpotImage=function(){var t=document.createElement("img");return t.alt="solitaire-stop-spot",t.src="rideordie/solitaire/images/spots/146x198/stop_spot.webp",t},n.getRedealImage=function(){var t=document.createElement("img");return t.alt="solitaire-redeal-spot",t.src="rideordie/solitaire/images/spots/146x198/redeal_spot.webp",t},n.setCardset=function(t){t!=h&&(h=t,l=!0)},n.setCardback=function(t){t!=c&&(c=t,d=!0)},n.setBackground=function(t){t!=u&&(u=t,f=!0)},n.updateImages=function(e){if(l&&(a.forEach((function(t){t.img.src="rideordie/solitaire/images/cards/"+h+"/146x198/"+t.raw[1]+"_"+p[t.raw[0]]+".webp"})),l=!1),d&&(s.forEach((function(t){t.src="rideordie/solitaire/images/backs/146x198/"+c+".webp"})),d=!1),f){var i="100% 100%";t.data.backgroundSize&&t.data.backgroundSize[u]&&(i=t.data.backgroundSize[u]),$("#game-ui").css({"background-image":"url(rideordie/solitaire/images/backgrounds/1920x1200/"+u+".webp)","background-size":i}),f=!1}},n.download=function(t){var e=i();return t instanceof Function&&e.promise().done(t),e.promise()};var v=t.createCounter();n.getExtraImage=function(t){var e=document.createElement("img");return v.increment(),e.onload=e.onerror=function(){v.decrement()},e.src=t,e},n.doneExtraImages=function(){return 0===v.total()&&v.resolve(),v.promise()}}(),function(){"use strict";function i(){if(navigator.serviceWorker&&!s.isApp){var e=[],i=t.ui.gamesUI;for(var n in t.localisation.getCurrentLang(),i)for(var o in i[n].variation){var a=i[n].variation[o];e.push(a.normalizedName)}e.forEach((function(t){}))}}function n(t,e){if(this.name=t,this.variation={},e){for(var i in e)this.variation[i]={},this.variation[i].displayName=e[i],this.variation[i].ssPath=this.pathPrefix+this.variation[i].displayName.toLowerCase().replace(/ /gi,"_").replace(/'/gi,"")+this.pathSuffix,this.variation[i].normalizedName=this.variation[i].displayName.toLowerCase().replace(/ /gi,"_").replace(/'/gi,"");e[""]&&(this.variation[""]={displayName:e[""],normalizedName:e[""].toLowerCase().replace(/ /gi,"_").replace(/'/gi,"")},this.variation[""].ssPath=this.pathPrefix+this.variation[""].displayName.toLowerCase().replace(/ /gi,"_").replace(/'/gi,"")+this.pathSuffix)}else this.variation[""]={displayName:this.name.capitalize(),ssPath:this.pathPrefix+this.name.toLowerCase()+this.pathSuffix,normalizedName:this.name.toLowerCase().replace(/ /gi,"_").replace(/'/gi,"")}}function o(e){var i=window.location.href,n=document.title;if(window.sidebar&&window.sidebar.addPanel)window.sidebar.addPanel(n,i,"");else{if(window.opera&&window.print)return this.title=n,!0;window.external&&"AddFavorite"in window.external?window.external.AddFavorite(i,n):t.ui.gameAlert(u("bookmark-title"),u("bookmark-message"))}e.preventDefault()}var a=t.ui={},s=t.config,r=t.data,c=t.resources,h=a.gamesUI={},u=t.localisation.getL;a.modal={show:function(){$("#darkenArea").removeClass("hidden")},hide:function(){$("#darkenArea").addClass("hidden")},clickOnce:function(t){$("#darkenArea").on("click",(function(){$("#darkenArea").off("click"),t()}))},click:function(){$("#darkenArea").click()}},a.loading={show:function(){a.modal.show(),$("#loadingBox").show()},hide:function(){$("#loadingBox").hide(),a.modal.hide()}},a.updateWithGame=function(e,i){t.game.normalizedName,$("#gameName,.gameName").html(t.game.name).attr("data-lang-ref","game-"+t.game.normalizedName),$('#rules-dialog>div[data-role="header"]>h1').html(t.game.name);var n=$("#autoplay-but");1==localStorage.getItem("auto-pl")?n.removeClass("autoplay-off"):n.addClass("autoplay-off")},a.raphPie=function(t,e){t.innerHTML="";var i=Raphael(t);i.customAttributes.segment=function(t,e,i,n,o){var a=o-n>180;return((n=n%360*Math.PI/180)-(o=o%360*Math.PI/180))%360==0?{}:{path:[["M",t,e],["l",i*Math.cos(n),i*Math.sin(n)],["A",i,i,0,+a,1,t+i*Math.cos(o),e+i*Math.sin(o)],["z"]]}};var n,o,a,s=i.set(),r=i.circle(140,110,0).attr({stroke:"#fff","stroke-width":4});0===e[1].data&&0===e[0].data?r.attr({fill:"grey"}):0===e[0].data?r.attr({fill:e[1].color}):0===e[1].data&&r.attr({fill:e[0].color}),n=0;for(var c=0,h=e.length;c<h;c++)n+=e[c].data;for(o=0,c=0;c<h;c++){var u=360/n*e[c].data||0;!function(t,r){n>0?(a=void 0===a?(e[t].data/n*100).toFixed(1):(100-a).toFixed(1),e[t].name+=" "+e[t].data+" ("+parseFloat(a)+"%)"):e[t].name+=" 0 (0%)";var c=i.path().attr({segment:[140,110,1,o,o+r],stroke:"#fff",fill:e[t].color});s.push(c),i.text(265,20+25*t,e[t].name).attr({font:'100 15px "Helvetica Neue", Helvetica, "Arial Unicode MS", Arial, sans-serif',fill:"#000","text-anchor":"start"}),i.circle(255,20+25*t,4).attr({stroke:"none",fill:e[t].color})}(c,u),o+=u}r.animate({r:100},1e3,"bounce"),n>0&&function(t){var i,o=0;for(c=0;c<h;c++)i=360/n*e[c].data,s[c].animate({segment:[140,110,99,o,o+=i]},1e3,"bounce"),s[c].angle=o-i/2}()},n.prototype.pathPrefix="rideordie/solitaire/images/solitaire_preview/",n.prototype.pathSuffix=".jpg",n.prototype.pathPrefix+="large/",s.isApp&&s.isRetina&&(n.prototype.pathSuffix="@2x.jpg"),n.prototype.bindEvent=function(){this.doms.forEach(function(e){$(e[1]).on("click",function(e,i){return t.config.isApp||"true"!=t.data.multiPages?function(){a.backToGame(),t.startGame(e,i)}:function(){a.backToGame(),window.location=t.ui.gamesUI[e].variation[i].normalizedName+".html"}}(this.name,e[2]))}.bind(this))},n.prototype.createElements=function(){var e=this.doms=[];for(var i in this.variation){var n=document.createElement("span");n.className="game",s.isMobilePhone&&(n.className+=" onphone");var o="game-"+this.variation[i].normalizedName,a=t.localisation.getL(o),r=document.createElement("span");r.innerHTML=a,r.setAttribute("data-lang-ref",o),$(n).append(r),e.push([this.variation[i].displayName,n,i])}return this.bindEvent(),e};var d=0;if(a.loadGames=function(t){var e=[];for(var o in r.gamesList){var a=new n(o,r.gamesList[o]);h[o]=a;for(var s=a.createElements(),c=0;c<s.length;c++)e.push(s[c])}e.sort((function(t,e){return t[0].localeCompare(e[0])}));var u=document.createDocumentFragment();e.forEach((function(t){u.appendChild(t[1])})),t.append(u),d=e.length,i(),$(window).on("language:change",i)},a.loadAppearanceOptions=function(i){function n(e){return function(){var i=$(this).data(e+"name"),n=t.gameSettings[e];t.gameSettings[e]=i,a.loading.show(),c["set"+e.capitalize()](i),c.download((function(){a.loading.hide(),c.updateImages()})).fail((function(i){a.gameAlert(i,"Please try again later"),a.loading.hide(),t.gameSettings[e]=n,c["set"+e.capitalize()](n),c.download()}))}}function o(t,i,o,a,r){var c=["a","b","c","d","e"],h=0,d=Object.keys(t).sort().map((function(t){var n=c[h];return h=(h+1)%r,e.template(s,{column:n,src:o+t+"."+a,type:i,name:t,title:u(t)})})).join("");$("#"+i+"s-list").html(d).on("click","[data-"+i+"name]",n(i))}var s='<div class="columnButtonWrapper ui-block-{{column}}"><div data-theme="c" class="ui-btn ui-corner-all ui-btn-up-c appearance-asset" data-{{type}}name="{{name}}"><a href="#" data-src="{{src}}"></a><span>{{title}}</span></div></div>';o(r.gameBackgrounds,"background","rideordie/solitaire/images/backgrounds/thumbnails/","jpg",3),o(r.cardSets,"cardset","rideordie/solitaire/images/cards/thumbnails/","png",3),o(r.cardBacks,"cardback","solitaire/images/backs/thumbnails/","png",5)},a.showGameSelector=function(){t.game.loadPromise.resolve(),a.adjustGameSelector(),a.showPopup("main-ui"),t.game.running()?$("#selectSolitaireBack").show():$("#selectSolitaireBack").hide()},a.showNewGameDialog=function(){a.showPopup("new-game-dialog")},a._showHighScoreInput=function(){var i=$.Deferred(),n=e.template(u("hiscore-message"),{gameName:"<b>"+t.game.name+"</b>"});return $(".hiscore-message").show().html(n),t.cardData.isFirstHighscore?($("#highscore-name-input").val(t.cardData.playerName),$(".submit-highscore").one("click",(function(){var t=$.trim($("#highscore-name-input").val());t&&i.resolve(t)})),a.showPopup("new-highscore-dialog"),i.promise()):i.resolve(t.cardData.playerName)},a._showHighScoresList=function(){if(!t.gameSettings.showHiScores)return $.Deferred().resolve();var e=$.Deferred();return a.showPopup("hiscores-dialog"),$("#hiscores-dialog-title").text(u("congratulations")),$("#hiscores-dialog-popup").one("click",".back-to-game",e.resolve),e.promise()},a._showHighScorePopup=function(){return t.game.isHighScore?(t.game.isHighScore=!1,a._showHighScoreInput().then(t.game.onNewHighScore).then(a._showHighScoresList)):$.Deferred().resolve()},a._showUnlockedAchievementPopup=function(){},a._showWinPopup=function(){t.game._cur.gameDate?t.freecellOfTheWeek.congratulations():a.showPopup("win-dialog")},a.showWin=function(){this._showHighScorePopup().then(a._showUnlockedAchievementPopup).then(a._showWinPopup)},a.showRateReminder=function(){a.showPopup("rateapp-dialog"),$("#rateapp-dialog").one("click","button",a.showWin.bind(a))},a.showGameNumberDialog=function(){},a.adjustGameSelector=function(){if(!s.isMobilePhone){var t=3;(d<9||window.innerWidth<1100)&&(t=2),window.innerWidth<900&&(t=1);var e=Math.min(window.innerHeight-170,185*Math.ceil(d/t)+5);$("#games-content").height(e)}var i=$(".game").outerWidth(!0),n=window.innerWidth;n>900&&(n=900),(d<9||window.innerWidth<1100)&&n>2.5*i&&(n=2.5*i),window.innerWidth<900&&(n=1.5*i),$("#group-games").width(Math.floor((n-30)/i)*i),$("#main-ui-popup").css("left",(window.innerWidth-$("#main-ui-popup").width())/2).css("visibility","visible")},a.gameAlert=function(t,e,i){$("#info-title").html(t),$("#info-content").html(e),a.showPopup("info-dialog"),$("#alert-button").off("click"),i&&$("#alert-button").on("click",i)},a.backToGame=function(){$.mobile.changePage("#game-ui")},s.isMobilePhone)a.showPopup=function(t){$("html").addClass("with-phone-popup"),$.mobile.changePage("#"+t)},$(document).on("pagechange",(function(e,i){"game-ui"===i.toPage[0].id&&($("html").removeClass("with-phone-popup"),t.game.updateDisplay())}));else{var l=$(),f=200;a.showPopup=function(t){var e=f;f=0,1==l.length&&l.attr("id")!==t&&(l.popup("close"),e+=100),l=$("#"+t),setTimeout((function(){l.popup("open",{tolerance:1,positionTo:"#game-ui"})}),e)}}a.jqmLoader=null,a.showRules=function(){a.jqmLoader.loader("show"),$.get(function(){var i=t.localisation.getCurrentLang()+"/";return"windows"===s.isApp&&e.isUWP()&&(i=""),"rideordie/solitaire/help/"+i+"rules/"+t.game.normalizedName+".html"}()).done((function(t){document.querySelector('#rules-dialog>div[data-role="content"]').innerHTML=toStaticHTML(t),a.showPopup("rules-dialog"),a.jqmLoader.loader("hide"),t=null})).fail((function(){$.get("rideordie/solitaire/help/en/rules/"+t.game.normalizedName+".html").done((function(t){document.querySelector('#rules-dialog>div[data-role="content"]').innerHTML=toStaticHTML(t),a.showPopup("rules-dialog"),a.jqmLoader.loader("hide"),t=null}))}))},a.createBookmarkButton=function(){var t=$("<a/>").attr({title:u("bookmark-hint"),href:location.href,rel:"sidebar",id:"bookmark-button"}).on("click",o);$("#shareButtonsGroup").prepend(t)},$(document).on("popupbeforeposition",(function(t){if(!s.isMobilePhone){var e=$(t.target).parent(),i=e.find(".ui-content"),n=e.find(".ui-header");e.css("height",""),e.find(".ui-content").css("height","");var o=e.height(),a=i.height();e.css("height",o),e.find(".ui-content").css({height:o-n.height(),"overflow-y":a>window.innerHeight?"auto":"hidden","overflow-x":"hidden"})}})),s.isDebugging&&s.isApp&&(window.onerror=function(t,e,i){return alert("Error Found !!!\n--------------\nError in file: "+e+"\nline number:"+i+"\nMessage:"+t),!0},setTimeout((function(){alert("This is the debugging version!")}),5e3));var p=e.prefix.toLowerCase()+"Hidden";document.addEventListener(e.prefix.toLowerCase()+"visibilitychange",(function(){document[p]?t.game.timer.pause():t.game.timer.start()}),!1)}(),function(){"use strict";var e=navigator.userAgent,i=t.display={};i.cardSep=0,i.cwidth=0,i.cheight=0,i.cardStaticShadow="",i.highlightShadow="",i.hoverShadow="",i.cardStaticShadow="",i.borderRadius=0,i.playAreaHeight=0,i.playAreaWidth=0,i.originalCardWidth=146,i.originalCardHeight=198,i.scaling=1.2,i.dragShadow="10px 10px 10px rgba(0,0,0,0.6)",i.useScale=[/Chrome\/6[23456789]/i].filter((function(t){return t.test(e)})).length>0,i.useScale,i.adjust=function(t){i.cwidth=t.cwidth,i.cheight=t.cheight,i.scale=t.cwidth/146,i.cardSep=t.cheight/4|0,i.playAreaHeight=t.height,i.playAreaWidth=t.width,i.cardStaticShadow="1px "+Math.floor(3/198*i.cheight)+"px 6px "+Math.floor(2/198*i.cheight)+"px rgba(60, 60, 60, 0.5)",i.highlightShadow="0 0 "+Math.floor(7/198*i.cheight)+"px "+Math.floor(9/198*i.cheight)+"px #83e3f7",i.hoverShadow="0 0 "+Math.floor(7/198*i.cheight)+"px "+Math.floor(7/198*i.cheight)+"px #f8f465",i.cardStaticShadow="0 0 "+Math.floor(9/198*i.cheight)+"px rgba(80, 80, 80, 0.5)",i.borderRadius=Math.floor(10*i.cheight/198)}}(),function(){"use strict";function e(t,e){return t+~~(Math.random()*(e-t+1))}var i=t.winAnimations={},n=t.display,o={},a=null,s=null,r=function(){},c=0;o.throwOut=function(){var i=t.display.cwidth/2,o=t.display.cheight/2,s=$("#playArea"),h=s.width(),u=parseInt(s.css("left"),10),d=(parseInt(s.css("top"),10),-u),l=h+u;"windows"===t.config.isApp&&(d=0,l=h);var f=[{x:-i,y:o},{x:-i,y:-o},{x:i,y:-o},{x:i,y:o}];!function t(o){if(!a)return r();if(o===a.length)setTimeout((function(){t(o+1)}),500);else if(o===a.length+1)r();else{for(;a[o].cards.length>0;){for(var s=Math.random()*(4*Math.PI),h={rotate:s+"rad",x:e(d,l),y:e(0,n.playAreaHeight-n.cheight)},u=h.x+i,p=0,g=0;g<4;g++){var m=f[g],v=u+(m.x*Math.cos(s)-m.y*Math.sin(s)),y=0;v<d?y=d-v:v>l&&(y=l-v),Math.abs(y)>Math.abs(p)&&(p=y)}h.x+=p,$(a[o].lastCard().dom).stop().css("zIndex",10+o).transition(h,1e3,"easeOutCirc"),a[o].popCard()}c=setTimeout((function(){t(o+1)}),700)}}(0)},o.randomShow=function(){var e=$("#game-ui").width(),i=parseInt($("#playArea").css("left"),10),o=2e3/s.length;$(".card").css("opacity",0),"windows"===t.config.isApp&&(e-=i,i=0);for(var a=[],h=[],u=0;u<s.length;u++)h.push(u);for(u=0;u<s.length;u++){var d=Math.floor(Math.random()*h.length);a.push(h[d]),h[d]=h[h.length-1],h.pop()}!function t(h){h===a.length?r():(s[a[h]].jdom.css({x:Math.random()*(e-n.cwidth)-i>>0,y:Math.random()*(n.playAreaHeight-n.cheight)>>0,zIndex:100+h}).transition({opacity:1}),c=setTimeout((function(){t(h+1)}),o))}(0)},i.start=function(e,i,n){r=n,a=e,s=i,"pyramid"==t.data.projectType?o.randomShow():o.throwOut()},i.stop=function(){clearTimeout(c),s.forEach((function(t){t.jdom.stop()})),s=null,a=null}}(),function(){"use strict";t.containers.ReservePile=t.containers.ReservePile||function(){};var i,n=t.game={},o=t.config,a=t.display,s=t.ui,r=t.audio,c=t.cardData,h=$(window),u=null,d=null,l=null,f=null,p=null,g=0,m=0,v=function(){var t=0;return{INIT:t++,WAITING:t++,DRAGSTART:t++,MOVING:t++,POSTMOVE:t++,AUTOFILLING:t++,END:t++}}(),y=n.timer={_timer:0,start:function(t){clearInterval(this._timer),void 0!==t&&(c.time=t),this._timer=setInterval((function(){y._increTimer()}),1e3)},pause:function(){clearInterval(this._timer)},_increTimer:function(){c.time++}};n.state=v.INIT,n.loadPromise=$.Deferred(),n.nextGameNumber=0,n.moveWithAnimate=o.moveWithAnimate,n.setGameDom=function(t){(p=t).click((function(){n.hideHint()}))},n.onMoveOccurred=null;var w=0,b=0;n.scheduleUpdateDisplay=function(t){clearTimeout(b),b=setTimeout(n.updateDisplay,t)},n.marginsForDevices=0,n.updateDisplay=function(){if(u){function c(){var t=navigator.userAgent.toLowerCase();return t.match(/iphone/)?"iPhone":t.match(/android/)&&t.match(/mobile/)?"android":t.match(/windows/)&&t.match(/phone/)?"windows":null}var i=p.width()-("yukon"!=t.curGame[1]&&"scorpion"!=t.curGame[1]||null!=c()&&c()?0:"scorpion"==t.curGame[1]?150:160),s=p.height()-("yukon"!=t.curGame[1]&&"scorpion"!=t.curGame[1]||null!=c()&&c()?0:"scorpion"==t.curGame[1]?150:160);if(g="windows"===o.isApp?15:0,n.marginsForDevices=0,window.innerHeight<window.innerWidth&&((t.config.isMobilePhone||t.config.isTablet)&&(u.rows>5?(n.marginsForDevices=0,t.config.totalL=4,t.config.cL=3):u.columns>=10?(n.marginsForDevices=parseInt(.05*i),t.config.totalL=8,t.config.cL=7):u.columns>=8?(n.marginsForDevices=parseInt(.09*i),t.config.totalL=4,t.config.cL=3):(n.marginsForDevices=parseInt(.1*i),t.config.totalL=4,t.config.cL=3),t.config.isTablet&&(n.marginsForDevices=parseInt(n.marginsForDevices/2))),"windows"==t.config.isApp&&e.isUWP()&&!t.config.isMobilePhone)){var r=Windows.Graphics.Display.DisplayInformation.getForCurrentView();r.rawPixelsPerViewPixel>1&&(g=Math.floor(g*r.rawPixelsPerViewPixel),u.columns,n.marginsForDevices=0,t.config.totalL=4,t.config.cL=3)}i-=2*n.marginsForDevices,s-=g,t.display.adjust(u.adjustLayout(i,s)),a.useScale?d.css({scaleX:a.scale,scaleY:a.scale,marginLeft:(a.originalCardWidth-a.cwidth)/-2,marginTop:(a.originalCardHeight-a.cheight)/-2}):d.css({height:a.cheight,width:a.cwidth,"border-radius":a.borderRadius}),u.containers.forEach((function(t){t.adjustPos()})),J&&J.h.transition({position:"absolute",height:J.end.pos.y-J.start.pos.y+a.cheight,width:a.cwidth,top:0,left:0,x:J.start.pos.x,y:J.start.pos.y,zIndex:J.start.pos.z-1,borderRadius:a.borderRadius},J.start.time)}},n.empty=function(){u&&(n.save(),n.hints.length=0,n.hideHint(),u.clear())},n.setCurrentGame=function(t){this._cur=u=t,d=$(t.frag.childNodes),t.cards.forEach((function(t){t.animating=!0})),i=t.containers.map((function(){return!1})),a.useScale||(d=d.add(d.find(".cardFront, .cardBack"))),p.append(t.frag),n.updateDisplay()},n.play=function(){c.load()?c.lastGame.isReset?n.start(!0):n.load():(n.state=v.END,n.start())},n.start=function(t){if(u){h.trigger("game:start");var e=n.state!==v.END;n.hints.length=0,n.init(),n.hideHint(),n.state=v.INIT,y.start(0),y.pause(),c.reset(),t||(e&&(c.currentStreakIsWinning?(c.currentStreakIsWinning=!1,c.currentStreak=1):c.currentStreak++),c.gamePlayCount++),n.moveWithAnimate=!1,u.init((function(){n.state=v.POSTMOVE,n.computeHints(),at(700),et.length=0,it.length=0,y.start(),n.moveWithAnimate=o.moveWithAnimate}))}},n.init=function(){$(".card").stop().css({opacity:"",rotate:"0deg"}),clearTimeout(m),st();var t="freecell"===this.type,e="freecell"===this.variation;t?$(".select-game-number").show():$(".select-game-number").hide(),t&&e?$(".game-calendar").show():$(".game-calendar").hide()},n.save=function(){u&&n.state!==v.END&&n.state!==v.INIT&&(c.lastGame={undoStack:et,redoStack:it,game:u.gameState()},c.save())},n.load=function(){h.trigger("game:resume"),n.hints.length=0,n.hideHint(),n.init(),n.state=v.INIT,y.start(),y.pause();var t=c.lastGame;et.length=0,t.undoStack&&t.undoStack.forEach((function(t){et.push(t)})),it.length=0,t.redoStack&&t.redoStack.forEach((function(t){it.push(t)})),u.loadGameState(t.game,(function(){n.state=v.POSTMOVE,at(700),y.start()}))};var S,k=0,C=[],x=[],M=0,A=0,T=0,P=0,E=!1,I=!1;n.initialiseDrag=function(t,e,i){if(!I&&t.ownedBy&&(I=!0,clearTimeout(S),S=setTimeout((function(){I=!1}),200),n.state===v.WAITING&&!t.moving&&!t.flipping)){st(),n.hideHint(!0),E=!!i,n.state=v.DRAGSTART,k=0,C=[],x=[];for(var o=t.ind;o<t.ownedBy.cards.length&&!(C.length>=t.ownedBy.maxCardsToMove());o++){var a=t.ownedBy.cards[o];C.push(a),x.push(a.dom)}M=e.x,A=e.y,T=0|t.domPos.x,P=0|t.domPos.y,(x=$(x)).removeTransition()}};var L=function(t){var e,i;if(t.preventDefault(),t.originalEvent.changedTouches){var o=t.originalEvent.changedTouches[0];e=o.clientX,i=o.clientY}else e=t.originalEvent.clientX,i=t.originalEvent.clientY;n.state===v.MOVING?l(e,i):n.state===v.DRAGSTART&&u.movable(C[0])&&(C.forEach((function(t){t.moving=!0})),U())},H=null,O=0,_=0,G=function(t,e){x.css({x:T+t-M,y:function(t){return P+e-A+t*a.cardSep}})},j=function(){var e=C[0].hasShadow?a.cardStaticShadow:"";C[0].ownedBy instanceof t.containers.ReservePile&&C[0].ownedBy.cards.forEach((function(t,e){e<=C[0].ind||(t.dom.style.zIndex=400+e)})),x.find(".cardFront").stop().transition({scaleX:1,scaleY:1,"box-shadow":e},C[0].time)},N=e.prefix+"Transition",D=e.prefix+"Transform",W="-"+e.prefix.charAt(0).toLowerCase()+e.prefix.substr(1)+"-transform ",B=0,F=function(){k=0,H.transition({x:0,y:0,rotate:0},500,"easeInCubic")},R=function(t,e){var i=T+t-M,n=P+e-A;if(i!==O||n!==_){clearTimeout(B);var o,s,r=i-O;r<0?(r>k&&(r=k),k=r,o=450/(10-r)-45,s=-2):(r<k&&(r=k),k=r,o=-450/(10+r)+45,s=2),O=i,_=n,H.each((function(t){this.style[N]=W+100+"ms ease",this.style.transform=this.style[D]="translate3d(0, -"+a.cardSep*t+"px, 0)rotate("+(o+s*t)+"deg) translate3d(0, "+a.cardSep*t+"px, 0) scale(1.2)"})),x.css({x:i,y:function(t){return a.cardSep*t+n}}),B=setTimeout(F,200)}},z=function(t,e){if(n.state===v.MOVING){clearTimeout(B);var i=C[0].hasShadow?a.cardStaticShadow:"";H.each((function(t){this.style[N]=W+C[0].time+"ms ease",this.style[D]="",this.style.transform="",this.style.boxShadow=i}))}};l=R,f=z,n.setMovingSwinging=function(t){t?(l=R,f=z):(l=G,f=j)},n.setCardEffect=function(t){t?(delete $.cssHooks.boxShadow,delete $.cssHooks.ieBoxShadow,a.scaling=1.2,u&&u.cards.forEach((function(t){t.setShadow(t.hasShadow),t.setHoverEffect(!0)})),$(".bottomButton").css("box-shadow","")):($(".bottomButton").css("box-shadow","none"),$(".cardBack, .cardFront").css("boxShadow","none"),u&&u.cards.forEach((function(t){t.setHoverEffect(!1)})),$.cssHooks.boxShadow={get:function(){return null},set:function(){}},$.cssHooks.ieBoxShadow={get:function(t){return t.style.boxShadow},set:function(t,e){t.style.boxShadow=e}},a.scaling=1)};var U=function(){x.stop().each((function(t){this.style.zIndex=200+t,this.style.boxShadow="none",this.style.webkitTransition="",this.style.MSTransition=""})).find(".cardFront").transition({scaleX:a.scaling,scaleY:a.scaling,"box-shadow":t.display.dragShadow},100,"linear"),H=x.find(".cardFront"),O=parseInt(x.css("x"),10),n.state=v.MOVING},q=function(t,e){var i,n,o;return t.left<e.left?(i=t,n=e):(i=e,n=t),i.right<n.left?0:(o=i.right>n.right?n.right-n.left:i.right-n.left,t.top<e.top?(i=t,n=e):(i=e,n=t),i.bottom<n.top?0:(i.bottom>n.bottom?o*=n.bottom-n.top:o*=i.bottom-n.top,o))},Y=function(e,i){var s,c;if((n.state===v.DRAGSTART||n.state===v.MOVING)&&function(t,e){return Math.max(Math.abs(t-M),Math.abs(e-A))<=a.cheight/5}(e,i)){if(s=u.cardClicked(C[0]))return f(),n.state=v.WAITING,m=setTimeout((function(){r.drop.play()}),s),void at(s);if(n.requestAutomove(C[0],!0))return f(),void(n.state=v.WAITING)}if(n.state===v.DRAGSTART)n.state=v.WAITING;else if(n.state===v.MOVING){if(B&&clearTimeout(B),f(),n.state=v.WAITING,!(E&&Math.max(Math.abs(e-M),Math.abs(A-i))<=a.cheight/5&&n.requestAutomove(C[0]))){var h=0,d=-1,l={left:parseInt($(C[0].dom).css("x"),10),top:parseInt($(C[0].dom).css("y"),10)};for(l.right=l.left+a.cwidth*a.scaling,l.bottom=l.top+a.cheight*a.scaling,c=0;c<u.containers.length;c++){var p=q(u.containers[c].toRect(),l);p>h&&u.testAccept(C,u.containers[c])&&(h=p,d=c)}if(clearTimeout(B),-1===d){for(t.containers.Card.speed=o.revertSpeed,C[0].adjustPos(),c=1;c<C.length;c++)C[c].adjustPos(C[0].time+70*c);C[0].ownedBy.adjustZ(C[0].time+70*C.length-70),m=setTimeout((function(){r.drop.play()}),C[0].time),t.containers.Card.speed=o.animationSpeed}else{var g=u.getMoveWhenDrop(C,u.containers[d]),y={};for(c=0;c<g.length;c++)c>0&&(y.chain=!0),n.performMove(g[c].cards,g[c].des,void 0,y,!0);s=K(),n.state=v.WAITING,m=setTimeout((function(){r.drop.play()}),s),at(s)}}C=[],H=null}};$(document).on("mousemove",L).on(o.event_touchmove,L).on("mouseup",(function(t){Y(t.clientX,t.clientY)})).on(o.event_touchend,(function(t){var e=t.originalEvent;e.changedTouches?Y(e.changedTouches[0].clientX,e.changedTouches[0].clientY):Y(e.clientX,e.clientY)})).on(o.event_touchmove,".phone-popup, .ui-popup-container",(function(t){t.stopPropagation()}));var X=function(e,i,o,a){var s=e[0].ownedBy,r={from:u.containers.indexOf(s),to:u.containers.indexOf(i),cards:e.map((function(t){return t.objid})),chain:a.chain,isTakeOver:a.isTakeOver,oldInd:e[0].ind};a.flipLast&&i.lastCard().flip(!0),a.flipLastFrom&&s.lastCard().flip(!0),a.flipCards&&(e.forEach((function(t){t.flip(!t.flipped)})),r.flipCards=!0),a.reversed&&(e=e.reverse(),r.reversed=!0,r.cards=e.map((function(t){return t.objid})));for(var h=e.length,d=0;d<h;d++)s.removeCard?s.removeCard(e[d]):s.popCard();s.cards.forEach((function(t,e){t.ind=e})),e.forEach((function(t){t.jdom.trigger("mouseout")})),s.popNeedUpdate&&V(s),i.takeIn(e),V(i,a.adjustPosOption);var l=s.lastCard();l&&s.shouldFlipLast()&&l.flipped&&(l.flip(!1),s.flipUpdate(),r.flipLast=!0),(l=i.lastCard())&&i.shouldFlipLast()&&l.flipped&&(l.flip(!1),i.flipUpdate(),r.flipLastFrom=!0),1===o?(it.push(r),c.movesCount+=1):2===o?et.push(r):(et.push(r),it.length=0,c.movesCount+=1),s instanceof t.containers.Tableau&&s.adjustPos();var f=u.moveOccurred(s,i,e.length);clearTimeout(w),n.onMoveOccurred&&(w=setTimeout((function(){n.onMoveOccurred()}),700)),o||f.forEach((function(t){n.performMove(t.cards,t.des,void 0,{chain:!0})}))},V=function(t,e){e||(e={}),i[u.containers.indexOf(t)]=e},K=function(){for(var t=0,e=0;e<i.length;e++)i[e]&&(i[e].delay?(setTimeout(function(t,e){return function(){u.containers[t].adjustPos(e)}}(e,i[e].time),i[e].delay),t=Math.max(i[e].delay+i[e].time,t)):t=Math.max(u.containers[e].adjustPos(i[e].time),t),i[e]=null);return t};n.performMove=function(e,i,a,s,r){n.hideHint(),s||(s={});var c=s.moveTime||200;return i instanceof Array?(n.moveWithAnimate=!1,i.forEach((function(i,n){n>0&&(s.chain=!0),t.gameSettings.useCSS3?s.adjustPosOption={time:c}:s.adjustPosOption={delay:50*n,time:c},X(e[n],i,a,s)})),n.moveWithAnimate=o.moveWithAnimate):X(e,i,a,s),Z=!0,n.computeHints(),r?0:K()},n.requestTakeOver=function(t,e,i){if(n.state!==v.WAITING)return!1;e.cards[0];var o=n.performMove(e.cards.slice(0),t,void 0,{flipCards:i,reversed:!0,isTakeOver:!0});return r.redeal.play(),at(o),!0};var J=null;n.requestLongHint=function(t,e){var i=$(document.createElement("div")).addClass("long-highlight").css({position:"absolute",height:e.pos.y-t.pos.y+a.cheight,width:a.cwidth,top:0,left:0,x:t.pos.x,y:t.pos.y,zIndex:t.pos.z-1,borderRadius:a.borderRadius}).transition({boxShadow:a.highlightShadow,ieBoxShadow:a.highlightShadow},200);i[0].ondragstart=function(){return!1},p.append(i);for(var n=t.ind;n<=e.ind;n++)t.ownedBy.cards[n].inHint=i[0],t.ownedBy.cards[n].jdom.trigger("mouseout");J={start:t,end:e,h:i}},n.removeLongHint=function(t,e){for(var i=J.start.ind;i<=J.end.ind;i++)J.start.ownedBy.cards[i].inHint=null;J.h.remove(),J=null},n.hints=[],n.curHint=null,n.hintInd=0;var Z=!0,Q=!1,tt=null;n.hideHint=function(t){tt=t?n.curHint:null,n.curHint&&(n.curHint.from&&n.curHint.from.setHighlight(!1),n.curHint.to&&n.curHint.to.setHighlight(!1),n.curHint=null)},n.showHint=function(){if((n.state===v.WAITING||n.state===v.POSTMOVE)&&!Z){if(0===n.hints.length){var t=u.getSpecialHint();t&&(n.hideHint(),n.curHint=t,n.hintInd=-1)}else{var e=n.hints.indexOf(n.curHint)+1||n.hintInd+1;n.curHint||(e=0),e%=n.hints.length,n.hintInd=e,n.hideHint(),n.curHint=n.hints[e]}n.curHint&&(n.curHint.from&&n.curHint.from.setHighlight(!0,n.curHint.length),n.curHint.to&&n.curHint.to.setHighlight(!0))}},n.computeHints=function(){Q||(this.hints.length=0,u.computeHints(this.hints),Z=!1)};var et=[],it=[],nt=function(t,e){t.isTakeOver&&(u.undoTakeOver(u.containers[t.from],u.containers[t.to]),t.cards||(t.cards=u.stocks[0].cards.map((function(t){return t.objid})))),n.performMove(t.cards.map((function(e){var i=u.cards[e];return i.oldInd=t.oldInd,i})),u.containers[t.from],e,{flipLast:t.flipLast,flipLastFrom:t.flipLastFrom,flipCards:t.flipCards,reversed:t.reversed,chain:t.chain,isTakeOver:t.isTakeOver})};n.applyUndo=function(){if(n.state===v.WAITING&&et.length){r.undo.play();var t,e=!1,i=0;do{e=(t=et.pop()).chain,i?i>0&&(t.chain=!0):t.chain=!1,i++,nt(t,1)}while(e);n.computeHints(),c.movesCount-=2}},n.applyRedo=function(){if(n.state===v.WAITING&&it.length){r.redo.play();var t,e=!1,i=0;do{e=(t=it.pop()).chain,i?i>0&&(t.chain=!0):t.chain=!1,i++,nt(t,2)}while(e);at(700)}},n.restart=function(){if(n.state==v.WAITING&&!u.cards.some((function(t){return!t.ownedBy}))){for(n.state=v.INIT,n.hints.length=0,n.hideHint(),Q=!0;et.length;)nt(et.pop(),1);Q=!1,n.computeHints(),it.length=0,y.start(0),y.pause(),m=setTimeout((function(){y.start(),n.state=v.POSTMOVE}),700),at(700),c.movesCount=0}},n.running=function(){return!!u},n.playing=function(){return n.state!==v.END},Object.defineProperty(n,"normalizedName",{get:function(){return t.ui.gamesUI[t.game.type].variation[t.game.variation].normalizedName}}),Object.defineProperty(n,"name",{get:function(){return t.localisation.getL("game-"+this.normalizedName)}}),Object.defineProperty(n,"type",{get:function(){return t.curGame&&t.curGame[0]}}),Object.defineProperty(n,"variation",{get:function(){return t.curGame&&t.curGame[1]}}),n.autoFill=function(){var e=u.getAutoFillMove();if(e){t.containers.Card.speed=o.autoplaySpeed;var i=n.performMove(e.cards,e.destination,void 0,{chain:e.chain});t.containers.Card.speed=o.animationSpeed,r.autoplay.play(),at(Math.round(.8*i))}else n.computeHints(),n.testEnd()};var ot=0,at=function(t){st(),ot=setTimeout(n.autoFill,t)},st=function(){clearTimeout(ot)};n.testEnd=function(){if(function(){var t=navigator.userAgent.toLowerCase();return t.match(/iphone/)?"iPhone":t.match(/android/)&&t.match(/mobile/)?"android":t.match(/windows/)&&t.match(/phone/)?"windows":null}()||function(){try{gtag("event","conversion",{send_to:"AW-11216962876/rfLcCOqp7tcYELyK1eQp"})}catch(t){}}(),"klondike"!==t.curGame[0]||1!=t.curGame[1]&&3!=t.curGame[1]){if("freecell"===t.curGame[0]||"klondike"===t.curGame[0]&&"yukon"==t.curGame[1]){var e=u.testAuto(),i=0;e.automovePrefs[1].forEach((function(t){0==t.cards.length&&i++,4==i&&$("#autoplay-but").attr("class").toString().includes("off")&&($("#autoplay-but").click(),setTimeout($("#autoplay-but").click(),8e3))}))}}else 0==(e=u.startAutoPlay())&&$("#autoplay-but").attr("class").toString().includes("off")&&($("#autoplay-but").click(),setTimeout($("#autoplay-but").click(),8e3));n.state!==v.END&&(n.loadPromise.resolve(),u.isWon()?(h.trigger("game:won",u),s.modal.show(),s.modal.clickOnce((function(){n.onGamewon()})),t.winAnimations.start(u.foundations,u.cards,(function(){var e=Number($("#user-wins").text());e+=1,$("#user-wins").empty().text(e),s.modal.click(),$.post("Leaderboard",{game:"klondike-alaska",hasWon:!0,moves:t.cardData._movesCount,seconds:t.cardData._time}),""!==$("#match-id").text()?setTimeout((()=>{let e=Number($("#opponent-player-moves").text());$.post("/GameOver",{MatchId:$("#match-id").text(),CurrentPlayerMoves:t.cardData._movesCount,OpponentPlayerUserId:$("#opponent-player-id").text(),OpponentPlayerMoves:$("#opponent-player-moves").text()}),e>t.cardData._movesCount?($("#matchmaking-title-won-lost").empty().text("You Won"),$("#match-id").text(""),$("#matchmaking-lost-dialog-solitairen").removeAttr("hidden"),$("#opponentPlayerName").empty().text($("#opponent-player-name").text()),$("#opponent-lost-moves").empty().text(e),$("#your-lost-moves").empty().text(t.cardData._movesCount),$("#oponnent-moves").attr("hidden",!0)):($("#matchmaking-title-won-lost").empty().text("You Lost"),$("#match-id").text(""),$("#matchmaking-lost-dialog-solitairen").removeAttr("hidden"),$("#opponentPlayerName").empty().text($("#opponent-player-name").text()),$("#opponent-lost-moves").empty().text(e),$("#your-lost-moves").empty().text(t.cardData._movesCount),$("#oponnent-moves").attr("hidden",!0))}),200):$("#win-dialog-solitairen").removeAttr("hidden")})),n.state=v.END,y.pause(),r.gamewon.play(),c.winUpdate()):u.isLost(this.hints)?(h.trigger("game:lose",u),n.state=v.WAITING,$("#nomoremove-dialog-solitairen").removeAttr("hidden")):n.state=v.WAITING)},n.onNewHighScore=function(t){c.playerName=t.slice(0,20),c.addHighScore()},n.getMaxmove=function(t){return u.getMaxmove(t)},n.getFlipScale=o.noScaling?function(){return 1}:function(){return u.flipScale},n.requestAutomove=function(e,i){if(n.state===v.WAITING&&n.movable(e)||i&&u.movable(e)){var a=u.requestAutomove(e,n.curHint||tt);if(a){t.containers.Card.speed=o.automoveSpeed;var s=e.ownedBy.getCards(e.ownedBy.cards.length-e.ind);s=s.slice(0,e.ownedBy.maxCardsToMove());var c=n.performMove(s,a);return u.clickAdjust(s),t.containers.Card.speed=o.animationSpeed,m=setTimeout((function(){r.drop.play()}),c),at(c),!0}}return!1},n.hoverable=function(t){return n.state===v.WAITING&&u.hoverable(t)},n.movable=function(t){return!t.moving&&!t.flipping&&u.movable(t)},n.instaWin=function(){u.tableaus.forEach((function(t){for(;t.cards.length;)t.popCard()}));for(var t=0;t<u.foundations.length;t++)for(var e=0;e<13;e++)u.foundations[t].takeIn(u.cards[13*t+e]);n.testEnd()}}(),setTimeout((function(t){}),1e3),$(window).resize((function(){setTimeout((function(t){}),1e3)})),function(){"use strict";var i=t.config,n=t.resources,o=t.game,a=t.display,s=t.containers.Card=function(t){this.objid=t,this.flipping=!1,this.moving=!1,this.movingTimer=0,this.highlighted=!1,this.hasShadow=!1,this.hovereffect=!1,this.ind=-1,this.ownedBy=null,this.inHint=null,this.pos={},this.type=Math.floor(t%52/13),this.num=t%52-13*this.type+1,this.dom=document.createElement("div"),this.dom.className="card",this.dom.unselectable=!0,this.dom.onselectstart=function(){return!1},this.dom.style.position="absolute",this.dom.style.top=0,this.dom.style.left=0,this.jdom=$(this.dom),this.front=n.getCardImage(this.type,this.num),this.front.className="cardFront",this.front.style.position="absolute",this.front.style.display="block",this.front.draggable=!1,this.front.alt=this.type+"-"+this.num+"card",this.front.ondragstart=function(){return!1},this.dom.appendChild(this.front),this.back=n.getCardBackImage(),this.back.className="cardBack",this.back.style.position="absolute",this.back.style.display="block",this.back.draggable=!1,this.front.alt="card-back-image",this.back.ondragstart=function(){return!1},this.dom.appendChild(this.back),$(this.front).add(this.back).css({scaleX:1,scaleY:1}),this.flipped=!0;var e=this;this.jdom.on(i.event_touchstart,(function(t){if(!(t=t.originalEvent).changedTouches&&!t.isPrimary)return!1;if(t.button)return!1;var i=t.changedTouches?t.changedTouches[0]:t;return o.initialiseDrag(e,{x:i.clientX,y:i.clientY},!0),!1})).on("ondblclick",(function(t){t.preventDefault(),o.requestAutomove(e)})).on("mousedown",(function(t){3!==t.which&&(t.preventDefault(),o.initialiseDrag(e,{x:t.clientX,y:t.clientY}))})).on("contextmenu",(function(t){t.preventDefault(),o.requestAutomove(e)})),this.setHoverEffect(!0),this.flipTimer=0,this.hoverred=!1};s.speed=i.animationSpeed,s.prototype.setHoverred=function(t){this.hovered=t,t?this.moving||this.flipping||!o.hoverable(this)||(this.jdom.css({"box-shadow":a.hoverShadow}),this.inHint&&(this.inHint.style.display="none")):(this.highlighted?this.jdom.css({"box-shadow":a.highlightShadow,ieBoxShadow:a.highlightShadow}):this.jdom.css({"box-shadow":""}),this.inHint&&(this.inHint.style.display=""))},s.prototype.setHoverEffect=function(t){if(this.hovereffect!==t)if(this.hovereffect=t,t&&!i.isiOS){var e=this;this.jdom.hover((function(){e.setHoverred(!0)}),(function(){e.setHoverred(!1)}))}else this.jdom.off("hover")},s.prototype.setShadow=function(t){this.hasShadow=t,this.animating||this.updateShadow()},s.prototype.updateShadow=function(){var t=$(this.back).add(this.front);this.hasShadow?t.css({boxShadow:a.cardStaticShadow}):t.css({boxShadow:""})},s.prototype.setHighlight=function(t){var e={};t?(e={"box-shadow":a.highlightShadow,ieBoxShadow:a.highlightShadow},this.highlighted=!0):(this.highlighted=!1,e={"box-shadow":"",ieBoxShadow:""}),$.fn.transition==$.fn.animate?this.jdom.css(e):this.jdom.transition(e)},s.prototype.flip=function(t,e,n){if(this.flipped!==t||n){this.flipped=t,this.ownedBy&&this.ownedBy.postFlip(this),this.flipping=!0;var a,s,r=$(".wrap-shadow")[0];e=e?Math.floor(e/2):this.animating?i.animation_time/4:i.flipTime/2,t?(a=$(this.back),s=$(this.front)):(a=$(this.front),s=$(this.back)),this.jdom.css("box-shadow",""),s.transition({scaleX:0,scaleY:o.getFlipScale()},e),a.css({scaleX:0,scaleY:o.getFlipScale()}),clearTimeout(this.flipTimer),this.flipTimer=setTimeout(function(){a.transition({scaleX:1,scaleY:1},e,function(){this.flipping=!1,this.setHoverred(this.hoverred),$.browser.mozilla&&(r.style.visibility="hidden",setTimeout((function(){r.style.visibility=""}),50))}.bind(this))}.bind(this),e+10)}},s.prototype.directFlip=function(t){var e,i;this.flipped!==t&&(this.flipped=t,this.ownedBy&&this.ownedBy.postFlip(this),clearTimeout(this.flipTimer),t?(e=$(this.back),i=$(this.front)):(e=$(this.front),i=$(this.back)),e.css({webkitTransition:""}),e.css({webkitTransition:""}),setTimeout((function(){i.css({display:"block",scaleX:0,scaleY:o.getFlipScale()}),e.css({display:"block",scaleX:1,scaleY:1})}),0))},s.prototype.parabol=function(){this.front.style[e.prefix+"Transform"]="",setTimeout(function(){var t=this.time/4,i=this.time-t,n=Math.floor(1.3*this.dy),o=this.dx<0?-1:1;this.front.style[e.prefix+"Transition"]=t+"ms cubic-bezier(0.000, 0.300, 0.700, 1.000)",this.front.style[e.prefix+"Transform"]="translateY(-"+n+"px) rotate("+180*o+"deg)",setTimeout(function(){this.front.style[e.prefix+"Transition"]=i+"ms cubic-bezier(0.100, 0.000, 0.70, 1.200)",this.front.style[e.prefix+"Transform"]="translateY(0px) rotate("+360*o+"deg)",setTimeout(function(){this.front.style[e.prefix+"Transition"]="",this.front.style[e.prefix+"Transform"]=""}.bind(this),i+10)}.bind(this),t)}.bind(this),10)},s.prototype.adjustPos=function(t,e){if(this.ownedBy){var n=this.pos=this.ownedBy.getPosForChild(this.ind),o=this.domPos.x,a=this.domPos.y;if(o!==n.x>>0||a!==n.y>>0||this.moving||this.animating){void 0!==t||this.animating?this.animating?this.time=i.animation_time:this.time=t:this.time=~~Math.max(i.minimum_moving_time,1e3*Math.sqrt(Math.pow(n.y-a,2)+Math.pow(n.x-o,2))/s.speed),this.dy=n.y-a,this.dx=n.x-o,void 0===e&&(e=this.animating?0:100),clearTimeout(this.movingTimer),this.moving=!0;var r=this;this.movingTimer=setTimeout((function(){r.moving=!1,r.setHoverred(r.hoverred)}),this.time),this.animating,this.move(n.x>>0,n.y>>0,n.z+e,this.time,$.cssEase[i.easingFunc],e)}else this.jdom.css("zIndex",n.z)}},s.prototype.move=function(t,n,a,s,r,c){this.domPos={x:t,y:n,z:a},o.moveWithAnimate?(this.dom.style.zIndex=a,this.dom.style[e.prefix+"Transition"]="",this.jdom.stop(),s?this.jdom.animate({x:t,y:n},{duration:s,queue:!1}):this.jdom.css({y:n,x:t})):(this.jdom.stop(!0).css("zIndex",a+c),s?this.jdom.transition({y:n>>0,x:t>>0,delay:10},this.time,i.easingFunc):this.jdom.css({y:n>>0,x:t>>0}))}}(),function(){"use strict";var e=t.display,i=t.containers.Container=function(t,e){this.cards=[],this.objid=t,this.offsetTop=0,this.offsetLeft=0,e?(this.dom=e,this.dom.style.position="absolute",this.dom.ondragstart=function(){return!1}):this.dom=null,this.highlighted=!1};i.prototype.ini=function(){this.cards.length=0},i.prototype.isEmpty=function(){return 0===this.cards.length},i.prototype.lastCardIsOfSameType=function(t){return!this.isEmpty()&&!t.isEmpty()&&this.lastCard().type===t.lastCard().type},i.prototype.maxCardOut=function(){return this.cards.length?1:0},i.prototype.shouldFlipLast=function(){return!1},i.prototype.flipUpdate=function(){},i.prototype.maxCardIn=function(){return 1},i.prototype.postFlip=function(){},i.prototype.toRect=function(){return{left:this.offsetLeft,right:this.offsetLeft+e.cwidth,top:this.offsetTop,bottom:this.offsetTop+e.cheight}},i.prototype.ini=function(){this.cards.length=0},i.prototype.accept=function(){return!1},i.prototype.lastCard=function(){return this.cards.length>0?this.cards[this.cards.length-1]:null},i.prototype.getCards=function(t){return this.cards.slice(this.cards.length-t,this.cards.length)},i.prototype.popCard=function(){this.cards.pop().ownedBy=null},i.prototype.maxCardsToMove=function(t){return 1/0},i.prototype.getPosForChild=function(t){return{x:this.offsetLeft,y:this.offsetTop,z:t+this.zAdd}},i.prototype.setPos=function(t,e){this.offsetLeft=t,this.offsetTop=e},i.prototype.adjustPos=function(t){this.dom&&$(this.dom).css({y:this.offsetTop,x:this.offsetLeft});var e=0;return this.pauseAnimateCard||(this.cards.forEach((function(i){i.adjustPos(t),e=Math.max(e,i.time)})),this.adjustZ(e+1)),e},i.prototype.adjustZ=function(t){setTimeout(function(){this.cards.forEach((function(t){t.moving||t.jdom.stop(!0).css("zIndex",t.pos.z)}))}.bind(this),t)},i.prototype.setHighlight=function(t){t?this.cards.length?this.lastCard().setHighlight(!0):(this.dom&&$(this.dom).transition({"box-shadow":e.highlightShadow,ieBoxShadow:e.highlightShadow},200),this.highlighted=!0):this.cards.length?this.lastCard().setHighlight(!1):(this.dom&&$(this.dom).transition({"box-shadow":"",ieBoxShadow:""},200),this.highlighted=!1)}}(),function(){"use strict";var e,i,n,o,a=t.display,s=t.game,r=t.containers.Container.prototype,c=t.containers.Tableau=function(e){var i=t.resources.getTableauImage();i.className="tableau-holder",t.containers.Container.call(this,e,i),this.cardSep=t.display.cardSep,this.fcardcount=0,this.offsetTop=0,this.zAdd=7,this.highlightLen=0};c.setMovableCards=function(t){i=t,e={single:function(){return!1},any:function(){return!0},sequence_any:function(t,e){return!t.flipped&&!e.flipped&&t.num-e.num==1},sequence_same_suit:function(t,e){return!t.flipped&&!e.flipped&&t.num-e.num==1&&t.type===e.type},sequence_updown_same_suit:function(t,e){return!(t.flipped||e.flipped||t.num-e.num!=1&&t.num-e.num!=-1||t.type!==e.type)},sequence_diff_color:function(t,e){return!t.flipped&&!e.flipped&&t.num-e.num==1&&(t.type-e.type+4)%2==1}}[t]},c.getMovableCards=function(){return i},c.setSpaceAccept=function(t){n=t},c.getSpaceAccept=function(){return n},c.setWithCardAccept=function(t){o=t},c.prototype=Object.create(r),c.prototype.maxCardOut=function(){return this.computeMaxCardOut()},c.prototype.maxCardIn=function(){return 1/0},c.prototype.ini=function(){this.cards.length=0,this.cardSep=a.cardSep,this.fcardcount=0,r.ini.call(this)},c.prototype.toRect=function(){return{left:this.offsetLeft,top:this.offsetTop,right:this.offsetLeft+a.cwidth,bottom:1/0}},c.prototype.takeIn=function(t){t instanceof Array||(t=[t]),t.forEach(function(t){t.ownedBy=this,t.ind=this.cards.length,this.cards.push(t),t.setShadow(!0)}.bind(this))},c.prototype.computeMaxCardOut=function(){if(0===this.cards.length)return 0;if("yukon"===t.curGame[1])return this.cards.filter((function(t){return!t.flipped})).length;for(var i=this.cards.length-1;i>0&&e(this.cards[i-1],this.cards[i]);)i--;return this.cards.length-i},c.prototype.adjustSep=function(){var e=0;for(this.fcardcount=0;e<this.cards.length&&this.cards[e].flipped;)this.fcardcount++,e++;var i=this.cardSep;return this.cardSep=Math.floor((a.playAreaHeight-this.offsetTop-("yukon"==t.curGame[1]?.1*a.cheight:"scorpion"==t.curGame[1]?-.6*a.cheight:1.2*a.cheight))/(this.cards.length-1-this.fcardcount+this.fcardcount/2)),this.cardSep>a.cardSep&&(this.cardSep=a.cardSep),i!==this.cardSep},c.prototype.popCard=function(){this.lastCard().flipped&&this.fcardcount--,this.cards.pop().ownedBy=null},c.prototype.shouldFlipLast=function(){return!0},c.prototype.flipUpdate=function(){this.adjustSep()&&this.cards.forEach((function(t){t.adjustPos(!1,0)}))},c.prototype.accept=function(t){if(t instanceof Array||(t=[t]),0===t.length)return!1;if(this===t[0].ownedBy)return!1;if(this.cards.length){if("groupable"===o)return e(this.cards[this.cards.length-1],t[0]);if("sequence"===o)return this.cards[this.cards.length-1].num-t[0].num==1;if("any"===o)return!0;if("suit"===o)return this.cards[this.cards.length-1].num-t[0].num==1&&this.lastCard().type===t[0].type;if("alternate_circular_sequence"===o){var i=this.cards[this.cards.length-1].num-t[0].num;return(1===i||-12===i)&&(this.cards[this.cards.length-1].type-t[0].type+4)%2==1}return!1}return!(s.getMaxmove(this)<t.length)&&("king"===n?13===t[0].num:"any"===n)},c.prototype.adjustPos=function(t){return this.cardSep=a.cardSep,this.adjustSep(),r.adjustPos.call(this,t)},c.prototype.getPosForChild=function(t){var e;return e=t<this.fcardcount?t*this.cardSep/2:this.fcardcount*this.cardSep/2+(t-this.fcardcount)*this.cardSep,{x:this.offsetLeft,y:e+this.offsetTop,z:t+this.zAdd}},c.prototype.setHighlight=function(t,e){if(t&&(1===e||!e)||1===this.highlightLen&&!t)this.highlightLen=1,r.setHighlight.call(this,t);else{var i=this.cards.length-e,n=this.cards[i],o=this.cards.slice(i,i+this.maxCardsToMove()).pop();t?(this.highlightLen=e,s.requestLongHint(n,o)):(this.highlightLen=0,s.removeLongHint(n,o))}}}(),function(){"use strict";t.display,t.game;var e=t.containers.Foundation=function(e){var i=t.resources.getFoundationImage();i.className="foundation",t.containers.Container.call(this,e,i),this.zAdd=7},i="normal";e.setMode=function(t){i=t},e.prototype=Object.create(t.containers.Container.prototype),e.prototype.accept=function(t){if("noManual"===i)return!1;if(t instanceof Array){if(t.length>1)return!1;t=t[0]}return"onlyKing"===i?13===t.num:this.cards.length?t.type===this.lastCard().type&&t.num-this.lastCard().num==1:1===t.num},e.prototype.takeIn=function(t){t instanceof Array||(t=[t]),this.lastCard()&&this.lastCard().setShadow(!1),t.forEach(function(t){t.ownedBy=this,t.setShadow(!1),t.ind=this.cards.length,this.cards.push(t)}.bind(this)),this.lastCard().setShadow(!0)},e.prototype.maxCardOut=function(){return"normal"===i?1:0},e.prototype.popCard=function(){t.containers.Container.prototype.popCard.call(this),this.lastCard()&&this.lastCard().setShadow(!0)}}(),function(){"use strict";t.display,t.game;var e=t.containers.Tableau.prototype,i=t.containers.ReservePile=function(e){t.containers.Tableau.call(this,e)};i.prototype=Object.create(e),i.prototype.maxCardOut=function(){return Math.min(1,this._maxcard)},i.prototype.computeMaxCardOut=function(){0===this.cards.length?this._maxcard=0:this._maxcard=1},i.prototype.maxCardsToMove=function(){return 1},i.prototype.removeCard=function(t){var e=this.cards.indexOf(t);-1!==e&&(this.cards.splice(e,1),t.ownedBy=null)},i.prototype.takeIn=function(t){t instanceof Array||(t=[t]),t.forEach(function(t){t.ownedBy=this,$.isNumeric(t.oldInd)?this.cards.splice(t.oldInd,0,t):this.cards.push(t),t.setShadow(!0)}.bind(this)),this.cards.forEach((function(t,e){t.ind=e})),this.computeMaxCardOut()},i.prototype.maxCardIn=function(){return 0},i.prototype.accept=function(t){return!1}}(),function(){"use strict";t.display,t.game;var e=t.containers.CardHolder=function(e){t.containers.Container.call(this,e),this.offsetTop=0,this.offsetLeft=0,this.zAdd=0,this.blockingContainers=[]};e.prototype=Object.create(t.containers.Container.prototype),e.prototype.addBlockingContainer=function(t){this.blockingContainers.push(t)},e.prototype.takeIn=function(t){t instanceof Array&&(t=t[0]),t.ownedBy=this,t.ind=0,this.cards.push(t),t.setShadow(!0)},e.prototype.isBlocked=function(){return this.blockingContainers.some((function(t){return 0!==t.cards.length}))},e.prototype.maxCardOut=function(){return this.isBlocked()?0:this.cards.length},e.prototype.accept=function(t){return!1}}(),function(){"use strict";t.display,t.game;var e=t.containers.Reserve=function(e){var i=t.resources.getReserveImage();i.className="cell",t.containers.Container.call(this,e,i),this.offsetTop=0,this.offsetLeft=0,this.zAdd=99};e.prototype=Object.create(t.containers.Container.prototype),e.prototype.accept=function(t){return!(this.cards.length||t instanceof Array&&1!==t.length)},e.prototype.takeIn=function(t){t instanceof Array&&(t=t[0]),t.ownedBy=this,t.ind=0,this.cards.push(t),t.setShadow(!0)}}(),function(){"use strict";var e=t.display,i=(t.game,t.containers.Container.prototype),n=t.containers.Waste=function(e){t.containers.Container.call(this,e),this.offsetLeft=0,this.offsetTop=0,this.zAdd=1,this.highlightLen=0,this._layout="normal",this.popNeedUpdate=!1};n.prototype=Object.create(i),n.prototype.setLayout=function(t){this._layout=t,this.popNeedUpdate="3"===t},n.prototype.maxCardOut=function(){return this.cards.length>0?1:0},n.prototype.maxCardIn=function(){return 0},n.prototype.takeIn=function(t){t instanceof Array||(t=[t]),t.forEach(function(t){t.ownedBy=this,t.setShadow(!1),t.ind=this.cards.length,this.cards.push(t)}.bind(this)),"3"==this._layout&&(this.getCards(Math.min(this.cards.length,6)).forEach((function(t){t.setShadow(!1)})),this.getCards(Math.min(this.cards.length,3)).forEach((function(t){t.setShadow(!0)})))},n.prototype.getPosForChild=function(i){return{normal:function(e){return{x:this.offsetLeft-Math.floor(e/t.config.offsetStockDiv),y:this.offsetTop-Math.floor(e/t.config.offsetStockDiv),z:e+this.zAdd}},3:function(t){if(this.cards.length<3)return{x:this.offsetLeft+t*e.cardSep,y:this.offsetTop,z:t+this.zAdd};var i=t-this.cards.length+3;return{x:this.offsetLeft+Math.max(i,0)*e.cardSep,y:this.offsetTop,z:(i<0?0:i+2)+this.zAdd}}}[this._layout].bind(this)(i)}}(),function(){"use strict";var e=t.display,i=t.game,n=t.resources,o=t.containers.Container.prototype,a=t.containers.Stock=function(i){var o,a=document.createElement("div");if(a.className="waste-holder",this.stopImage=$(n.getStopSpotImage()),this.redealImage=$(n.getRedealImage()),this.stopImage.add(this.redealImage).css({position:"absolute","z-index":1,top:0,left:0,width:"100%",height:"100%"}),o=t.config.isiOS?"touchend":"click",$(a).append(this.stopImage).on(o,function(){this.redeal()}.bind(this)),t.containers.Container.call(this,i,a),this.offsetLeft=0,this.offsetTop=0,this.zAdd=7,this.disabled=!0,this._redealCount=1/0,!t.config.isiOS){var s=$(a);s.hover(function(){this.cards.length||this.disabled||s.css({"box-shadow":e.hoverShadow})}.bind(this),function(){this.highlighted?s.css({"box-shadow":e.highlightShadow,ieBoxShadow:e.highlightShadow}):s.css({"box-shadow":""})}.bind(this))}this.target=null,this.ejectCards=1,this.type="normal",this.layoutOptions={},this.lastCardUp=!1},s=null;a.setEmptyCheck=function(t){s=t},a.prototype=Object.create(o),a.prototype.setLayout=function(t,e){this.type=t,this.layoutOptions=e},a.prototype.shouldFlipLast=function(){return this.lastCardUp},a.prototype.getPosForChild=function(e){return"normal"==this.type?{x:this.offsetLeft-Math.floor(e/t.config.offsetStockDiv),y:this.offsetTop-Math.floor(e/t.config.offsetStockDiv),z:e+this.zAdd}:"piles"==this.type?{x:this.offsetLeft+this.layoutOptions.margin*Math.floor(e/this.layoutOptions.numPerPile),y:this.offsetTop,z:e+this.zAdd}:void 0},a.prototype.disable=function(){this.disabled||(this.redealImage.remove(),$(this.dom).append(this.stopImage),this.disabled=!0)},a.prototype.redealable=function(){return 0===this.cards.length&&!this.disabled&&0!==this.target.cards.length},a.prototype.enable=function(){this.disabled&&(this.stopImage.remove(),$(this.dom).append(this.redealImage),this.disabled=!1)},a.prototype.redeal=function(){return!(this.disabled||this.cards.length>0||this.target instanceof Array||0===this.target.cards.length||!i.requestTakeOver(this,this.target,!0)||(this.setRedealCount(this._redealCount-1),$(this.dom).trigger("mouseout"),0))},a.prototype.takeIn=function(t){t instanceof Array||(t=[t]),t.forEach(function(t){t.ownedBy=this,t.ind=this.cards.length,"normal"==this.type?t.setShadow(!1):"piles"==this.type&&t.setShadow(t.ind%this.layoutOptions.numPerPile==0),this.cards.push(t)}.bind(this))},a.prototype.setRedealCount=function(t){this._redealCount=t,t>0?this.enable():this.disable()},a.prototype.targetChanged=function(){this.target instanceof Array||(0===this.target.cards.length?this.disable():this._redealCount>0&&this.enable())},a.prototype.increRedealCount=function(){this.setRedealCount(this._redealCount+1)},a.prototype.decreRedealCount=function(){this.setRedealCount(this._redealCount-1)},a.prototype.eject=function(){if(this.target instanceof Array){if(s&&this.target.some((function(t){return 0===t.cards.length})))return s(),0;for(var t=[],e=0;e<this.target.length&&e<this.cards.length;e++)t.push(this.target[e]);return i.performMove(this.getCards(t.length).reverse().map((function(t){return[t]})),t,void 0,{flipCards:!this.lastCardUp,moveTime:300})}return i.performMove(this.getCards(Math.min(this.cards.length,this.ejectCards)),this.target,void 0,{flipCards:!this.lastCardUp,reversed:!0})}}(),function(){"use strict";var e=[],i=[],n=[],o=[],a=[],s=[],r=[],c=[],h=function(t,e,i,n,o){var a;if(t){if(o.length<t.length)for(a=o.length;a<t.length;a++)o.push(new e(a));for(a=0;a<t.length;a++)o[a].dom&&n.appendChild(o[a].dom),i.push(o[a]);return o.slice(0,t.length)}return null},u=t.cardData,d=4,l=t.GameBase=function(){this.containers=[],this.frag=document.createDocumentFragment(),this.reserves=h(this.config.reserves,t.containers.Reserve,this.containers,this.frag,i),this.foundations=h(this.config.foundations,t.containers.Foundation,this.containers,this.frag,n),this.stocks=h(this.config.stocks,t.containers.Stock,this.containers,this.frag,o),this.wastes=h(this.config.wastes,t.containers.Waste,this.containers,this.frag,a),this.tableaus=h(this.config.tableaus,t.containers.Tableau,this.containers,this.frag,e),this.cardHolders=h(this.config.cardHolders,t.containers.CardHolder,this.containers,this.frag,r),this.reservePiles=h(this.config.reservePiles,t.containers.ReservePile,this.containers,this.frag,c),this.cards=function(e,i,n){var o;if(n.length<e)for(o=n.length;o<e;o++)n.push(new t.containers.Card(o));for(o=0;o<e;o++)i.appendChild(n[o].dom),n[o].move(-2e3,-2e3,0,0,"");return n.slice(0,e)}(this.config.cards,this.frag,s),this.initx=0,this.inity=0,this.maxMove=1/0,this.config.suits?this.setSuits(this.config.suits):this.setSuits(4),t.gameSettings.autoplayMode="enabled",this.autoMoveFollowHint=!0};l.prototype.flipScale=t.config.flipScale,l.prototype.setSuits=function(e){if(d!==e){d=e,t.resources.changeCardImagesToSuits(e);var i=13*e;this.cards.forEach((function(t){t.type=Math.floor(t.objid%i/13)}))}},l.prototype.setUpCardData=function(t){u.setName(t)},l.prototype.moveOccurred=function(e,i,n){return e instanceof t.containers.Foundation&&(u.gameScore-=5*n),i instanceof t.containers.Foundation&&(u.gameScore+=5*n),this.updateState(),this.getAutomoveAfterMove()},l.prototype.getAutomoveAfterMove=function(){return[]},l.prototype.updateState=function(){},l.prototype.undoTakeOver=function(e,i){i instanceof t.containers.Stock&&e===i.target?i.increRedealCount():e instanceof t.containers.Stock&&i===e.target&&e.decreRedealCount()},l.prototype.hoverable=function(t){return this.movable(t)},l.prototype.getMaxmove=function(t){return 1/0},l.prototype.movable=function(t){return!t.flipped&&t.ownedBy&&t.ownedBy.cards.length-t.ind<=t.ownedBy.maxCardOut()&&t.ownedBy.cards.length-t.ind<=this.maxMove},l.prototype.cardClicked=function(e){return t.containers.Stock&&e.ownedBy instanceof t.containers.Stock&&e==e.ownedBy.lastCard()?e.ownedBy.eject():0},l.prototype.requestAutomove=function(t,e){if(this.autoMoveFollowHint&&e&&e.from&&e.to&&e.from===t.ownedBy&&t.ind===e.from.cards.length-e.length)return e.to;var i=t.ownedBy.getCards(t.ownedBy.cards.length-t.ind);return i=i.slice(0,t.ownedBy.maxCardsToMove()),this.getAutomoveDes(i)},l.prototype.getAutomoveDesFor=function(t,e){for(var i=0;i<e.length;i++)if(this.testAccept(t,e[i]))return e[i]},l.prototype.getAutomoveDes=function(t){for(var e=0;e<this.automovePrefs.length;e++){var i=this.getAutomoveDesFor(t,this.automovePrefs[e]);if(i)return i}return null},l.prototype.adjustLayout=function(e,i){var n=t.config.totalL,o=t.config.cL,a=(t.config.isMobilePhone,1),s=e/(n*this.columns+1)*n,r=Math.min(146,Math.floor(s/n*o)),c=Math.min(198,Math.floor(i/this.rows/a));c<r/146*198?r=Math.floor(c/198*146):c=Math.floor(r/146*198),s=Math.round(r/o*n);var h=Math.round(c/8*10),u=Math.min(r/n,Math.floor((s-r)/2)),d=Math.floor((e-s*this.columns)/2);return window.innerHeight<window.innerWidth&&(d+=t.game.marginsForDevices),{cwidth:r,cheight:c,top:h,margin:u,left:d,height:i,width:e}},l.prototype.performDeal=function(t){if(this.config.flip instanceof Object)if("last"===this.config.flip.type){var e=this.config.flip.num;this.config.flip.containers.forEach(function(t){this[t].forEach((function(t){t.getCards(e).forEach((function(t){t.directFlip(!1)}))}))}.bind(this))}else if("all"===this.config.flip.type)this.config.flip.containers.forEach(function(t){this[t].forEach((function(t){t.cards.forEach((function(t){t.directFlip(!1)}))}))}.bind(this));else{var i=this.config.flip.nums;this.tableaus.forEach((function(t,e){t.getCards(i[e]).forEach((function(t){t.directFlip(!1)}))}))}this.containers.forEach((function(t){t.adjustPos()})),setTimeout(function(){this.cards.forEach((function(t){t.animating=!1,t.updateShadow()})),t&&t()}.bind(this),500)},l.prototype.animateDeal=function(e){if(!this.tableaus||!this.tableaus.length)return this.performDeal(e);var i={};if(this.config.flip instanceof Object)if("last"===this.config.flip.type){var n=this.config.flip.num;this.config.flip.containers.forEach(function(t){this[t].forEach((function(t){t.getCards(n).forEach((function(t){i[t.objid]=!0}))}))}.bind(this))}else if("all"===this.config.flip.type)this.config.flip.containers.forEach(function(t){this[t].forEach((function(t){t.cards.forEach((function(t){i[t.objid]=!0}))}))}.bind(this));else{var o=this.config.flip.nums;this.tableaus.forEach((function(t,e){t.getCards(o[e]).forEach((function(t){i[t.objid]=!0}))}))}else if("all"===this.config.flip)for(var a=0;a<this.cards.length;a++)i[a]=!0;this.containers.forEach((function(e){e instanceof t.containers.Tableau&&(e.pauseAnimateCard=!0,e.cards.forEach((function(t){t.flipped=!i[t.objid]})),e.adjustPos(),e.cards.forEach((function(t){t.flipped=!0})))}));var s=0,r=0,c=0,h=!1;do{h=!1;var u=this.tableaus;this.reservePiles&&(u=[].concat(this.tableaus,this.reservePiles)),u.forEach((function(t){t.cards.length>c&&(setTimeout(function(e){return function(){var n=t.cards[e];n&&(i[n.objid]&&n.directFlip(!1),t.cards[e].adjustPos(void 0,100+10*r),r++,setTimeout(function(t){return function(){t.dom.style.zIndex=t.pos.z}}(t.cards[e]),t.cards[e].time))}}(c),s),s+=50,h=!0)})),c++}while(h);setTimeout(function(){this.containers.forEach((function(e){e instanceof t.containers.Tableau||(e.cards.forEach((function(t){i[t.objid]&&t.directFlip(!1)})),e.adjustPos())}));var n=this.tableaus;this.reservePiles&&(n=[].concat(this.tableaus,this.reservePiles)),n.forEach((function(t){t.pauseAnimateCard=!1,t.adjustZ(0)})),this.cards.forEach((function(t){t.animating=!1,t.updateShadow()})),e&&e()}.bind(this),s+t.config.animation_time)},l.prototype.init=function(e){if(t.gameSettings.useCSS3?$(".card").transition({x:this.initx,y:this.inity,boxShadow:"none"}).find(".cardFront").css("boxShadow","none"):$(".card").css({x:this.initx,y:this.inity,boxShadow:"none"}).find(".cardFront").css("boxShadow","none"),this.containers.forEach((function(t){t.ini()})),void 0!==this.config.stockRedealCount&&this.stocks){var i=this.config.stockRedealCount;this.stocks.forEach((function(t){t.setRedealCount(i)}))}var n="all"!==this.config.flip;if(this.cards.forEach((function(t){t.animating=!0,t.directFlip(n),t.setShadow(!1),t.updateShadow()})),o=t.gameSettings.useCSS3?700:0,"pyramid"==t.data.projectType)var o=250;0==t.game.nextGameNumber?(this.gameNumber=Math.ceil(9999999*Math.random()),this.gameDate=null):(t.game.gameDate?this.gameDate=t.game.gameDate:this.gameDate=null,this.gameNumber=t.game.nextGameNumber,t.game.nextGameNumber=0,t.game.gameDate=null),this.updateGameName(),setTimeout(function(){for(var i=[],n=0;n<this.config.cards;n++)i.push(n);var o=new Math.seedrandom(this.gameNumber);if(["tableaus","foundations","reserves","stocks","wastes","cardHolders","reservePiles"].forEach(function(t){!function(t,e,i,n,o){e&&e.forEach((function(e,a){for(var s=0;s<e;s++){var r=Math.floor(o()*t.length);i[a].takeIn(n[t[r]]),r+1<t.length?t[r]=t.pop():t.pop()}}))}(i,this.config[t],this[t],this.cards,o)}.bind(this)),i.length>0)throw"there are "+i.length+" unused cards!";t.gameSettings.useCSS3?this.performDeal(e):this.animateDeal(e),u.gameScore=this.config.initialScore||0}.bind(this),o)},l.prototype.updateGameName=function(){$("#gameName").html(t.game.name)},l.prototype.getSelectiveAutoplayMove=function(){var e,i,n,o,a,s="canfield"===t.curGame[0],r=[1,2];if(s){var c=this.foundations[0].cards[0].num+1;r=[this.foundations[0].cards[0].num,14===c?1:c]}for(e=0;e<this.containers.length;e++)if(!(this.containers[e]instanceof t.containers.Foundation||!(n=this.containers[e].lastCard())||n.flipped||this.containers[e].maxCardOut()<=0)){if(o=[],"sequence_diff_color"===t.containers.Tableau.getMovableCards()&&-1===r.indexOf(n.num)){var h=12,u=38;s&&1===n.num&&(h+=13,u+=13),o.push((n.objid+h)%52),o.push((n.objid+u)%52),104==this.config.cards&&(o.push((n.objid+h)%52+52),o.push((n.objid+u)%52+52))}for(this.foundations.forEach((function(t){t.cards.forEach((function(t){(a=o.indexOf(t.objid))>=0&&o.splice(a,1)}))})),i=0;i<this.foundations.length;i++)if(this.testAccept(n,this.foundations[i])&&0==o.length)return{cards:[n],destination:this.foundations[i]}}},l.prototype.getAutoFillMove=function(){if("n"===t.gameSettings.autoplayMode||"disabled"===t.gameSettings.autoplayMode||!t.gameSettings.autoplayEnabled)return null;if("s"===t.gameSettings.autoplayMode)return this.getSelectiveAutoplayMove();for(var e=0;e<this.containers.length;e++)if(!(this.containers[e]instanceof t.containers.Foundation))for(var i=0;i<this.foundations.length;i++){var n=this.containers[e].lastCard();if(n&&!n.flipped&&this.containers[e].maxCardOut()>0&&n.num<1/0&&this.foundations[i].accept(n))return{cards:[n],destination:this.foundations[i]}}return null},l.prototype.testAccept=function(t,e){return e.accept(t)},l.prototype.clear=function(){this.containers.forEach((function(t){t.dom&&t.dom.parentNode.removeChild(t.dom),t.ini()})),this.cards.forEach((function(t){t.dom.parentNode.removeChild(t.dom)}))},l.prototype.considerHints=function(t,e,i){return!0},l.prototype.computeHints=function(t){this.containers.forEach(function(e){this.containers.forEach(function(i){if(e!==i&&!e.isEmpty()&&this.considerHints(e,i))for(var n=Math.min(Math.min(e.maxCardOut(),i.maxCardIn()),this.getMaxmove(i)),o=0;o<n;o++){var a=e.cards[e.cards.length-1-o];this.movable(a)&&this.testAccept([a],i)&&this.considerHints(e,i,o+1)&&t.push({from:e,to:i,length:o+1})}}.bind(this))}.bind(this)),t.sort(this.sortHints.bind(this))},l.prototype.sortHints=function(t,e){if(t.to===e.to&&!t.to.isEmpty())return this.sortMove(t.from,e.from,t.to.getCards(1));if(t.from===e.from&&t.length===e.length)return this.sortMove(t.to,e.to,t.from.getCards(1));var i=this.moveCanAlterGameState(t),n=this.moveCanAlterGameState(e);if(!i&&!n)return 0;if(!i)return 1;if(!n)return-1;var o=t.from.lastCardIsOfSameType(t.to),a=e.from.lastCardIsOfSameType(e.to);return o&&a?e.length+e.to.maxCardOut()-(t.length+t.to.maxCardOut()):a?1:o?-1:e.length-t.length},l.prototype.moveCanAlterGameState=function(t){var e=t.from.cards.slice(-t.length),i=t.from.cards[t.from.cards.length-t.length-1];if(!i||i.flipped)return!0;t.to.cards.push.apply(t.to.cards,e);var n=t.to.maxCardOut(),o=t.from.maxCardOut();return t.to.cards.splice(-t.length),n!==o},l.prototype.sortMove=function(t,e,i){return e.length-t.length},l.prototype.isWon=function(){return this.foundations.every((function(t){return 13===t.cards.length}))},l.prototype.startAutoPlay=function(){return this.stocks[0].cards.length+this.wastes[0].cards.length},l.prototype.testAuto=function(){return this},l.prototype.isLost=function(t){return 0===t.length},l.prototype.gameState=function(){var t={containers:this.containers.map((function(t){return t.cards.map((function(t){return t.objid}))})),flipInfo:this.cards.map((function(t){return t.flipped?1:0})),gameNumber:this.gameNumber};return this.gameDate&&(t.gameDate=this.gameDate),this.stocks&&(t.stockRedeals=this.stocks.map((function(t){return""+t._redealCount}))),t},l.prototype.loadGameState=function(e,i){var n=e.containers,o=this.cards;this.gameNumber=e.gameNumber,this.cards.forEach((function(t,i){t.directFlip(!!e.flipInfo[i])}));var a=t.gameSettings.useCSS3?100:0;setTimeout(function(){this.containers.forEach((function(e,i){e.ini(),n[i].forEach((function(t){e.takeIn(o[t])})),e instanceof t.containers.Foundation&&(u.gameScore+=5*n[i].length),e.pauseAnimateCard=!t.gameSettings.useCSS3,e.adjustPos(),e.pauseAnimateCard=null})),e.stockRedeals&&this.stocks.forEach((function(t,i){t.setRedealCount(parseFloat(e.stockRedeals[i]))})),this.cards.forEach((function(e){e.updateShadow(),e.animating=!1,t.gameSettings.useCSS3||e.adjustPos(0,0)})),i()}.bind(this),a)},l.prototype.getSpecialHint=function(){return null},l.prototype.clickAdjust=function(t){},l.prototype.getMoveWhenDrop=function(t,e){return[{cards:t,des:e}]}}(),function(){"use strict";var i=t.GameBase.prototype,n=t.games.Klondike=function(e){this.setUpCardData("Klondike."+e);var i=t.containers.Tableau;this.config={cards:52,flip:{type:"last",num:1,containers:["tableaus"]},tableaus:[1,2,3,4,5,6,7],foundations:[0,0,0,0],wastes:[0],stocks:[24],stockRedealCount:1/0},i.setWithCardAccept("groupable"),i.setMovableCards("sequence_updown_same_suit"),i.setSpaceAccept("king"),t.containers.Foundation.setMode("normal"),t.containers.Stock.setEmptyCheck(null);var n=1,o="normal";"3"===e?(n=3,o="3"):"twodecks"===e?(this.config.cards=104,this.config.tableaus=[1,2,3,4,5,6,7,8,9],this.config.foundations=[0,0,0,0,0,0,0,0],this.config.stocks[0]=59):"easthaven"===e?(i.setSpaceAccept("any"),this.config.tableaus=[3,3,3,3,3,3,3],this.config.stocks[0]=31,this.config.wastes.length=0,this.config.stockRedealCount=0):"fortythieves"===e?(this.config.cards=104,this.config.tableaus=[4,4,4,4,4,4,4,4,4,4],this.config.foundations=[0,0,0,0,0,0,0,0],this.config.stocks[0]=64,i.setMovableCards("sequence_updown_same_suit"),i.setSpaceAccept("any"),i.setWithCardAccept("suit"),this.config.flip.num=4,this.config.stockRedealCount=0):"yukon"===e?(this.config.tableaus=[1,6,7,8,9,10,11],this.config.flip.num=5,this.config.wastes.length=0,this.config.stocks.length=0):"diplomat"===e&&(this.config.cards=104,this.config.tableaus=[4,4,4,4,4,4,4,4],this.config.foundations=[0,0,0,0,0,0,0,0],this.config.stocks[0]=72,this.config.flip.num=4,this.wastePosition="bottom",this.config.stockRedealCount=0,i.setWithCardAccept("sequence"),i.setMovableCards("sequence_updown_same_suit"),i.setSpaceAccept("any")),this.config.cards>52?t.config.offsetStockDiv=4:t.config.offsetStockDiv=2,this.columns=this.config.tableaus.length,this.rows=3,t.GameBase.call(this),this.automovePrefs=[this.foundations,this.tableaus],this.stocks.length&&(this.stocks[0].setLayout("normal"),this.stocks[0].lastCardUp=!1),"fortythieves"===e?(this.stocks[0].target=this.wastes[0],this.stocks[0].ejectCards=n,this.wastes[0].setLayout(o)):"easthaven"===e?(this.stocks[0].target=this.tableaus,this.stocks[0].ejectCards=n):this.stocks.length&&(this.stocks[0].target=this.wastes[0],this.stocks[0].ejectCards=n,this.wastes[0].setLayout(o))};n.prototype=Object.create(i),n.prototype.getAutomoveDes=function(n){return"diplomat"===t.curGame[1]?[].concat.apply([],this.automovePrefs).filter(function(t){return this.testAccept(n,t)}.bind(this)).reduce(e.getBestMove(n),null):i.getAutomoveDes.apply(this,arguments)},n.prototype.hoverable=function(e){return i.hoverable.call(this,e)||e.ownedBy instanceof t.containers.Stock&&e===e.ownedBy.lastCard()},n.prototype.considerHints=function(e,i,n){return!(e instanceof t.containers.Foundation||n&&e instanceof t.containers.Tableau&&i instanceof t.containers.Tableau&&0===i.cards.length&&e.cards.length===n)},n.prototype.updateState=function(){this.stocks.length&&this.stocks[0].targetChanged()},n.prototype.getSpecialHint=function(){return this.stocks[0].cards.length>0||this.stocks[0].redealable()?{to:this.stocks[0]}:null},n.prototype.adjustLayout=function(t,e){function n(){var t=navigator.userAgent.toLowerCase();return t.match(/iphone/)?"iPhone":t.match(/android/)&&t.match(/mobile/)?"android":t.match(/windows/)&&t.match(/phone/)?"windows":null}var o=i.adjustLayout.call(this,t,e);this.initx=o.margin+(n()?o.left:30),this.inity=Math.floor(o.cheight/8);var a=2*o.margin+o.cwidth,s=this.tableaus.length,r=this.foundations.length,c=a*s,h=this.stocks.length+this.wastes.length,u=c-a*h,d=Math.min(Math.floor((u/r-o.cwidth)/2),o.margin),l=o.cwidth+2*d,f=2*d-o.margin+(n()?o.left:30)+c-l*r,p=0;return"bottom"===this.wastePosition&&(a=Math.floor(c/(s+1)),p=a,l=a,d=o.margin=Math.floor((a-o.cwidth)/2),f=this.initx+a),this.tableaus.forEach(function(t,e){t.setPos(p+this.initx+a*e,o.top)}.bind(this)),this.foundations.forEach(function(t,e){t.setPos(f+l*e,this.inity)}.bind(this)),this.stocks.length&&this.stocks[0].setPos(this.initx,this.inity),this.wastes.length&&("bottom"===this.wastePosition?this.wastes[0].setPos(this.initx,o.top):this.wastes[0].setPos(o.left+o.cwidth+3*o.margin-(s>8?o.cwidth/10:0),this.inity)),o},n.prototype.isLost=function(t){return 0===t.length&&this.stocks.length&&0===this.stocks[0].cards.length&&!this.stocks[0].redealable()}}(),function(){"use strict";var e=t.GameBase.prototype,i=t.games.Golf=function(e){var i="golf";"golf"!==e&&(i+="."+e),this.setUpCardData(i);var n=t.containers.Tableau;this.config={cards:52,flip:{type:"all",containers:["tableaus","foundations"]},tableaus:[5,5,5,5,5,5,5],foundations:[1],stocks:[16],stockRedealCount:0},n.setWithCardAccept("none"),n.setMovableCards("single"),n.setSpaceAccept("none"),t.containers.Foundation.setMode("normal"),t.containers.Stock.setEmptyCheck(null),this.columns=this.config.tableaus.length,this.rows=3.75,t.GameBase.call(this),this.automovePrefs=[this.foundations],this.stocks[0].setLayout("normal"),this.stocks[0].lastCardUp=!1,this.stocks[0].target=this.foundations[0],this.stocks[0].ejectCards=1,t.gameSettings.autoplayMode="disabled",this.aceToKing="golfeasy"===e};i.prototype=Object.create(e),i.prototype.hoverable=function(i){return e.hoverable.call(this,i)||i.ownedBy instanceof t.containers.Stock&&i===i.ownedBy.lastCard()},i.prototype.getSpecialHint=function(){return this.stocks[0].cards.length>0||this.stocks[0].redealable()?{to:this.stocks[0]}:null},i.prototype.adjustLayout=function(i,n){var o=e.adjustLayout.call(this,i,n);return o.top=Math.floor(o.cheight/4),this.initx=Math.floor(o.width/2-1.25*o.cwidth),this.inity=Math.floor(2.45*o.cheight+o.top),this.tableaus.forEach((function(t,e){t.setPos(o.margin+o.left+(2*o.margin+o.cwidth)*e,o.top)})),this.foundations[0].setPos(Math.floor(t.game.marginsForDevices+o.width/2+.25*o.cwidth),Math.floor(2.45*o.cheight+o.top)),this.stocks[0].setPos(Math.floor(t.game.marginsForDevices+o.width/2-1.25*o.cwidth),Math.floor(2.45*o.cheight+o.top)),o},i.prototype.isLost=function(t){return 0===t.length&&0===this.stocks[0].cards.length},i.prototype.testAccept=function(e,i){if(e instanceof Array||(e=[e]),i instanceof t.containers.Foundation){var n=e[0];if(n.flipped)return!1;var o=i.lastCard().num;return 1===o?2===n.num||this.aceToKing&&13===n.num:13==o?12===n.num||this.aceToKing&&1===n.num:1===Math.abs(o-n.num)}return i.accept(e)},i.prototype.isWon=function(){return this.foundations[0].cards.length===52-this.stocks[0].cards.length}}(),function(){"use strict";var e=null,i=t.containers.Tableau,n=t.games.Freecell=function(n){this.setUpCardData("freecell."+n),this.config={cards:52,flip:"all",tableaus:[7,7,7,7,6,6,6,6],reserves:[0,0,0,0],foundations:[0,0,0,0]},i.setWithCardAccept("groupable"),t.containers.Foundation.setMode("normal"),this.canUseTableau=!0,this.columns=8,this.rows=3;var o=function(t){this.initx=t.left+t.margin,this.inity=t.cheight/8,this.tableaus.forEach((function(e,i){e.setPos(t.margin+t.left+(2*t.margin+t.cwidth)*i,t.top)})),this.reserves.forEach((function(e,i){e.setPos(Math.floor(t.left+(t.cwidth+t.margin/2*3)*i+t.margin),Math.floor(t.cheight/8))}));var e=2*t.margin-t.margin+t.left+(2*t.margin+t.cwidth)*this.tableaus.length-(t.cwidth+2*t.margin);this.foundations.slice().reverse().forEach((function(i,n){i.setPos(e-(t.cwidth+t.margin/2*3)*n,Math.floor(t.cheight/8))}))}.bind(this),a=function(t){this.initx=t.left+t.margin,this.inity=t.cheight/8;var e=Math.floor(((t.height-30)/5-t.cheight)/2);e<t.cheight/16?e=Math.floor(t.cheight/16):e>t.cheight/6&&(e=Math.floor(t.cheight/6)),this.tableaus.forEach((function(e,i){e.setPos(t.margin+t.left+(2*t.margin+t.cwidth)*(i+1),t.top)})),this.reserves.forEach((function(e,i){e.setPos(t.left+(t.cwidth+2*t.margin)*(i+1)+t.margin,Math.floor(t.cheight/8))})),this.foundations.forEach((function(i,n){i.setPos(t.left+t.margin,Math.floor(t.cheight/8+(t.cheight+2*e)*n))}))}.bind(this),s=function(t){this.initx=t.left+t.margin,this.inity=t.cheight/8,this.tableaus.forEach((function(e,i){e.setPos(t.margin+t.left+(2*t.margin+t.cwidth)*i,Math.floor(2.25*t.cheight))})),this.reserves.forEach((function(e,i){e.setPos(t.left+(t.cwidth+3*t.margin)*(i%4)+t.margin,Math.floor(t.cheight/8+Math.floor(i/4)*t.cheight*1.05))}));var e=2*t.margin-t.margin+t.left+(2*t.margin+t.cwidth)*this.tableaus.length-(t.cwidth+2*t.margin);this.foundations.forEach((function(i,n){i.setPos(e-(t.cwidth+3*t.margin)*(3-n%4),Math.floor(t.cheight/8+Math.floor(n/4)*t.cheight*1.05))}))}.bind(this);"freecell"==n?(i.setSpaceAccept("any"),i.setMovableCards("sequence_diff_color"),e=o):"eightoff"==n?(i.setMovableCards("sequence_same_suit"),i.setSpaceAccept("king"),this.config.reserves=[1,1,1,1,0,0,0,0],this.config.tableaus=[6,6,6,6,6,6,6,6],e=a,this.columns=9,this.rows=4.75):"bakersgame"==n?(i.setMovableCards("sequence_same_suit"),i.setSpaceAccept("king"),this.canUseTableau=!1,e=o):"twodecks"==n&&(this.config.cards=[104],i.setMovableCards("sequence_diff_color"),i.setSpaceAccept("any"),this.config.reserves=[0,0,0,0,0,0,0,0],this.config.foundations=[0,0,0,0,0,0,0,0],this.config.tableaus=[11,11,11,11,10,10,10,10,10,10],e=s,this.rows=5.5,this.columns=10),t.GameBase.call(this),this.emptyTableaus=0,this.emptyReserves=0,this.maxMove=5,this.emptyMaxmove=5,this.automovePrefs=[this.foundations,this.tableaus,this.reserves]},o=t.GameBase.prototype;n.prototype=Object.create(o),n.prototype.getAutomoveDesFor=function(t,e){return e==this.tableaus?e.filter(function(e){return this.testAccept(t,e)}.bind(this)).sort(this.sortMove)[0]:o.getAutomoveDesFor(t,e)},n.prototype.sortMove=function(t,e){return t?e.cards.length?t.cards.length&&t.maxCardOut()>=e.maxCardOut()?-1:1:-1:1},n.prototype.init=function(t){this.maxMove=this.emptyReserves+1,this.emptyMaxmove=this.maxMove,o.init.call(this,function(){this.emptyTableaus=0,this.emptyReserves=this.reserves.reduce((function(t,e){return t+(e.cards.length?0:1)}),0),t()}.bind(this))},n.prototype.updateGameName=function(){t.GameBase.prototype.updateGameName.call(this)},n.prototype.adjustLayout=function(t,i){var n=o.adjustLayout.call(this,t,i);return e(n),n},n.prototype.considerHints=function(e,i){return!(e instanceof t.containers.Foundation||i instanceof t.containers.Reserve)},n.prototype.updateState=function(){this.emptyReserves=this.reserves.reduce((function(t,e){return t+(e.cards.length?0:1)}),0),this.emptyTableaus=this.tableaus.reduce((function(t,e){return t+(e.cards.length?0:1)}),0),this.canUseTableau&&"king"!==i.getSpaceAccept()?(this.maxMove=this.emptyTableaus+this.emptyReserves+1,this.emptyMaxmove=this.emptyTableaus+this.emptyReserves):(this.maxMove=this.emptyReserves+1,this.emptyMaxmove=this.maxMove)},n.prototype.getMaxmove=function(e){return e instanceof t.containers.Tableau&&0===e.cards.length?this.emptyMaxmove:this.maxMove},n.prototype.isLost=function(t){return 0===t.length&&0===this.emptyTableaus&&0===this.emptyReserves},n.prototype.loadGameState=function(e,i){t.GameBase.prototype.loadGameState.call(this,e,function(){this.gameDate=e.gameDate,this.updateState(),this.updateGameName(),i()}.bind(this))}}(),function(){"use strict";var e=t.localisation.getL,i=t.GameBase.prototype,n=t.games.Spider=function(i){this.setUpCardData("spider."+i),this.isSpider=!0;var n=t.containers.Tableau;this.config={cards:104,suits:parseInt(i,10),flip:{type:"last",num:1,containers:["tableaus"]},tableaus:[6,6,6,6,5,5,5,5,5,5],foundations:[0,0,0,0,0,0,0,0],stocks:[50],stockRedealCount:0},n.setWithCardAccept("sequence"),n.setMovableCards("sequence_same_suit"),n.setSpaceAccept("any"),this.onlyMaxLengthHint=!0,t.containers.Foundation.setMode("noManual"),t.containers.Stock.setEmptyCheck((function(){t.ui.gameAlert(e("spider"),e("spider-deal-info"))})),this.columns=this.config.tableaus.length,this.rows=3,"simplesimon"==i?(this.isSpider=!1,this.config={cards:52,suits:4,flip:"all",tableaus:[8,8,8,7,6,5,4,3,2,1],foundations:[0,0,0,0]}):"scorpion"==i&&(this.isSpider=!1,this.config={cards:52,suits:4,flip:{type:"tableaus",nums:[4,4,4,4,7,7,7]},tableaus:[7,7,7,7,7,7,7],stocks:[3],foundations:[0,0,0,0]},n.setWithCardAccept("suit"),n.setMovableCards("any"),n.setSpaceAccept("king"),t.containers.Stock.setEmptyCheck(null),this.columns=this.config.tableaus.length,this.rows=4,this.onlyMaxLengthHint=!1),t.GameBase.call(this),this.automovePrefs=[this.tableaus],this.stocks&&(this.stocks[0].setLayout("piles",{margin:10,numPerPile:10}),this.stocks[0].lastCardUp=!1,this.stocks[0].target=this.tableaus,this.stocks[0].ejectCards=1),t.gameSettings.autoplayMode="disabled"};n.prototype=Object.create(i),n.prototype.hoverable=function(e){return i.hoverable.call(this,e)||e.ownedBy instanceof t.containers.Stock&&e===e.ownedBy.lastCard()},n.prototype.considerHints=function(e,i,n){if(e instanceof t.containers.Foundation)return!1;if(i instanceof t.containers.Foundation)return!1;if(n){if(e instanceof t.containers.Tableau&&i instanceof t.containers.Tableau&&0===i.cards.length&&e.cards.length===n)return!1;if(e instanceof t.containers.Tableau&&n!==e.maxCardOut()){if(this.isSpider&&i.cards.length&&e.cards[e.cards.length-n].type===i.cards[i.cards.length-1].type&&n+i.maxCardOut()===13)return!0;if(this.onlyMaxLengthHint)return!1}}return!0},n.prototype.isLost=function(t){return 0===t.length&&this.stocks&&0===this.stocks[0].cards.length},n.prototype.getSpecialHint=function(){return this.stocks&&this.stocks[0].cards.length>0?{to:this.stocks[0]}:null},n.prototype.getAutomoveDes=function(t){var e=this;return this.tableaus.filter((function(i){return e.testAccept(t,i)})).sort((function(i,n){return e.sortMove(i,n,t)}))[0]},n.prototype.sortMove=function(t,e,i){return t?e.cards.length?t.cards.length?e.lastCard().type!==i[0].type?-1:t.lastCard().type!==i[0].type?1:t.maxCardOut()>=e.maxCardOut()?-1:1:1:-1:1},n.prototype.adjustLayout=function(t,e){var n=i.adjustLayout.call(this,t,e);this.initx=n.left+n.margin,this.inity=n.cheight/8,this.tableaus.forEach((function(t,e){t.setPos(n.margin+n.left+(2*n.margin+n.cwidth)*e,n.top)}));var o=n.left+(2*n.margin+n.cwidth)*(this.columns-1);return this.foundations.forEach((function(t,e){t.setPos(o-(n.cwidth+2*n.margin)*e+n.margin,Math.floor(n.cheight/8))})),this.stocks&&(this.stocks[0].layoutOptions.margin=n.cwidth/4,this.stocks[0].setPos(n.left+n.margin,n.cheight/8)),n},n.prototype.getAutoFillMove=function(){for(var t=0;t<this.tableaus.length;t++){var e=this.tableaus[t];if(e.cards.length>=13){for(var i=e.cards.length-1;i>0&&e.cards[i-1].num-e.cards[i].num==1&&e.cards[i-1].type===e.cards[i].type&&!e.cards[i-1].flipped&&!e.cards[i].flipped;)i--;if(e.cards.length-i==13){for(var n,o=0;o<this.foundations.length;o++)if(0===this.foundations[o].cards.length){n=this.foundations[o];break}return{cards:e.getCards(13),destination:n,chain:!0}}}}return null}}(),function(){"use strict";var e=t.GameBase.prototype,i=t.games.Pyramid=function(e){this.setUpCardData("pyramid."+e),this.config={cards:52,flip:{type:"last",num:1,containers:["cardHolders","stocks"]},cardHolders:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],foundations:[0],stocks:[24],wastes:[0],stockRedealCount:2},t.containers.Foundation.setMode("onlyKing"),this.columns=7,this.rows=4.5,t.GameBase.call(this),this.automovePrefs=[this.foundations],this.stocks[0].setLayout("normal"),this.stocks[0].target=this.wastes[0],this.stocks[0].ejectCards=1,this.stocks[0].lastCardUp=!0,this.wastes[0].setLayout("normal");for(var i=0,n=0;n<7;n++)for(var o=0;o<=n;o++){var a=this.cardHolders[i];a.zAdd=n+7,6!==n&&(a.addBlockingContainer(this.cardHolders[i+n+1]),a.addBlockingContainer(this.cardHolders[i+n+2])),i++}t.gameSettings.autoplayMode="disabled",this.discardAll="pyramidnormal"===e,this.autoMoveFollowHint=!1};i.prototype=Object.create(e),i.prototype.hoverable=function(i){return e.hoverable.call(this,i)||i.ownedBy instanceof t.containers.Stock&&i===i.ownedBy.lastCard()},i.prototype.isLost=function(t){return 0===t.length&&0===this.stocks[0].cards.length&&!this.stocks[0].redealable()},i.prototype.getSpecialHint=function(){return this.stocks[0].redealable()||this.stocks[0].cards.length?{to:this.stocks[0]}:null},i.prototype.adjustLayout=function(i,n){var o=e.adjustLayout.call(this,i,n),a=(o.height-1.25*o.cheight)/6;2*a-o.cheight>2*o.margin?a=(2*o.margin+o.cheight)/2:o.margin=(2*a-o.cheight)/2;var s=o.cwidth+2*o.margin;o.left=t.game.marginsForDevices+Math.floor((i-s*this.columns)/2),this.initx=o.left-4*o.margin,this.inity=o.cheight/8;var r=o.left+(2*o.margin+o.cwidth)*(this.columns-1);this.foundations[0].setPos(r+o.margin,Math.floor(o.cheight/8)),this.stocks[0].setPos(Math.max(o.left-4*o.margin,26),o.cheight/8),this.wastes[0].setPos(Math.max(o.left-4*o.margin,26)+o.cwidth+7*o.margin,o.cheight/8);for(var c=0,h=0;h<7;h++)for(var u=(o.cwidth+2*o.margin)/2*(6-h)+o.left+o.margin,d=o.cheight/8+a*h,l=0;l<=h;l++)this.cardHolders[c].setPos(u+l*(2*o.margin+o.cwidth),d),c++;return o},i.prototype.getAutoFillMove=function(){return null},i.prototype.cardClicked=function(e){return 13!==e.num&&e.ownedBy instanceof t.containers.Stock&&e==e.ownedBy.lastCard()?e.ownedBy.eject():0},i.prototype.testAccept=function(e,i){if(e instanceof Array||(e=[e]),e.length>1)return!1;if(i.accept(e))return!0;if(i instanceof t.containers.Foundation||e[0].ownedBy instanceof t.containers.Foundation)return!1;if(!i.cards.length)return!1;if(i instanceof t.containers.CardHolder&&i.isBlocked())return!1;var n=e[0],o=i.lastCard();return n.num+o.num===13},i.prototype.getMoveWhenDrop=function(i,n){return n instanceof t.containers.CardHolder||n instanceof t.containers.Waste||n instanceof t.containers.Stock?[{cards:[n.lastCard()],des:this.foundations[0]},{cards:i,des:this.foundations[0]}]:e.getMoveWhenDrop.call(this,i,n)},i.prototype.isWon=function(){return this.discardAll?this.foundations[0].cards.length===this.config.cards:0===this.cardHolders[0].cards.length},i.prototype.flipScale=1.1}(),function(){"use strict";var e=t.GameBase.prototype,i=t.games.Flowergarden=function(e){this.setUpCardData("flowergarden."+e);var i=t.containers.Tableau;this.config={cards:52,flip:{type:"last",num:1,containers:["tableaus","foundations","reservePiles"]},tableaus:[6,6,6,6,6,6],foundations:[0,0,0,0],wastes:[0],stocks:[],reservePiles:[16],stockRedealCount:1/0,initialScore:0},i.setWithCardAccept("sequence"),i.setMovableCards("single"),i.setSpaceAccept("any"),t.containers.Stock.setEmptyCheck(null),this.columns=7,this.rows=3,this.config.flip.num=16,t.GameBase.call(this),this.reservePiles[0].maxCardOut=function(){return this.cards.length},this.automovePrefs=[this.foundations,this.tableaus]};i.prototype=Object.create(e),i.prototype.considerHints=function(e,i,n){return!(n&&e instanceof t.containers.Tableau&&i instanceof t.containers.Tableau&&0===i.cards.length&&e.cards.length===n||e instanceof t.containers.Foundation&&i instanceof t.containers.Foundation)},i.prototype.adjustLayout=function(t,i){var n=e.adjustLayout.call(this,t,i);this.initx=2*n.margin,this.inity=n.cheight/8,this.tableaus.forEach((function(t,e){t.setPos(n.cwidth+3*n.margin+n.left+(2*n.margin+n.cwidth)*e,n.top)}));var o=Math.floor((((2*n.margin+n.cwidth)*this.tableaus.length-(2*n.cwidth+4*n.margin))/this.foundations.length-n.cwidth)/2);o>n.margin&&(o=n.margin);var a=n.cwidth+4*o-n.margin+n.left+(2*n.margin+n.cwidth)*this.tableaus.length-(n.cwidth+2*o)*this.foundations.length;return this.foundations.forEach((function(t,e){t.setPos(a+(n.cwidth+2*o)*e,Math.floor(n.cheight/8))})),this.reservePiles[0].setPos(2*n.margin,Math.floor(n.cheight/8)),n},i.prototype.isLost=function(t){return 0===t.length}}(),function(){"use strict";var i=t.localisation.getL;$.fn.stop=$.fn.transitionStop,$.cssEase.easeOutCubic="cubic-bezier(0.215, 0.610, 0.355, 1.000)",$.cssEase.easeOutCirc="cubic-bezier(0.075, 0.820, 0.165, 1.000)",$.cssEase.easeOutBack="cubic-bezier(0,1,0.5,1.3)",$.cssEase.easeInCubic=$.cssEase.in,$.cssEase.linear="linear";var n=t.game,o=t.ui,a=t.config,s=t.resources,r=t.gameSettings,c=t.cardData,h=function(){if($("#game-ui").css("minHeight",""),a.isApp)$(".barLeft").css("left","10px");else{var e=parseInt($("#game-ui").css("left")),i=$("._slot:visible").length;"true"==t.data.responsiveAds?window.innerWidth-i*e!=parseInt($("#game-ui").css("width"))&&$("#game-ui").css("width",window.innerWidth-i*e+"px"):($("#game-ui").css("width",window.innerWidth-i*e+"px"),$("#playArea").css("left","40px").css("right","40px"),window.innerWidth<=1280&&$("#topBar").css("left","50px"),window.innerWidth<=1024&&$("#playArea").css("right","20px"))}};t.ready=function(){t.ui.jqmLoader=$("#jqm-loader").loader(),$("#game-ui").css("minHeight",""),a.isApp&&($("#game-ui").css("left","0px"),$("#game-ui").css("width","100%")),"windows"==a.isApp&&$("#game-ui").css("background-color",t.data.backgroundColor),t.data.projectType||alert("tcgsol.data.projectType == null"),a.isMobilePhone&&$("body").addClass("mobilePhone"),function(){var e=$.Deferred();return uniStore==t.cachedChromeStorage?(e.resolve(),e):(uniStore.getVersion(),"1"!==t.config.version?(r.ini(),e.resolve()):e.resolve(),e)}().done((function(){uniStore.loadToCache((function(){uniStore.setVersion(t.config.version),r.lastGame?r.load():r.ini(),a.isApp||"solitaire-web-app"!=t.data.projectType?$("#select-lang-container").remove():(t.localisation.populate($("#select-lang")),$("#select-lang").val(t.gameSettings.language).selectmenu("refresh").on("change",(function(){t.gameSettings.language=this.value,t.localisation.load(this.value).then((function(){t.achievements.updateAchievements()}))}))),s.setCardset(r.cardset),s.setCardback(r.cardback),s.setBackground(r.background),a.isApp?t.delayedReady():setTimeout(t.delayedReady,1),n.onGamewon=function(){o.modal.hide(),t.winAnimations.stop(),c.gameScore=0;var e=t.data.defaultGame.split("-");t.data.gamesList[e[0]][e[1]],o.showWin();try{showXpAds()}catch(t){}}}))}))},t.delayedReady=function(){function u(){d(),v.popup("close")}function d(){clearTimeout(g),y.off("click",u)}!a.isApp&&a.isiOS7&&window.innerHeight<window.innerWidth&&$("html").addClass("ios7"),a.isApp&&a.isiOS7&&$("html").addClass("ios7-app"),window.scrollTo(0,0),n.setGameDom($("#playArea")),$(window).resize((function(){n.scheduleUpdateDisplay(100)})),a.isChromePackagedApp||$(window).on("unload",(function(){n.save()})),"windows"!=a.isApp&&o.loadGames($("#group-games")),t.progressBar(s.download(),t.audio.getPromise(),s.doneExtraImages()).done((function(){"windows"===a.isApp&&$(document).one("game:change",(function(){setTimeout(t.winAppSplash.hide,800)}));var e=t.gameSettings.soundOn;t.audio.toggle(!1),n.loadPromise.then((function(){$(".progress-bar").replaceWith(""),$("#darkenArea").appendTo("#game-ui"),$("body").removeClass("loading"),t.audio.toggle(e)})),o.loading.hide(),window.cordova&&navigator.splashscreen.hide(),t.startPlaying();var i=t.data.defaultGame.split("-");t.data.gamesList[i[0]][i[1]]})),s.updateImages(),$.mobile.defaultDialogTransition="none",$.mobile.defaultPageTransition="none",$.mobile.buttonMarkup.hoverDelay=0,$.browser.chrome&&$(".only-chrome").css("display","block"),$(window).on("resize",(function(){!a.isApp&&a.isiOS7&&window.innerHeight<window.innerWidth?$("html").addClass("ios7"):$("html").removeClass("ios7"),window.scrollTo(0,0),h(),parseInt($("#main-ui-popup").css("left"),10)>-1e3&&o.adjustGameSelector()})),h();for(var l=["x","y","scaleX","scaleY"],f=0;f<4;f++)!function(t){$.fx.step[t]=function(e){$.cssHooks[t].set(e.elem,e.now+e.unit)}}(l[f]);var p;r.useCSS3?$.fn.stop=$.fn.transitionStop:($.fn.transition=$.fn.animate,$(".bottomButton").css("box-shadow","none"),t.containers.Card.prototype.flip=t.containers.Card.prototype.directFlip,$.fx.step.boxShadow=function(){},$.cssHooks.boxShadow={get:function(){return null},set:function(){}},$.fx.step.ieBoxShadow=function(t){t.elem.style.boxShadow=t.end},$.cssHooks.ieBoxShadow={get:function(t){return t.style.boxShadow},set:function(t,e){t.style.boxShadow=e}}),($.browser.msie&&"ARM"===(navigator.cpuClass||"").toUpperCase()||!r.useCSS3)&&($("#effect-toggle").remove(),$("#swing-item").remove(),r.cardEffect=!1,r._0$=!1),$.mobile.zoom.disable(),$(window).off("orientationchange.iosorientationfix").off("devicemotion.iosorientationfix"),a.isiOS?$("#expand-item").remove():$("#game-ui").css("overflow","hidden"),$(document).bind("contextmenu",(function(t){t.preventDefault()})),document.onselectstart=function(){return!1},p=a.isiOS?"touchend":"click",$("#main-nav").find("li").on(p,(function(){var t=$(this);$("#main-groups").children().removeClass("current"),$("#group-"+t.html().toLowerCase()).addClass("current"),t.parent().children().removeClass("current"),t.addClass("current")})),$("#new-game-but").on(p,(function(){n._cur?o.showNewGameDialog():o.showPopup("main-ui")})),$("#undo-but").on(p,(function(){n.applyUndo()})),$("#redo-but").on(p,(function(){n.applyRedo()})),$("#hint-but").on(p,(function(){n.showHint()}));var g,m=$("#autoplay-but"),v=$("#autoplay-status"),y=$(document);m.on(p,(function(t){t.stopPropagation(),d(),r.autoplayEnabled=!r.autoplayEnabled;var e=i(r.autoplayEnabled?"on":"off"),n=i("autoplay-settings")+": <b>"+e+"</b>";v.html("<p>"+n+"</p>").popup("open"),y.on("click",u),g=setTimeout(u,3e3)})),$(".rules-but").on(p,(function(){o.showRules()})),$("#sound-but").on(p,(function(t){t.stopPropagation(),d(),controlSound(),r.soundOn=!r.soundOn}));var w,b,S=$("#settings-dialog").add("#appearance-dialog").add("#options-dialog").add("#advanced-options-dialog").add("#hiscores-dialog").add("#main-ui").add("#clear-stats-dialog").add("#about-dialog").add("#win-dialog").add("#new-game-dialog").add("#stats-dialog").add("#achievements-dialog").add("#score-buttons-dialog").add("#rules-dialog").add("#info-dialog").add("#rateapp-dialog").add("#more-games-dialog").add("#game-calendar-dialog").add("#freecell-of-day-stats-dialog").add("#game-number-dialog").add("#more-buttons-dialog");a.isMobilePhone?(window.location.hash="",S.addClass("onphone").addClass("phone-popup").appendTo("body").page(),w="pagebeforeshow",b="pagehide",$("#playArea").on("vclick",(function(t){"playArea"===t.target.id&&$(".bottomBar").toggleClass("hidden")}))):(S.popup({history:!1}),w="popupafteropen",b="popupafterclose"),$(".about-but").on(p,(function(){t.cardData.gamePlayCount<10&&$("#rateReviewAboutWin").css("display","none"),o.showPopup("about-dialog")})),$(document).on(p,"[data-open]",(function(t){o.showPopup(this.getAttribute("data-open"))})),$(document).on("click","[data-back-to]",(function(){var e=this.getAttribute("data-back-to");setTimeout((function(){t.ui.showPopup(e)}))})),$(".back-to-game").click((function(){setTimeout((function(){$(".back-to-game").removeClass("ui-btn-active ui-focus")}),700),o.backToGame()}));var k=$("#advanced-options-dialog");k.on(w,(function(){k.find("select").slider("refresh")})),$("#appearance-dialog").on(w,(function(){$("#cardsets-tab").attr("checked",!0),$(this).find(".single-list").hide(),$("#cardsets-list").show(),$(this).find("input[type=radio]").checkboxradio("refresh")})),$(".single-tab").click((function(){$(this).parentsUntil("fieldset").parent().parent().find(".single-list").hide(),$("#"+this.id.split("-")[0]+"-list").show()})),$(".start-new").click((function(){n.start(),$.mobile.changePage("#game-ui",{reverse:!0,changeHash:!1})})),$(".select-game").on(p,(function(){o.showGameSelector()})),$(".select-game-number").click((function(){o.showGameNumberDialog()})),$(".game-calendar").click((function(){t.freecellOfTheWeek.open()})),$(".play-game-number").click((function(){var i=parseInt($(".game-number-input").val(),10);e.isInt($(".game-number-input").val())&&i>=1&&i<=9999999?(t.game.nextGameNumber=i,n.start(),$.mobile.changePage("#game-ui",{reverse:!0,changeHash:!1})):o.showPopup("bad-game-number-dialog")})),$(".restart").click((function(){n.restart(),$.mobile.changePage("#game-ui",{reverse:!0,changeHash:!1})})),$("#stats-reset-button").click((function(){c.clearInfo(),o.showPopup("stats-dialog")})),$("#options-dialog").on(b,(function(){n.autoFill()})),$("#expand-option").on("change",(function(){r.expandCard="on"===$(this).val()})),$("#swing-option").on("change",(function(){r._0$="on"===$(this).val()})),$("#effect-option").on("change",(function(){r.cardEffect="on"===$(this).val()})),$("#css3-option").on("change",(function(){r.useCSS3="on"==$(this).val(),a.isApp?o.gameAlert(i("reload-title"),i("reload-content-app")):o.gameAlert(i("reload-title"),i("reload-content"),(function(){location.reload()}))})),$("#sound-option").on("change",(function(){})),$("#show-hi-scores").on("change",(function(){r.showHiScores="on"===$(this).val()})),$("#player-name").on("change",(function(){c.playerName=$.trim(this.value)})),$("#autoplay-option input[type='radio']").on("change",(function(){r.autoplayMode=$(this).val()})),$("#moves-toggle").on("change",(function(){r._1$=this.checked})),$("#score-toggle").on("change",(function(){r.showScore=this.checked})),$("#time-toggle").on("change",(function(){r.showTime=this.checked})),$("#rules-dialog").on("popupafteropen",(function(){$("#rules-dialog-popup").css("top",0)}));var C=document.createElement("div");$(C).css({margin:"0 auto",width:430,height:220}),$('#stats-dialog>div[data-role="content"]').prepend(C),$("#stats-dialog").on(w,(function(){n.playing()||t[1].data++,o.raphPie(C,t)})),$(".ui-popup-screen:not(#rules-dialog-screen)").off("vclick");var x=i("hint-key").length>1?"h":i("hint-key");$(document).bind("keydown","ctrl+z",(function(){n.applyUndo()})).bind("keydown","ctrl+y",(function(){n.applyRedo()})).bind("keypress",x,(function(){n.showHint()})),uniStore.isCached&&(n.onMoveOccurred=n.save)},$(document).ready((function(){var e;try{e=t.gameSettings.language}catch(t){uniStore.useMemStore()}t.localisation.load(e).then((function(){t.config.isApp||($("#darkenArea").html("<div id='loadingBox'>"+i("loading")+"<div class='progress-bar'><div id='progress'></div></div></div>"),a.isMobilePhone),t.ready()}))}))}()}();